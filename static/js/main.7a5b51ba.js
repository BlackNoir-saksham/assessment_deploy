/*! For license information please see main.7a5b51ba.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ne(e,t){return e(t)}function Ce(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ce(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var je=!1,Me=null,Fe=!1,Ve=null,Ue={onError:function(e){je=!0,Me=e}};function Be(e,t,n,r,i,a,o,u,s){je=!1,Me=null,Le.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,_t,It,St,Et=!1,Tt=[],Nt=null,Ct=null,At=null,Dt=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function jt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Nt&&Ft(Nt)&&(Nt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),Dt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Bt(Nt,e),null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=jt(Nt,e,t,n,r,i),!0;case"dragenter":return Ct=jt(Ct,e,t,n,r,i),!0;case"mouseover":return At=jt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,jt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,jt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},fn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(M({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=M({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Nn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var jn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Fr(e,0)}function $n(e){if(W(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,be(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Nr=Sr("animationstart"),Cr=Sr("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Pr=Dr[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Nr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),je){if(!je)throw Error(a(198));var l=Me;je=!1,Me=null,Fe||(Fe=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Er:case Tr:case Nr:s=yn;break;case Cr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ni=Ii(Ti),Ci=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ci),Si(Ni)}function Pi(e,t,n){if(Ni.current!==Ti)throw Error(a(168));Ei(Ni,t),Ei(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ni.current,Ei(Ni,e),Ei(Ci,Ci.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ci),Si(Ni),Ei(Ni,e)):Si(Ci),Ei(Ci,n)}var Fi=null,Vi=!1,Ui=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Ui=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Ji,Wi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Na(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);js|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ai:Ni.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ai:Ni.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==wo;return wo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function No(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,js|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,js|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===Cs)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){jo(t)&&Mo(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Ca(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,js|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Na(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Na(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cs)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Cs.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:Co,useRef:Uo,useState:function(){return Co(No)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[Co(No)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Uo,useState:function(){return Ao(No)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(No)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Os,Rs),Rs|=r;return bu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ai:Ni.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Nu(e,t,n,r,i){if(Ri(n)){var a=!0;ji(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Di(t,c=Ri(n)?Ai:Ni.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Aa?("function"===typeof l&&(Ua(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Di(t,s=Ri(n)?Ai:Ni.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Aa?("function"===typeof d&&(Ua(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Ou,Pu,Lu={dehydrated:null,treeContext:null,retryLane:0};function ju(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=jc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=ju(n),t.memoizedState=Lu,e):Fu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=ju(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Cs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Ji,Wi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),(t=Fu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?ju(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fu(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uu(e,n,t);else if(19===e.tag)Uu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),js|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ci),Si(Ni),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Pu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ci),Si(Ni),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,vs(t,e),Yu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==p?(p.return=d,Xu=p):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Xu=s):xs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,$u=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ws(e)}}function ws(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function xs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var _s,Is=Math.ceil,Ss=w.ReactCurrentDispatcher,Es=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,Ns=0,Cs=null,As=null,Ds=0,Rs=0,Os=Ii(0),Ps=0,Ls=null,js=0,Ms=0,Fs=0,Vs=null,Us=null,Bs=0,zs=1/0,qs=null,Ks=!1,Gs=null,Hs=null,Ws=!1,Qs=null,$s=0,Ys=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Ns)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===Cs||(e===Cs&&(0===(2&Ns)&&(Ms|=n),4===Ps&&uc(e,Ds)),rc(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(zs=Je()+500,Vi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Cs?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Ns)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cs?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ns;Ns|=2;var o=pc();for(Cs===e&&Ds===t||(qs=null,zs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}ba(),Ss.current=o,Ns=i,null!==As?t=0:(Cs=null,Ds=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Us,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Us,qs),t);break}bc(e,Us,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Us,qs),r);break}bc(e,Us,qs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Us,Us=n,null!==t&&oc(t)),e}function oc(e){null===Us?Us=e:Us.push.apply(Us,e)}function uc(e,t){for(t&=~Fs,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Us,qs),rc(e,Je()),null}function cc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(zs=Je()+500,Vi&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Ns=t))&&zi()}}function fc(){Rs=Os.current,Si(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ci),Si(Ni),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Cs=e,As=e=Oc(e.current,null),Ds=Rs=t,Ps=0,Ls=null,Fs=Ms=js=0,Us=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Es.current=null,null===n||null===n.return){Ps=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ja(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,ja(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Cs||0===(268435455&js)&&0===(268435455&Ms)||uc(Cs,Ds)}function mc(e,t){var n=Ns;Ns|=2;var r=pc();for(Cs===e&&Ds===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(ba(),Ns=n,Ss.current=r,null!==As)throw Error(a(261));return Cs=null,Ds=0,Ps}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=_s(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Es.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ps=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ps&&(Ps=5)}function bc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cs&&(As=Cs=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Cc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Es.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Ns=s,kt=u,Ts.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,$s=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Js?Ys++:(Ys=0,Js=e):Ys=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=wt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var w=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Xu=w;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Xu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Xu=b;break e}Xu=s.return}}if(Ns=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cs===e&&(Ds&n)===n&&(4===Ps||3===Ps&&(130023424&Ds)===Ds&&500>Je()-Bs?hc(e,0):Fs|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ca(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case C:return(e=Dc(13,n,t,i)).elementType=C,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case N:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&ji(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Di(t,Ni.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Ri(r)?(e=!0,ji(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Ns)&&(zs=Je()+500,zi()))}break;case 13:lc((function(){var t=Ca(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ca(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=cc,Ce=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===y)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,S=y||g;r.push({name:m||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:b,asterisk:!!w,pattern:S?c(S):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+N(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+N(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+N(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,O(x);else{var t=r(l);null!==t&&P(b,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,N=-1;function C(){return!(t.unstable_now()-N<T)}function A(){if(null!==S){var e=t.unstable_now();N=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){y(A,0)};function O(e){S=e,I||(I=!0,_())}function P(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,P(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".01a743a1.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="assessment:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/assessment_deploy/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkassessment=self.webpackChunkassessment||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return lt},SDK_VERSION:function(){return Sn},_DEFAULT_ENTRY_NAME:function(){return hn},_addComponent:function(){return mn},_addOrOverwriteComponent:function(){return yn},_apps:function(){return pn},_clearComponents:function(){return bn},_components:function(){return vn},_getProvider:function(){return kn},_registerComponent:function(){return gn},_removeServiceInstance:function(){return wn},deleteApp:function(){return Cn},getApp:function(){return Tn},getApps:function(){return Nn},initializeApp:function(){return En},onLog:function(){return Rn},registerVersion:function(){return Dn},setLogLevel:function(){return On}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}var c=n(184);var l=function(){var e=s((0,t.useState)(!1),2),n=(e[0],e[1]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"header1",children:[(0,c.jsxs)("div",{className:"header1__left",children:[(0,c.jsxs)("div",{className:"para",onClick:function(){return n(!0)},children:[(0,c.jsx)("p",{children:"For Individuals"}),(0,c.jsx)("p",{className:"arrow",children:"\u23f7"})]}),(0,c.jsxs)("div",{className:"para",children:[(0,c.jsx)("p",{children:"For Institutions"}),(0,c.jsx)("p",{className:"arrow",children:"\u23f7"})]})]}),(0,c.jsxs)("div",{className:"header1__right",children:[(0,c.jsx)("div",{className:"para",children:(0,c.jsx)("p",{children:"FREE TRIAL"})}),(0,c.jsx)("div",{className:"para",children:(0,c.jsx)("p",{children:"Careers"})}),(0,c.jsxs)("div",{className:"para",children:[(0,c.jsx)("p",{children:"About Us"}),(0,c.jsx)("p",{className:"arrow",children:"\u23f7"})]}),(0,c.jsxs)("div",{className:"para",children:[(0,c.jsx)("p",{children:"Support"}),(0,c.jsx)("p",{className:"arrow",children:"\u23f7"})]})]})]})})},f={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},h=t.createContext&&t.createContext(f),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function v(e){return e&&e.map((function(e,n){return t.createElement(e.tag,d({key:n},e.attr),v(e.child))}))}function m(e){return function(n){return t.createElement(y,d({attr:d({},e.attr)},n),v(e.child))}}function y(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,u=p(e,["attr","size","title"]),s=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",d({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:r,style:d(d({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==h?t.createElement(h.Consumer,null,(function(e){return n(e)})):n(f)}function g(e){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"}}]})(e)}function k(e){return m({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"}}]})(e)}function w(e){return m({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"}}]})(e)}function b(e){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(e)}function x(e){return m({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"}}]})(e)}function _(e){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function I(e){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,S(e,t)}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function N(e){return"/"===e.charAt(0)}function C(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var A=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&N(e),o=t&&N(t),u=a||o;if(e&&N(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?C(i,l):".."===f?(C(i,l),c++):c&&(C(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&N(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h},D="Invariant failed";function R(e,t){if(!e)throw new Error(D)}function O(e){return"/"===e.charAt(0)?e:"/"+e}function P(e){return"/"===e.charAt(0)?e.substr(1):e}function L(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function j(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function M(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function F(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=T({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=A(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function V(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var U=!("undefined"===typeof window||!window.document||!window.document.createElement);function B(e,t){t(window.confirm(e))}var z="popstate",q="hashchange";function K(){try{return window.history.state||{}}catch(e){return{}}}function G(e){void 0===e&&{},U||R(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?B:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?j(O(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&L(a,f),F(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var p=V();function v(e){T(N,e),N.length=t.length,p.notifyListeners(N.location,N.action)}function m(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||k(h(e.state))}function y(){k(h(K()))}var g=!1;function k(e){if(g)!1,v();else{p.confirmTransitionTo(e,"POP",s,(function(t){t?v({action:"POP",location:e}):function(e){var t=N.location,n=b.indexOf(t.key);-1===n&&0;var r=b.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,_(i))}(e)}))}}var w=h(K()),b=[w.key];function x(e){return f+M(e)}function _(e){t.go(e)}var I=0;function S(e){1===(I+=e)&&1===e?(window.addEventListener(z,m),r&&window.addEventListener(q,y)):0===I&&(window.removeEventListener(z,m),r&&window.removeEventListener(q,y))}var E=!1;var N={length:t.length,action:"POP",location:w,createHref:x,push:function(e,r){var i="PUSH",a=F(e,r,d(),N.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=x(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=b.indexOf(N.location.key),l=b.slice(0,c+1);l.push(a.key),l,v({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=F(e,r,d(),N.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=x(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=b.indexOf(N.location.key);-1!==c&&(b[c]=a.key),v({action:i,location:a})}else window.location.replace(r)}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&!1;var t=p.setPrompt(e);return E||(S(1),!0),function(){return E&&(!1,S(-1)),t()}},listen:function(e){var t=p.appendListener(e);return S(1),function(){S(-1),t()}}};return N}var H="hashchange",W={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+P(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:P,decodePath:O},slash:{encodePath:O,decodePath:O}};function Q(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function $(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Y(e){window.location.replace(Q(window.location.href)+"#"+e)}function J(e){void 0===e&&(e={}),U||R(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?B:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?j(O(e.basename)):"",s=W[o],c=s.encodePath,l=s.decodePath;function f(){var e=l($());return u&&(e=L(e,u)),F(e)}var h=V();function d(e){T(S,e),S.length=t.length,h.notifyListeners(S.location,S.action)}var p=!1,v=null;function m(){var e,t,n=$(),r=c(n);if(n!==r)Y(r);else{var a=f(),o=S.location;if(!p&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(v===M(a))return;v=null,function(e){if(p)p=!1,d();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=S.location,n=w.lastIndexOf(M(t));-1===n&&(n=0);var r=w.lastIndexOf(M(e));-1===r&&(r=0);var i=n-r;i&&(p=!0,b(i))}(e)}))}}(a)}}var y=$(),g=c(y);y!==g&&Y(g);var k=f(),w=[M(k)];function b(e){t.go(e)}var x=0;function _(e){1===(x+=e)&&1===e?window.addEventListener(H,m):0===x&&window.removeEventListener(H,m)}var I=!1;var S={length:t.length,action:"POP",location:k,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=Q(window.location.href)),n+"#"+c(u+M(e))},push:function(e,t){var n="PUSH",r=F(e,void 0,void 0,S.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=M(r),i=c(u+t);if($()!==i){v=t,function(e){window.location.hash=e}(i);var a=w.lastIndexOf(M(S.location)),o=w.slice(0,a+1);o.push(t),w=o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=F(e,void 0,void 0,S.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=M(r),i=c(u+t);$()!==i&&(v=t,Y(i));var a=w.indexOf(M(S.location));-1!==a&&(w[a]=t),d({action:n,location:r})}}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},block:function(e){void 0===e&&(e=!1);var t=h.setPrompt(e);return I||(_(1),I=!0),function(){return I&&(I=!1,_(-1)),t()}},listen:function(e){var t=h.appendListener(e);return _(1),function(){_(-1),t()}}};return S}function X(e,t,n){return Math.min(Math.max(e,t),n)}function Z(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=V();function l(e){T(m,e),m.length=m.entries.length,c.notifyListeners(m.location,m.action)}function f(){return Math.random().toString(36).substr(2,s)}var h=X(o,0,i.length-1),d=i.map((function(e){return F(e,void 0,"string"===typeof e?f():e.key||f())})),p=M;function v(e){var t=X(m.index+e,0,m.entries.length-1),r=m.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var m={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:p,push:function(e,t){var r="PUSH",i=F(e,t,f(),m.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=F(e,t,f(),m.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,l({action:r,location:i}))}))},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return m}var ee=n(7),te=n.n(ee),ne=1073741823,re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function ie(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var ae=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return re[e]=(re[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=ie(t.props.value),t}E(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):ne,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=te().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}E(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?ne:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?ne:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=te().object,i),{Provider:o,Consumer:u}},oe=ae,ue=n(239),se=n.n(ue);n(441);function ce(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var le=function(e){var t=oe();return t.displayName=e,t},fe=le("Router-History"),he=le("Router"),de=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}E(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(he.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(fe.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var pe={},ve=0;function me(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=pe[n]||(pe[n]={});if(r[e])return r[e];var i=[],a={regexp:se()(e,i,t),keys:i};return ve<1e4&&(r[e]=a,ve++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var ye=function(e){function n(){return e.apply(this,arguments)||this}return E(n,e),n.prototype.render=function(){var e=this;return t.createElement(he.Consumer,null,(function(n){n||R(!1);var r=e.props.location||n.location,i=T({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?me(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(he.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function ge(e){return"/"===e.charAt(0)?e:"/"+e}function ke(e,t){if(!e)return t;var n=ge(e);return 0!==t.pathname.indexOf(n)?t:T({},t,{pathname:t.pathname.substr(n.length)})}function we(e){return"string"===typeof e?e:M(e)}function be(e){return function(){R(!1)}}function xe(){}t.Component;var _e=function(e){function n(){return e.apply(this,arguments)||this}return E(n,e),n.prototype.render=function(){var e=this;return t.createElement(he.Consumer,null,(function(n){n||R(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?me(a.pathname,T({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var Ie=t.useContext;t.Component;var Se=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=J(t.props),t}return E(n,e),n.prototype.render=function(){return t.createElement(de,{history:this.history,children:this.props.children})},n}(t.Component);var Ee=function(e,t){return"function"===typeof e?e(t):e},Te=function(e,t){return"string"===typeof e?F(e,null,null,t):e},Ne=function(e){return e},Ce=t.forwardRef;"undefined"===typeof Ce&&(Ce=Ne);var Ae=Ce((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=ce(e,["innerRef","navigate","onClick"]),u=o.target,s=T({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=Ne!==Ce&&n||r,t.createElement("a",s)}));var De=Ce((function(e,n){var r=e.component,i=void 0===r?Ae:r,a=e.replace,o=e.to,u=e.innerRef,s=ce(e,["component","replace","to","innerRef"]);return t.createElement(he.Consumer,null,(function(e){e||R(!1);var r=e.history,c=Te(Ee(o,e.location),e.location),l=c?r.createHref(c):"",f=T({},s,{href:l,navigate:function(){var t=Ee(o,e.location),n=M(e.location)===M(Te(t));(a||n?r.replace:r.push)(t)}});return Ne!==Ce?f.ref=n||u:f.innerRef=u,t.createElement(i,f)}))})),Re=function(e){return e},Oe=t.forwardRef;"undefined"===typeof Oe&&(Oe=Re);Oe((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,f=e.location,h=e.sensitive,d=e.strict,p=e.style,v=e.to,m=e.innerRef,y=ce(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(he.Consumer,null,(function(e){e||R(!1);var r=f||e.location,a=Te(Ee(v,r),r),g=a.pathname,k=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=k?me(r.pathname,{path:k,exact:c,sensitive:h,strict:d}):null,b=!!(l?l(w,r):w),x="function"===typeof s?s(b):s,_="function"===typeof p?p(b):p;b&&(x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(x,o),_=T({},_,u));var I=T({"aria-current":b&&i||null,className:x,style:_,to:a},y);return Re!==Oe?I.ref=n||m:I.innerRef=m,t.createElement(De,I)}))}));function Pe(e){return m({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"}}]})(e)}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ve(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Ge(e,t){if(t&&("object"===Ke(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ue(e)}function He(e){var t=qe();return function(){var n,r=ze(e);if(t){var i=ze(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ge(this,n)}}function We(e,t,n){return We=qe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&S(i,n.prototype),i},We.apply(null,arguments)}function Qe(e){var t="function"===typeof Map?new Map:void 0;return Qe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return We(e,arguments,ze(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e)},Qe(e)}var $e=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($e(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Je=function(e){return function(e){var t=$e(e);return Ye.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Xe=function(e){try{return Ye.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&et(n)&&(e[n]=Ze(e[n],t[n]));return e}function et(e){return"__proto__"!==e}var tt=function(){function e(){var t=this;je(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Fe(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function nt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(a)),""].join(".")}function rt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function it(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function at(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function ot(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ut(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function st(){var e=rt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ct(){return"object"===typeof indexedDB}var lt=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Ue(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ue(a),ft.prototype.create),a}return Fe(n)}(Qe(Error)),ft=function(){function e(t,n,r){je(this,e),this.service=t,this.serviceName=n,this.errors=r}return Fe(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ht(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new lt(n,a,t);return o}}]),e}();function ht(e,t){return e.replace(dt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var dt=/\{\$([^}]+)}/g;function pt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function vt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(mt(u)&&mt(s)){if(!vt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function mt(e){return null!==e&&"object"===typeof e}function yt(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function gt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function kt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function wt(e,t){var n=new bt(e,t);return n.subscribe.bind(n)}var bt=function(){function e(t,n){var r=this;je(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Fe(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ve(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=xt),void 0===r.error&&(r.error=xt),void 0===r.complete&&(r.complete=xt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function xt(){}function _t(e){return e&&e._delegate?e._delegate:e}function It(){It=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ke(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),u(y,o,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function St(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Et(e){return function(e){if(Array.isArray(e))return a(e)}(e)||St(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Nt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Tt(a,r,i,o,u,"next",e)}function u(e){Tt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ct=function(){function e(t,n,r){je(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Fe(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),At="[DEFAULT]",Dt=function(){function e(t,n){je(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Fe(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new tt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:At})}catch(c){}var t,n=Ve(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Et(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Et(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Ve(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===At?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;return this.component?this.component.multipleInstances?e:At:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Rt,Ot,Pt=function(){function e(t){je(this,e),this.name=t,this.providers=new Map}return Fe(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Dt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Lt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ot||(Ot={}));var jt={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},Mt=Ot.INFO,Ft=(Le(Rt={},Ot.DEBUG,"log"),Le(Rt,Ot.VERBOSE,"log"),Le(Rt,Ot.INFO,"info"),Le(Rt,Ot.WARN,"warn"),Le(Rt,Ot.ERROR,"error"),Rt),Vt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ft[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ut=function(){function e(t){je(this,e),this.name=t,this._logLevel=Mt,this._logHandler=Vt,this._userLogHandler=null,Lt.push(this)}return Fe(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ot))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?jt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ot.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ot.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.INFO].concat(t)),this._logHandler.apply(this,[this,Ot.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.WARN].concat(t)),this._logHandler.apply(this,[this,Ot.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.ERROR].concat(t)),this._logHandler.apply(this,[this,Ot.ERROR].concat(t))}}]),e}();function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt,Kt;var Gt=new WeakMap,Ht=new WeakMap,Wt=new WeakMap,Qt=new WeakMap,$t=new WeakMap;var Yt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ht.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Wt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Jt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Kt||(Kt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(en(this),n),Zt(Gt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zt(e.apply(en(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[en(this),t].concat(r));return Wt.set(a,t.sort?t.sort():[t]),Zt(a)}}function Xt(e){return"function"===typeof e?Jt(e):(e instanceof IDBTransaction&&function(e){if(!Ht.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ht.set(e,t)}}(e),t=e,(qt||(qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Yt):e);var t}function Zt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Zt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Gt.set(t,e)})).catch((function(){})),$t.set(t,e),t}(e);if(Qt.has(e))return Qt.get(e);var t=Xt(e);return t!==e&&(Qt.set(e,t),$t.set(t,e)),t}var en=function(e){return $t.get(e)};var tn,nn,rn=["get","getKey","getAll","getAllKeys","count"],an=["put","add","delete","clear"],on=new Map;function un(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(on.get(t))return on.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=an.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||rn.includes(n))){var a=function(){var e=Nt(It().mark((function e(t){var a,o,u,s,c,l,f=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return on.set(t,a),a}}}Yt=function(e){return zt(zt({},e),{},{get:function(t,n,r){return un(t,n)||e.get(t,n,r)},has:function(t,n){return!!un(t,n)||e.has(t,n)}})}(Yt);var sn=function(){function e(t){je(this,e),this.container=t}return Fe(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var cn="@firebase/app",ln="0.7.30",fn=new Ut("@firebase/app"),hn="[DEFAULT]",dn=(Le(tn={},cn,"fire-core"),Le(tn,"@firebase/app-compat","fire-core-compat"),Le(tn,"@firebase/analytics","fire-analytics"),Le(tn,"@firebase/analytics-compat","fire-analytics-compat"),Le(tn,"@firebase/app-check","fire-app-check"),Le(tn,"@firebase/app-check-compat","fire-app-check-compat"),Le(tn,"@firebase/auth","fire-auth"),Le(tn,"@firebase/auth-compat","fire-auth-compat"),Le(tn,"@firebase/database","fire-rtdb"),Le(tn,"@firebase/database-compat","fire-rtdb-compat"),Le(tn,"@firebase/functions","fire-fn"),Le(tn,"@firebase/functions-compat","fire-fn-compat"),Le(tn,"@firebase/installations","fire-iid"),Le(tn,"@firebase/installations-compat","fire-iid-compat"),Le(tn,"@firebase/messaging","fire-fcm"),Le(tn,"@firebase/messaging-compat","fire-fcm-compat"),Le(tn,"@firebase/performance","fire-perf"),Le(tn,"@firebase/performance-compat","fire-perf-compat"),Le(tn,"@firebase/remote-config","fire-rc"),Le(tn,"@firebase/remote-config-compat","fire-rc-compat"),Le(tn,"@firebase/storage","fire-gcs"),Le(tn,"@firebase/storage-compat","fire-gcs-compat"),Le(tn,"@firebase/firestore","fire-fst"),Le(tn,"@firebase/firestore-compat","fire-fst-compat"),Le(tn,"fire-js","fire-js"),Le(tn,"firebase","fire-js-all"),tn),pn=new Map,vn=new Map;function mn(e,t){try{e.container.addComponent(t)}catch(n){fn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function yn(e,t){e.container.addOrOverwriteComponent(t)}function gn(e){var t=e.name;if(vn.has(t))return fn.debug("There were multiple attempts to register component ".concat(t,".")),!1;vn.set(t,e);var n,r=Ve(pn.values());try{for(r.s();!(n=r.n()).done;){mn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function kn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hn;kn(e,t).clearInstance(n)}function bn(){vn.clear()}var xn=(Le(nn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(nn,"bad-app-name","Illegal App name: '{$appName}"),Le(nn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Le(nn,"app-deleted","Firebase App named '{$appName}' already deleted"),Le(nn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Le(nn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Le(nn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Le(nn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Le(nn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Le(nn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),nn),_n=new ft("app","Firebase",xn),In=function(){function e(t,n,r){var i=this;je(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ct("app",(function(){return i}),"PUBLIC"))}return Fe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}]),e}(),Sn="9.9.2";function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:hn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw _n.create("bad-app-name",{appName:String(i)});var a=pn.get(i);if(a){if(vt(e,a.options)&&vt(r,a.config))return a;throw _n.create("duplicate-app",{appName:i})}var o,u=new Pt(i),s=Ve(vn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new In(e,r,u);return pn.set(i,l),l}function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=pn.get(e);if(!t)throw _n.create("no-app",{appName:e});return t}function Nn(){return Array.from(pn.values())}function Cn(e){return An.apply(this,arguments)}function An(){return(An=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!pn.has(n)){e.next=6;break}return pn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e,t,n){var r,i=null!==(r=dn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fn.warn(u.join(" "))}gn(new Ct("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Rn(e,t){if(null!==e&&"function"!==typeof e)throw _n.create("invalid-log-argument");!function(e,t){var n,r=Ve(Lt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=jt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ot[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function On(e){var t;t=e,Lt.forEach((function(e){e.setLogLevel(t)}))}var Pn="firebase-heartbeat-store",Ln=null;function jn(){return Ln||(Ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Zt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Zt(u.result),e.oldVersion,e.newVersion,Zt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Pn)}}).catch((function(e){throw _n.create("idb-open",{originalErrorMessage:e.message})}))),Ln}function Mn(e){return Fn.apply(this,arguments)}function Fn(){return Fn=Nt(It().mark((function e(t){var n,r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return r=e.sent,e.abrupt("return",r.transaction(Pn).objectStore(Pn).get(Bn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof lt?fn.warn(e.t0.message):(i=_n.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),fn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Fn.apply(this,arguments)}function Vn(e,t){return Un.apply(this,arguments)}function Un(){return Un=Nt(It().mark((function e(t,n){var r,i,a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return i=e.sent,a=i.transaction(Pn,"readwrite"),o=a.objectStore(Pn),e.next=8,o.put(n,Bn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof lt?fn.warn(e.t0.message):(u=_n.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),fn.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Un.apply(this,arguments)}function Bn(e){return"".concat(e.name,"!").concat(e.options.appId)}var zn=function(){function e(t){var n=this;je(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Wn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Fe(e,[{key:"triggerHeartbeat",value:function(){var e=Nt(It().mark((function e(){var t,n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=qn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=qn(),n=Kn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Je(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qn(){return(new Date).toISOString().substring(0,10)}function Kn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Ve(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Qn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Qn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Gn,Hn,Wn=function(){function e(t){je(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Fe(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ct()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Mn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Vn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Vn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Et(r.heartbeats),Et(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qn(e){return Je(JSON.stringify({version:2,heartbeats:e})).length}Gn="",gn(new Ct("platform-logger",(function(e){return new sn(e)}),"PRIVATE")),gn(new Ct("heartbeat",(function(e){return new zn(e)}),"PRIVATE")),Dn(cn,ln,Gn),Dn(cn,ln,"esm2017"),Dn("fire-js","");var $n=function(){function e(t,n){var r=this;je(this,e),this._delegate=t,this.firebase=n,mn(t,new Ct("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Fe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Cn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){mn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){yn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Yn=(Le(Hn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(Hn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Hn),Jn=new ft("app-compat","Firebase",Yn);var Xn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=En(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(pt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Dn,setLogLevel:On,onLog:Rn,apps:null,SDK_VERSION:Sn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(gn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Jn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ze(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!pt(n,e=e||hn))throw Jn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}($n);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ze(n,e)},createSubscribe:wt,ErrorFactory:ft,deepExtend:Ze}),n}(),Zn=new Ut("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Zn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var er=self.firebase.SDK_VERSION;er&&er.indexOf("LITE")>=0&&Zn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var tr=Xn;!function(e){Dn("@firebase/app-compat","0.1.31",e)}();function nr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ze(e)););return e}function rr(){return rr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=nr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},rr.apply(this,arguments)}tr.registerVersion("firebase","9.9.2","app-compat");function ir(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ar;Object.create;var or="facebook.com",ur="github.com",sr="google.com",cr="password",lr="twitter.com",fr="EMAIL_SIGNIN",hr="PASSWORD_RESET",dr="RECOVER_EMAIL",pr="REVERT_SECOND_FACTOR_ADDITION",vr="VERIFY_AND_CHANGE_EMAIL",mr="VERIFY_EMAIL";function yr(){return Le({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var gr=function(){var e;return Le(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Le(e,"argument-error",""),Le(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Le(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Le(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Le(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Le(e,"cordova-not-ready","Cordova framework is not ready."),Le(e,"cors-unsupported","This browser is not supported."),Le(e,"credential-already-in-use","This credential is already associated with a different user account."),Le(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Le(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Le(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Le(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Le(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Le(e,"email-already-in-use","The email address is already in use by another account."),Le(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Le(e,"expired-action-code","The action code has expired."),Le(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Le(e,"internal-error","An internal AuthError has occurred."),Le(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Le(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Le(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Le(e,"invalid-auth-event","An internal AuthError has occurred."),Le(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Le(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Le(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Le(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Le(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Le(e,"invalid-email","The email address is badly formatted."),Le(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Le(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Le(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Le(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Le(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Le(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Le(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Le(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Le(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Le(e,"wrong-password","The password is invalid or the user does not have a password."),Le(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Le(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Le(e,"invalid-provider-id","The specified provider ID is invalid."),Le(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Le(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Le(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Le(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Le(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Le(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Le(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Le(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Le(e,"missing-continue-uri","A continue URL must be provided in the request."),Le(e,"missing-iframe-start","An internal AuthError has occurred."),Le(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Le(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Le(e,"missing-multi-factor-info","No second factor identifier is provided."),Le(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Le(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Le(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Le(e,"app-deleted","This instance of FirebaseApp has been deleted."),Le(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Le(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Le(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Le(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Le(e,"no-auth-event","An internal AuthError has occurred."),Le(e,"no-such-provider","User was not linked to an account with the given provider."),Le(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Le(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Le(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Le(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Le(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Le(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Le(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Le(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Le(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Le(e,"rejected-credential","The request contains malformed or mismatching credentials."),Le(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Le(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Le(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Le(e,"timeout","The operation has timed out."),Le(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Le(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Le(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Le(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Le(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Le(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Le(e,"unverified-email","The operation requires a verified email."),Le(e,"user-cancelled","The user did not grant your application the permissions it requested."),Le(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Le(e,"user-disabled","The user account has been disabled by an administrator."),Le(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Le(e,"user-signed-out",""),Le(e,"weak-password","The password must be 6 characters long or more."),Le(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Le(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},kr=yr,wr=new ft("auth","Firebase",yr()),br=new Ut("@firebase/auth");function xr(e){if(br.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];br.error.apply(br,["Auth (".concat(Sn,"): ").concat(e)].concat(n))}}function _r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Tr.apply(void 0,[e].concat(n))}function Ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Tr.apply(void 0,[e].concat(n))}function Sr(e,t,n){var r=Object.assign(Object.assign({},kr()),Le({},t,n));return new ft("auth","Firebase",r).create(t,{appName:e.name})}function Er(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_r(e,"argument-error"),Sr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Et(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Et(o)))}return wr.create.apply(wr,[e].concat(n))}function Nr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Tr.apply(void 0,[t].concat(r))}}function Cr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw xr(t),new Error(t)}function Ar(e,t){e||Cr(t)}var Dr=new Map;function Rr(e){Ar(e instanceof Function,"Expected a class definition");var t=Dr.get(e);return t?(Ar(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Dr.set(e,t),t)}function Or(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var jr=function(){function e(t,n){je(this,e),this.shortDelay=t,this.longDelay=n,Ar(n>t,"Short delay should be less than long delay!"),this.isMobile=it()||ut()}return Fe(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Pr()||ot()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Mr(e,t){Ar(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Fr=function(){function e(){je(this,e)}return Fe(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Vr=(Le(ar={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Le(ar,"MISSING_CUSTOM_TOKEN","internal-error"),Le(ar,"INVALID_IDENTIFIER","invalid-email"),Le(ar,"MISSING_CONTINUE_URI","internal-error"),Le(ar,"INVALID_PASSWORD","wrong-password"),Le(ar,"MISSING_PASSWORD","internal-error"),Le(ar,"EMAIL_EXISTS","email-already-in-use"),Le(ar,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Le(ar,"INVALID_IDP_RESPONSE","invalid-credential"),Le(ar,"INVALID_PENDING_TOKEN","invalid-credential"),Le(ar,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Le(ar,"MISSING_REQ_TYPE","internal-error"),Le(ar,"EMAIL_NOT_FOUND","user-not-found"),Le(ar,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Le(ar,"EXPIRED_OOB_CODE","expired-action-code"),Le(ar,"INVALID_OOB_CODE","invalid-action-code"),Le(ar,"MISSING_OOB_CODE","internal-error"),Le(ar,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Le(ar,"INVALID_ID_TOKEN","invalid-user-token"),Le(ar,"TOKEN_EXPIRED","user-token-expired"),Le(ar,"USER_NOT_FOUND","user-token-expired"),Le(ar,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Le(ar,"INVALID_CODE","invalid-verification-code"),Le(ar,"INVALID_SESSION_INFO","invalid-verification-id"),Le(ar,"INVALID_TEMPORARY_PROOF","invalid-credential"),Le(ar,"MISSING_SESSION_INFO","missing-verification-id"),Le(ar,"SESSION_EXPIRED","code-expired"),Le(ar,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Le(ar,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Le(ar,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Le(ar,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Le(ar,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Le(ar,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Le(ar,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Le(ar,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Le(ar,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Le(ar,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Le(ar,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ar),Ur=new jr(3e4,6e4);function Br(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function zr(e,t,n,r){return qr.apply(this,arguments)}function qr(){return qr=Nt(It().mark((function e(t,n,r,i){var a,o=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Kr(t,a,Nt(It().mark((function e(){var a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=yt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Fr.fetch()(Qr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Kr(e,t,n){return Gr.apply(this,arguments)}function Gr(){return Gr=Nt(It().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Vr),n),e.prev=2,a=new $r(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Yr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Yr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Yr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Yr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Sr(t,p,d);case 34:_r(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof lt)){e.next=41;break}throw e.t0;case 41:_r(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Gr.apply(this,arguments)}function Hr(e,t,n,r){return Wr.apply(this,arguments)}function Wr(){return Wr=Nt(It().mark((function e(t,n,r,i){var a,o,u=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,zr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&_r(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}function Qr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Mr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $r=function(){function e(t){var n=this;je(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ir(n.auth,"network-request-failed"))}),Ur.get())}))}return Fe(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Yr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ir(e,t,r);return i.customData._tokenResponse=n,i}function Jr(e,t){return Xr.apply(this,arguments)}function Xr(){return Xr=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Zr(e,t){return ei.apply(this,arguments)}function ei(){return ei=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ii(){return ii=Nt(It().mark((function e(t){var n,r,i,a,o,u,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=_t(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Nr((a=oi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ri(ai(a.auth_time)),issuedAtTime:ri(ai(a.iat)),expirationTime:ri(ai(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function ai(e){return 1e3*Number(e)}function oi(e){var t,n=s(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return xr("JWT malformed, contained fewer than 3 sections"),null;try{var o=Xe(i);return o?JSON.parse(o):(xr("Failed to decode base64 JWT payload"),null)}catch(u){return xr("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function ui(e,t){return si.apply(this,arguments)}function si(){return si=Nt(It().mark((function e(t,n){var r=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof lt&&ci(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),si.apply(this,arguments)}function ci(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var li=function(){function e(t){je(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Fe(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),fi=function(){function e(t,n){je(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Fe(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function hi(e){return di.apply(this,arguments)}function di(){return di=Nt(It().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ui(t,ti(r,{idToken:i}));case 6:Nr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?mi(o.providerUserInfo):[],s=vi(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new fi(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function pi(){return(pi=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_t(t),e.next=3,hi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Et(n),Et(t))}function mi(e){return e.map((function(e){var t=e.providerId,n=ir(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function yi(e,t){return gi.apply(this,arguments)}function gi(){return gi=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(t,{},Nt(It().mark((function e(){var r,i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Qr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Fr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}var ki=function(){function e(){je(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Fe(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Nr(e.idToken,"internal-error"),Nr("undefined"!==typeof e.idToken,"internal-error"),Nr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=oi(e);return Nr(t,"internal-error"),Nr("undefined"!==typeof t.exp,"internal-error"),Nr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Nt(It().mark((function e(t){var n,r=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Nr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Cr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Nr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Nr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Nr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function wi(e,t){Nr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var bi=function(){function e(t){je(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ir(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Et(a.providerData):[],this.metadata=new fi(a.createdAt||void 0,a.lastLoginAt||void 0)}return Fe(e,[{key:"getIdToken",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ui(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Nr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ii.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return pi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Nt(It().mark((function e(t){var n,r,i=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,hi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ui(this,Jr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Nr(k&&_,t,"internal-error");var I=ki.fromJSON(this.name,_);Nr("string"===typeof k,t,"internal-error"),wi(f,t.name),wi(h,t.name),Nr("boolean"===typeof w,t,"internal-error"),Nr("boolean"===typeof b,t,"internal-error"),wi(d,t.name),wi(p,t.name),wi(v,t.name),wi(m,t.name),wi(y,t.name),wi(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=Nt(It().mark((function t(n,r){var i,a,o,u=arguments;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ki).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,hi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),xi=function(){function e(){je(this,e),this.type="NONE",this.storage={}}return Fe(e,[{key:"_isAvailable",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();xi.type="NONE";var _i=xi;function Ii(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Si=function(){function e(t,n,r){je(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ii(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ii("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Fe(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?bi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Nt(It().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Rr(_i),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Rr(_i),u=Ii(i,n.config.apiKey,n.name),s=null,c=Ve(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=bi._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ei(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ai(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ti(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ri(t))return"Blackberry";if(Oi(t))return"Webos";if(Ni(t))return"Safari";if((t.includes("chrome/")||Ci(t))&&!t.includes("edge/"))return"Chrome";if(Di(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/firefox\//i.test(e)}function Ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/crios\//i.test(e)}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/iemobile/i.test(e)}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/android/i.test(e)}function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/blackberry/i.test(e)}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/webos/i.test(e)}function Pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Li(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return Pi(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ji(){return st()&&10===document.documentMode}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return Pi(e)||Di(e)||Oi(e)||Ri(e)||/windows phone/i.test(e)||Ai(e)}function Fi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ei(rt());break;case"Worker":t="".concat(Ei(rt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Sn,"/").concat(r)}var Vi=function(){function e(t){je(this,e),this.auth=t,this.queue=[]}return Fe(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Nt(It().mark((function e(t){var n,r,i,a,o,u,s,c;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Ve(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Ve(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ui=function(){function e(t,n,r){je(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zi(this),this.idTokenSubscription=new zi(this),this.beforeStateQueue=new Vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Fe(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(Nt(It().mark((function r(){var i,a;return It().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Si.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Nt(It().mark((function e(t){var n,r,i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Nr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?_t(t):null)&&Nr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Nt(It().mark((function e(t){var n,r=this,i=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Nr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Nt(It().mark((function n(){return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Rr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ft("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Nr(n=t&&Rr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Si.create(this,[Rr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Nt(It().mark((function e(t){var n=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Nr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Nt(It().mark((function e(){var t,n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bi(e){return _t(e)}var zi=function(){function e(t){var n=this;je(this,e),this.auth=t,this.observer=null,this.addObserver=wt((function(e){return n.observer=e}))}return Fe(e,[{key:"next",get:function(){return Nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function qi(e,t,n){var r=Bi(e);Nr(r._canInitEmulator,r,"emulator-config-failed"),Nr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ki(t),o=function(e){var t=Ki(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Gi(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Gi(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ki(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Hi=function(){function e(t,n){je(this,e),this.providerId=t,this.signInMethod=n}return Fe(e,[{key:"toJSON",value:function(){return Cr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Cr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Cr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Cr("not implemented")}}]),e}();function Wi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:resetPassword",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function $i(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Ji(e,t){return Xi.apply(this,arguments)}function Xi(){return Xi=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:update",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithPassword",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:sendOobCode",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(t,n));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(t,n));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ua(e,t){return sa.apply(this,arguments)}function sa(){return sa=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(t,n));case 1:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(t,n));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return pa=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}var va=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return je(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Fe(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Zi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",fa(t,{email:this._email,oobCode:this._password}));case 5:_r(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$i(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",da(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:_r(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Hi);function ma(e,t){return ya.apply(this,arguments)}function ya(){return ya=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithIdp",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}var ga=function(e){Be(n,e);var t=He(n);function n(){var e;return je(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Fe(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ma(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ma(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ma(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_r("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ir(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Hi);function ka(e,t){return wa.apply(this,arguments)}function wa(){return wa=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:sendVerificationCode",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function ba(){return ba=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function xa(){return xa=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Yr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}var _a=Le({},"USER_NOT_FOUND","user-not-found");function Ia(){return Ia=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,r),_a));case 2:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}var Sa=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Fe(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ba.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return xa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ia.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Hi);var Ea=function(){function e(t){var n,r,i,a,o,u;je(this,e);var s=gt(kt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Nr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Fe(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=gt(kt(e)).link,n=t?gt(kt(t)).deep_link_id:null,r=gt(kt(e)).deep_link_id;return(r?gt(kt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Ta=function(){function e(){je(this,e),this.providerId=e.PROVIDER_ID}return Fe(e,null,[{key:"credential",value:function(e,t){return va._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ea.parseLink(t);return Nr(n,"argument-error"),va._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ta.PROVIDER_ID="password",Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Na=function(){function e(t){je(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Fe(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ca=function(e){Be(n,e);var t=He(n);function n(){var e;return je(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Fe(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Et(this.scopes)}}]),n}(Na),Aa=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Nr(e.idToken||e.accessToken,"argument-error"),ga._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Nr("providerId"in t&&"signInMethod"in t,"argument-error"),ga._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ca),Da=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.call(this,"facebook.com")}return Fe(n,null,[{key:"credential",value:function(e){return ga._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ca);Da.FACEBOOK_SIGN_IN_METHOD="facebook.com",Da.PROVIDER_ID="facebook.com";var Ra=function(e){Be(n,e);var t=He(n);function n(){var e;return je(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Fe(n,null,[{key:"credential",value:function(e,t){return ga._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ca);Ra.GOOGLE_SIGN_IN_METHOD="google.com",Ra.PROVIDER_ID="google.com";var Oa=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.call(this,"github.com")}return Fe(n,null,[{key:"credential",value:function(e){return ga._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ca);Oa.GITHUB_SIGN_IN_METHOD="github.com",Oa.PROVIDER_ID="github.com";var Pa=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Fe(n,[{key:"_getIdTokenResponse",value:function(e){return ma(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ma(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ma(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hi),La=function(e){Be(n,e);var t=He(n);function n(e){return je(this,n),Nr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Fe(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Pa.fromJSON(e);return Nr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Pa._create(r,n)}catch(i){return null}}}]),n}(Na),ja=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.call(this,"twitter.com")}return Fe(n,null,[{key:"credential",value:function(e,t){return ga._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ca);function Ma(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signUp",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}ja.TWITTER_SIGN_IN_METHOD="twitter.com",ja.PROVIDER_ID="twitter.com";var Va=function(){function e(t){je(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Fe(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Nt(It().mark((function t(n,r,i){var a,o,u,s,c=arguments;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,bi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ua(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Nt(It().mark((function t(n,r,i){var a;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ua(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ua(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ba(){return Ba=Nt(It().mark((function e(t){var n,r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Va({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ma(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Va._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}var za=function(e){Be(n,e);var t=He(n);function n(e,r,i,a){var o,u;return je(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Ue(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Fe(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(lt);function qa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw za._fromErrorAndOperation(e,n,t,r);throw n}))}function Ka(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ga(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_t(t),e.next=3,$a(!0,r,n);case 3:return e.t0=Zr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ka(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Wa(e,t){return Qa.apply(this,arguments)}function Qa(){return Qa=Nt(It().mark((function e(t,n){var r,i,a=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ui,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Va._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function $a(e,t,n){return Ya.apply(this,arguments)}function Ya(){return(Ya=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hi(n);case 2:i=Ka(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Nr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(e,t){return Xa.apply(this,arguments)}function Xa(){return Xa=Nt(It().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,ui(t,qa(a,o,n,t),r);case 6:return Nr((u=e.sent).idToken,a,"internal-error"),Nr(s=oi(u.idToken),a,"internal-error"),c=s.sub,Nr(t.uid===c,a,"user-mismatch"),e.abrupt("return",Va._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&_r(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Xa.apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return eo=Nt(It().mark((function e(t,n){var r,i,a,o,u=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,qa(t,i,n);case 4:return a=e.sent,e.next=7,Va._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t){return no.apply(this,arguments)}function no(){return no=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(Bi(t),n));case 1:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(e,t){return io.apply(this,arguments)}function io(){return(io=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_t(t),e.next=3,$a(!1,r,n.providerId);case 3:return e.abrupt("return",Wa(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return(oo=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ja(_t(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(e,t){return so.apply(this,arguments)}function so(){return so=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t,"POST","/v1/accounts:signInWithCustomToken",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}function co(){return co=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bi(t),e.next=3,uo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Va._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}var lo=function(){function e(t,n){je(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Fe(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?fo._fromServerResponse(e,t):_r(e,"internal-error")}}]),e}(),fo=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Fe(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(lo);function ho(e,t,n){var r;Nr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Nr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Nr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Nr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function po(){return po=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_t(t),a={requestType:"PASSWORD_RESET",email:n},r&&ho(i,a,r),e.next=5,aa(i,a);case 5:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(){return vo=Nt(It().mark((function e(t,n,r){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wi(_t(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(){return mo=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ji(_t(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function yo(e,t){return go.apply(this,arguments)}function go(){return go=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_t(t),e.next=3,Wi(r,{oobCode:n});case 3:i=e.sent,Nr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Nr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Nr(i.mfaInfo,r,"internal-error");case 13:Nr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=lo._fromServerResponse(Bi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function ko(){return ko=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo(_t(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function wo(e,t,n){return bo.apply(this,arguments)}function bo(){return bo=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bi(t),e.next=3,Ma(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Va._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function xo(){return xo=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_t(t),a={requestType:"EMAIL_SIGNIN",email:n},Nr(r.handleCodeInApp,i,"argument-error"),r&&ho(i,a,r),e.next=6,ua(i,a);case 6:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}function _o(){return _o=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_t(t),Nr((a=Ta.credentialWithLink(n,r||Or()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",to(i,a));case 4:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function Io(e,t){return So.apply(this,arguments)}function So(){return So=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:createAuthUri",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function Eo(){return Eo=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pr()?Or():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Io(_t(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function To(){return(To=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_t(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ho(r.auth,a,n),e.next=8,ra(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function No(){return(No=Nt(It().mark((function e(t,n,r){var i,a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_t(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ho(i.auth,o,r),e.next=8,ca(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function Do(){return(Do=Nt(It().mark((function e(t,n){var r,i,a,o,u,s,c;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=_t(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ui(a,Co(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t,n){return Oo.apply(this,arguments)}function Oo(){return Oo=Nt(It().mark((function e(t,n,r){var i,a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ui(t,$i(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}var Po=Fe((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};je(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Lo=function(e){Be(n,e);var t=He(n);function n(e,r,i,a){var o;return je(this,n),(o=t.call(this,e,r,i)).username=a,o}return Fe(n)}(Po),jo=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"facebook.com",r)}return Fe(n)}(Po),Mo=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Fe(n)}(Lo),Fo=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"google.com",r)}return Fe(n)}(Po),Vo=function(e){Be(n,e);var t=He(n);function n(e,r,i){return je(this,n),t.call(this,e,"twitter.com",r,i)}return Fe(n)}(Lo);function Uo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=oi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Po(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new jo(a,i);case"github.com":return new Mo(a,i);case"google.com":return new Fo(a,i);case"twitter.com":return new Vo(a,i,e.screenName||null);case"custom":case"anonymous":return new Po(a,null);default:return new Po(a,r,i)}}(n)}var Bo=function(){function e(t,n){je(this,e),this.type=t,this.credential=n}return Fe(e,[{key:"toJSON",value:function(){return{multiFactorSession:Le({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),zo=function(){function e(t,n,r){je(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Fe(e,[{key:"resolveSignIn",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Bi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return lo._fromServerResponse(r,e)}));Nr(i.mfaPendingCredential,r,"internal-error");var o=Bo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Nt(It().mark((function e(t){var a,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Va._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Nr(n.user,r,"internal-error"),e.abrupt("return",Va._forOperation(n.user,n.operationType,u));case 17:_r(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function qo(e,t){return zr(e,"POST","/v2/accounts/mfaEnrollment:start",Br(e,t))}function Ko(e,t){return zr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Br(e,t))}var Go=function(){function e(t){var n=this;je(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return lo._fromServerResponse(t.auth,e)})))}))}return Fe(e,[{key:"getSession",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Bo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ui(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Nt(It().mark((function e(t){var n,r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,ui(this.user,Ko(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ho=new WeakMap;var Wo="__sak",Qo=function(){function e(t,n){je(this,e),this.storageRetriever=t,this.type=n}return Fe(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Wo,"1"),this.storage.removeItem(Wo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var $o=function(e){Be(n,e);var t=He(n);function n(){var e;return je(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=rt();return Ni(e)||Pi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Mi(),e._shouldAllowMigration=!0,e}return Fe(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ji()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Nt(It().mark((function e(t,r){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(ze(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Nt(It().mark((function e(t){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(ze(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(ze(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Qo);$o.type="LOCAL";var Yo=$o,Jo=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Fe(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Qo);Jo.type="SESSION";var Xo=Jo;function Zo(e){return Promise.all(e.map(function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var eu=function(){function e(t){je(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Fe(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Nt(It().mark((function e(t){var n,r,i,a,o,u,s,c;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Zo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function tu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}eu.receivers=[];var nu=function(){function e(t){je(this,e),this.target=t,this.handlers=new Set}return Fe(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Nt(It().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=tu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ru(){return window}function iu(){return"undefined"!==typeof ru().WorkerGlobalScope&&"function"===typeof ru().importScripts}function au(){return ou.apply(this,arguments)}function ou(){return(ou=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function uu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var su="firebaseLocalStorageDb",cu="firebaseLocalStorage",lu="fbase_key",fu=function(){function e(t){je(this,e),this.request=t}return Fe(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function hu(e,t){return e.transaction([cu],t?"readwrite":"readonly").objectStore(cu)}function du(){var e=indexedDB.deleteDatabase(su);return new fu(e).toPromise()}function pu(){var e=indexedDB.open(su,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(cu,{keyPath:lu})}catch(r){n(r)}})),e.addEventListener("success",Nt(It().mark((function n(){var r;return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(cu)){n.next=12;break}return r.close(),n.next=5,du();case 5:return n.t0=t,n.next=8,pu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function vu(e,t,n){return mu.apply(this,arguments)}function mu(){return mu=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=hu(t,!0).put((Le(i={},lu,n),Le(i,"value",r),i)),e.abrupt("return",new fu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}function yu(e,t){return gu.apply(this,arguments)}function gu(){return gu=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hu(t,!1).get(n),e.next=3,new fu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}function ku(e,t){var n=hu(e,!0).delete(t);return new fu(n).toPromise()}var wu=function(){function e(){je(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Fe(e,[{key:"_openDb",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,pu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iu()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Nt(It().mark((function e(){var t=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=eu._getInstance(iu()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Nt(It().mark((function e(n,r){var i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Nt(It().mark((function e(){var t,n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,au();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new nu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&uu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,pu();case 5:return t=e.sent,e.next=8,vu(t,Wo,"1");case 8:return e.next=10,ku(t,Wo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Nt(It().mark((function e(t,n){var r=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return vu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return yu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Nt(It().mark((function e(t){var n=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ku(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=hu(e,!1).getAll();return new fu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ve(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();wu.type="LOCAL";var bu=wu;function xu(e,t){return zr(e,"POST","/v2/accounts/mfaSignIn:start",Br(e,t))}function _u(e){return Iu.apply(this,arguments)}function Iu(){return Iu=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}function Su(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ir("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Eu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Tu=1e12,Nu=function(){function e(t){je(this,e),this.auth=t,this.counter=Tu,this._widgets=new Map}return Fe(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Cu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Tu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Tu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Tu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Cu=function(){function e(t,n,r){var i=this;je(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Nr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Fe(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Au=Eu("rcb"),Du=new jr(3e4,6e4),Ru="https://www.google.com/recaptcha/api.js?",Ou=function(){function e(){var t;je(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=ru().grecaptcha)||void 0===t?void 0:t.render)}return Fe(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Nr(Pu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ru().grecaptcha):new Promise((function(r,i){var a=ru().setTimeout((function(){i(Ir(e,"network-request-failed"))}),Du.get());ru()[Au]=function(){ru().clearTimeout(a),delete ru()[Au];var o=ru().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ir(e,"internal-error"))},Su("".concat(Ru,"?").concat(yt({onload:Au,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ir(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=ru().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Pu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Lu=function(){function e(){je(this,e)}return Fe(e,[{key:"load",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Nu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ju="recaptcha",Mu={theme:"light",type:"image"},Fu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Mu),r=arguments.length>2?arguments[2]:void 0;je(this,e),this.parameters=n,this.type=ju,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bi(r),this.isInvisible="invisible"===this.parameters.size,Nr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Nr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Lu:new Ou,this.validateStartingState()}return Fe(e,[{key:"verify",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Nr(!this.parameters.sitekey,this.auth,"argument-error"),Nr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ru()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Nr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Nt(It().mark((function e(){var t,n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr(Pr()&&!iu(),this.auth,"internal-error"),e.next=3,Vu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,_u(this.auth);case 8:Nr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Nr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Vu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Uu=function(){function e(t,n){je(this,e),this.verificationId=t,this.onConfirmation=n}return Fe(e,[{key:"confirm",value:function(e){var t=Sa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Bu(){return Bu=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bi(t),e.next=3,Gu(i,n,_t(r));case 3:return a=e.sent,e.abrupt("return",new Uu(a,(function(e){return to(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function zu(e,t,n){return qu.apply(this,arguments)}function qu(){return(qu=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_t(t),e.next=3,$a(!1,i,"phone");case 3:return e.next=5,Gu(i.auth,n,_t(r));case 5:return a=e.sent,e.abrupt("return",new Uu(a,(function(e){return ro(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(){return(Ku=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_t(t),e.next=3,Gu(i.auth,n,_t(r));case 3:return a=e.sent,e.abrupt("return",new Uu(a,(function(e){return ao(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gu(e,t,n){return Hu.apply(this,arguments)}function Hu(){return Hu=Nt(It().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Nr("string"===typeof a,t,"argument-error"),Nr(r.type===ju,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Nr("enroll"===u.type,t,"internal-error"),e.next=13,qo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Nr("signin"===u.type,t,"internal-error"),Nr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,xu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ka(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Hu.apply(this,arguments)}function Wu(){return(Wu=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa(_t(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qu=function(){function e(t){je(this,e),this.providerId=e.PROVIDER_ID,this.auth=Bi(t)}return Fe(e,[{key:"verifyPhoneNumber",value:function(e,t){return Gu(this.auth,e,_t(t))}}],[{key:"credential",value:function(e,t){return Sa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Sa._fromTokenResponse(n,r):null}}]),e}();function $u(e,t){return t?Rr(t):(Nr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qu.PROVIDER_ID="phone",Qu.PHONE_SIGN_IN_METHOD="phone";var Yu=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Fe(n,[{key:"_getIdTokenResponse",value:function(e){return ma(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ma(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ma(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Hi);function Ju(e){return Za(e.auth,new Yu(e),e.bypassAuthState)}function Xu(e){var t=e.auth,n=e.user;return Nr(n,t,"internal-error"),Ja(n,new Yu(e),e.bypassAuthState)}function Zu(e){return es.apply(this,arguments)}function es(){return es=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Nr(r=t.user,n,"internal-error"),e.abrupt("return",Wa(r,new Yu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}var ts=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];je(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Fe(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Nt(It().mark((function t(n,r){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Nt(It().mark((function e(t){var n,r,i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ju;case"linkViaPopup":case"linkViaRedirect":return Zu;case"reauthViaPopup":case"reauthViaRedirect":return Xu;default:_r(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ns=new jr(2e3,1e4);function rs(e,t,n){return is.apply(this,arguments)}function is(){return is=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bi(t),Er(t,n,Na),a=$u(i,r),o=new ss(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(){return(as=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er((i=_t(t)).auth,n,Na),a=$u(i.auth,r),o=new ss(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(e,t,n){return us.apply(this,arguments)}function us(){return(us=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er((i=_t(t)).auth,n,Na),a=$u(i.auth,r),o=new ss(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ss=function(e){Be(n,e);var t=He(n);function n(e,r,i,a,o){var u;return je(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Ue(u),u}return Fe(n,[{key:"executeNotNull",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Nr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Nt(It().mark((function e(){var t,n=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ar(1===this.filter.length,"Popup operations only handle one event"),t=tu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ir(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ir(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ir(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ns.get())}()}}]),n}(ts);ss.currentPopupAction=null;var cs=new Map,ls=function(e){Be(n,e);var t=He(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return je(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Fe(n,[{key:"execute",value:function(){var e=Nt(It().mark((function e(){var t,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=cs.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,fs(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,rr(ze(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:cs.set(this.auth._key(),t);case 21:return this.bypassAuthState||cs.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Nt(It().mark((function e(t){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",rr(ze(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",rr(ze(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ts);function fs(e,t){return hs.apply(this,arguments)}function hs(){return hs=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ys(n),i=ms(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ds(e,t){return ps.apply(this,arguments)}function ps(){return ps=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ms(t)._set(ys(n),"true"));case 1:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}function vs(e,t){cs.set(e._key(),t)}function ms(e){return Rr(e._redirectPersistence)}function ys(e){return Ii("pendingRedirect",e.config.apiKey,e.name)}function gs(e,t,n){return function(e,t,n){return ks.apply(this,arguments)}(e,t,n)}function ks(){return ks=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bi(t),Er(t,n,Na),a=$u(i,r),e.next=5,ds(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}function ws(e,t,n){return function(e,t,n){return bs.apply(this,arguments)}(e,t,n)}function bs(){return(bs=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er((i=_t(t)).auth,n,Na),a=$u(i.auth,r),e.next=5,ds(a,i.auth);case 5:return e.next=7,Ns(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(e,t,n){return function(e,t,n){return _s.apply(this,arguments)}(e,t,n)}function _s(){return(_s=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er((i=_t(t)).auth,n,Na),a=$u(i.auth,r),e.next=5,$a(!1,i,n.providerId);case 5:return e.next=7,ds(a,i.auth);case 7:return e.next=9,Ns(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(e,t){return Ss.apply(this,arguments)}function Ss(){return Ss=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bi(t)._initializationPromise;case 2:return e.abrupt("return",Es(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function Es(e,t){return Ts.apply(this,arguments)}function Ts(){return Ts=Nt(It().mark((function e(t,n){var r,i,a,o,u,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Bi(t),a=$u(i,n),o=new ls(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}function Ns(e){return Cs.apply(this,arguments)}function Cs(){return(Cs=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var As=function(){function e(t){je(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Fe(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Rs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ir(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ds(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ds(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ds(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Rs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Os(e){return Ps.apply(this,arguments)}function Ps(){return Ps=Nt(It().mark((function e(t){var n,r=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",zr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}var Ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,js=/^https?/;function Ms(){return Ms=Nt(It().mark((function e(t){var n,r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Os(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ve(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Fs(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:_r(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Ms.apply(this,arguments)}function Fs(e){var t=Or(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!js.test(r))return!1;if(Ls.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Vs=new jr(3e4,6e4);function Us(){var e=ru().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Et(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Bs=null;function zs(e){return Bs=Bs||function(e){return new Promise((function(t,n){var r,i,a;function o(){Us(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Us(),n(Ir(e,"network-request-failed"))},timeout:Vs.get()})}if(null===(i=null===(r=ru().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ru().gapi)||void 0===a?void 0:a.load)){var u=Eu("iframefcb");return ru()[u]=function(){gapi.load?o():n(Ir(e,"network-request-failed"))},Su("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Bs=null,e}))}(e),Bs}var qs=new jr(5e3,15e3),Ks={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hs(e){var t=e.config;Nr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Mr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Sn},i=Gs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(yt(r).slice(1))}function Ws(e){return Qs.apply(this,arguments)}function Qs(){return Qs=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zs(t);case 2:return n=e.sent,Nr(r=ru().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Hs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ks,dontclear:!0},(function(e){return new Promise(function(){var n=Nt(It().mark((function n(r,i){var a,o,u;return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ru().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ir(t,"network-request-failed"),o=ru().setTimeout((function(){i(a)}),qs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}var $s={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ys="_blank",Js="http://localhost",Xs=function(){function e(t){je(this,e),this.window=t,this.associatedEvent=null}return Fe(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Zs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},$s),{width:r.toString(),height:i.toString(),top:a,left:o}),l=rt().toLowerCase();n&&(u=Ci(l)?Ys:n),Ti(l)&&(t=t||Js,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Li(l)&&"_self"!==u)return ec(t||"",u),new Xs(null);var h=window.open(t||"",u,f);Nr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Xs(h)}function ec(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var tc="__/auth/handler",nc="emulator/auth/handler";function rc(e,t,n,r,i,a){Nr(e.config.authDomain,e,"auth-domain-config-required"),Nr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Sn,eventId:i};if(t instanceof Na){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Ca){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(tc);return Mr(t,nc)}(e),"?").concat(yt(p).slice(1))}var ic="webStorageSupport",ac=function(){function e(){je(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xo,this._completeRedirectFn=Es,this._overrideRedirectResult=vs}return Fe(e,[{key:"_openPopup",value:function(){var e=Nt(It().mark((function e(t,n,r,i){var a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ar(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=rc(t,n,r,Or(),i),e.abrupt("return",Zs(t,o,tu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Nt(It().mark((function e(t,n,r,i){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=rc(t,n,r,Or(),i),ru().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ar(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ws(t);case 2:return n=e.sent,r=new As(t),n.register("authEvent",(function(e){return Nr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ic,{type:ic},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),_r(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ms.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Mi()||Ni()||Pi()}}]),e}(),oc=ac,uc=function(){function e(t){je(this,e),this.factorId=t}return Fe(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Cr("unexpected MultiFactorSessionType")}}}]),e}(),sc=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this,"phone")).credential=e,r}return Fe(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return zr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Br(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return zr(e,"POST","/v2/accounts/mfaSignIn:finalize",Br(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(uc),cc=function(){function e(){je(this,e)}return Fe(e,null,[{key:"assertion",value:function(e){return sc._fromCredential(e)}}]),e}();cc.FACTOR_ID="phone";var lc,fc="@firebase/auth",hc="0.20.5",dc=function(){function e(t){je(this,e),this.auth=t,this.internalListeners=new Map}return Fe(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function pc(){return window}lc="Browser",gn(new Ct("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Nr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Nr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:lc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fi(lc)},i=new Ui(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),gn(new Ct("auth-internal",(function(e){return function(e){return new dc(e)}(Bi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(fc,hc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(lc)),Dn(fc,hc,"esm2017");function vc(e,t,n){return mc.apply(this,arguments)}function mc(){return mc=Nt(It().mark((function e(t,n,r){var i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pc(),o=a.BuildInfo,Ar(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,xc(n.sessionId);case 4:return u=e.sent,s={},Pi()?s.ibi=o.packageName:Di()?s.apn=o.packageName:_r(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",rc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function yc(){return yc=Nt(It().mark((function e(t){var n,r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pc(),r=n.BuildInfo,i={},Pi()?i.iosBundleId=r.packageName:Di()?i.androidPackageName=r.packageName:_r(t,"operation-not-supported-in-this-environment"),e.next=5,Os(t,i);case 5:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function gc(e){var t=pc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function kc(e,t,n){return wc.apply(this,arguments)}function wc(){return wc=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Ir(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Di()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),wc.apply(this,arguments)}function bc(e){var t,n,r,i,a,o,u,s,c,l,f=pc();Nr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Nr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Nr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Nr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function xc(e){return _c.apply(this,arguments)}function _c(){return(_c=Nt(It().mark((function e(t){var n,r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ic(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ic(e){if(Ar(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Sc=function(e){Be(n,e);var t=He(n);function n(){var e;return je(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Fe(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),rr(ze(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(As);function Ec(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Dc(),postBody:null,tenantId:e.tenantId,error:Ir(e,"no-auth-event")}}function Tc(e,t){return Rc()._set(Oc(e),t)}function Nc(e){return Cc.apply(this,arguments)}function Cc(){return Cc=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rc()._get(Oc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Rc()._remove(Oc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Cc.apply(this,arguments)}function Ac(e,t){var n,r,i=function(e){var t=Pc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Pc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Pc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Pc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ir(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Dc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Rc(){return Rr(Yo)}function Oc(e){return Ii("authEvent",e.config.apiKey,e.name)}function Pc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||St(t)||o(t)||u();r[0];return gt(r.slice(1).join("?"))}var Lc=function(){function e(){je(this,e),this._redirectPersistence=Xo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Es,this._overrideRedirectResult=vs}return Fe(e,[{key:"_initialize",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Sc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){_r(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Nt(It().mark((function e(t,n,r,i){var a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),cs.clear(),e.next=10,this._originValidation(t);case 10:return o=Ec(t,r,i),e.next=13,Tc(t,o);case 13:return e.next=15,vc(t,o,n);case 15:return u=e.sent,e.next=18,gc(u);case 18:return s=e.sent,e.abrupt("return",kc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=pc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Nt(It().mark((function n(){return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nc(e);case 2:t.onEvent(Mc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Nt(It().mark((function n(r){var i,a;return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Nc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Ac(i,r.url)),t.onEvent(a||Mc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");pc().handleOpenURL=function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),jc=Lc;function Mc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ir("no-auth-event")}}function Fc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Vc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return!("file:"!==Fc()&&"ionic:"!==Fc()&&"capacitor:"!==Fc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uc(){return st()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Bc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/Edge\/\d+/.test(e)}function zc(){try{var e=self.localStorage,t=tu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return Uc()||Bc(e)}()||ct()}catch(n){return qc()&&ct()}return!1}function qc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Kc(){return("http:"===Fc()||"https:"===Fc()||ot()||Vc())&&!(ut()||at())&&zc()&&!qc()}function Gc(){return Vc()&&"undefined"!==typeof document}function Hc(){return Wc.apply(this,arguments)}function Wc(){return(Wc=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qc={LOCAL:"local",NONE:"none",SESSION:"session"},$c=Nr,Yc="persistence";function Jc(e,t){$c(Object.values(Qc).includes(t),e,"invalid-persistence-type"),ut()?$c(t!==Qc.SESSION,e,"unsupported-persistence-type"):at()?$c(t===Qc.NONE,e,"unsupported-persistence-type"):qc()?$c(t===Qc.NONE||t===Qc.LOCAL&&ct(),e,"unsupported-persistence-type"):$c(t===Qc.NONE||zc(),e,"unsupported-persistence-type")}function Xc(e){return Zc.apply(this,arguments)}function Zc(){return Zc=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=el(),r=Ii(Yc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Zc.apply(this,arguments)}function el(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var tl=Nr,nl=function(){function e(){je(this,e),this.browserResolver=Rr(oc),this.cordovaResolver=Rr(jc),this.underlyingResolver=null,this._redirectPersistence=Xo,this._completeRedirectFn=Es,this._overrideRedirectResult=vs}return Fe(e,[{key:"_initialize",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Nt(It().mark((function e(t,n,r,i){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Nt(It().mark((function e(t,n,r,i){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Gc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return tl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Hc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function rl(e){return e.unwrap()}function il(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new cl(e,function(e,t){var n,r=_t(e),i=t;return Nr(t.customData.operationType,r,"argument-error"),Nr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),zo._fromError(r,i)}(e,t));else if(i){var a=al(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function al(e){var t=(e instanceof lt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof lt)&&"temporaryProof"in t&&"phoneNumber"in t)return Qu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===cr)return null;switch(r){case sr:n=Ra;break;case or:n=Da;break;case ur:n=Oa;break;case lr:n=ja;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Pa._create(r,u):ga._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Aa(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof lt?n.credentialFromError(e):n.credentialFromResult(e)}function ol(e,t){return t.catch((function(t){throw t instanceof lt&&il(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,al(t)),additionalUserInfo:Uo(e),user:ll.getOrCreate(r)}}))}function ul(e,t){return sl.apply(this,arguments)}function sl(){return sl=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return ol(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}var cl=function(){function e(t,n){je(this,e),this.resolver=n,this.auth=t.wrapped()}return Fe(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return ol(rl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ll=function(){function e(t){je(this,e),this._delegate=t,this.multiFactor=function(e){var t=_t(e);return Ho.has(t)||Ho.set(t,Go._fromUser(t)),Ho.get(t)}(t)}return Fe(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(this.auth,ro(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ul(this.auth,zu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(this.auth,os(this._delegate,t,nl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(Bi(this.auth));case 2:return e.abrupt("return",xs(this._delegate,t,nl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(this.auth,ao(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ul(this.auth,function(e,t,n){return Ku.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return ol(this.auth,function(e,t,n){return as.apply(this,arguments)}(this._delegate,e,nl))}},{key:"reauthenticateWithRedirect",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(Bi(this.auth));case 2:return e.abrupt("return",ws(this._delegate,t,nl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return To.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ro(_t(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ro(_t(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Wu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Do.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return No.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ll.USER_MAP=new WeakMap;var fl=Nr,hl=function(){function e(t,n){if(je(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;fl(r,"invalid-api-key",{appName:t.name}),fl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?nl:void 0;this._delegate=n.initialize({options:{persistence:pl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(gr),this.linkUnderlyingAuth()}return Fe(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ll.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){qi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return mo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return yo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return vo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(this._delegate,wo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Eo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ea.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fl(Kc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Is(this._delegate,nl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",ol(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Bi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=dl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=dl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return xo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jc(this._delegate,t),e.t0=t,e.next=e.t0===Qc.SESSION?4:e.t0===Qc.LOCAL?6:e.t0===Qc.NONE?11:13;break;case 4:return n=Xo,e.abrupt("break",14);case 6:return e.next=8,Rr(bu)._isAvailable();case 8:return r=e.sent,n=r?bu:Yo,e.abrupt("break",14);case 11:return n=_i,e.abrupt("break",14);case 13:return e.abrupt("return",_r("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return ol(this._delegate,function(e){return Ba.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return ol(this._delegate,to(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return ol(this._delegate,function(e,t){return co.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return ol(this._delegate,function(e,t,n){return to(_t(e),Ta.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return ol(this._delegate,function(e,t,n){return _o.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ul(this._delegate,function(e,t,n){return Bu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fl(Kc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",ol(this._delegate,rs(this._delegate,t,nl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fl(Kc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Xc(this._delegate);case 3:return e.abrupt("return",gs(this._delegate,t,nl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ko.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function dl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ll.getOrCreate(e))},error:t,complete:n}}function pl(e,t){var n=function(e,t){var n=el();if(!n)return[];var r=Ii(Yc,e,t);switch(n.getItem(r)){case Qc.NONE:return[_i];case Qc.LOCAL:return[bu,Xo];case Qc.SESSION:return[Xo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(bu)||n.push(bu),"undefined"!==typeof window)for(var r=0,i=[Yo,Xo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(_i)||n.push(_i),n}hl.Persistence=Qc;var vl=function(){function e(){je(this,e),this.providerId="phone",this._delegate=new Qu(rl(tr.auth()))}return Fe(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Qu.credential(e,t)}}]),e}();vl.PHONE_SIGN_IN_METHOD=Qu.PHONE_SIGN_IN_METHOD,vl.PROVIDER_ID=Qu.PROVIDER_ID;var ml,yl=Nr,gl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tr.app();je(this,e),yl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Fu(t,n,i.auth()),this.type=this._delegate.type}return Fe(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(ml=tr).INTERNAL.registerComponent(new Ct("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new hl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fr,PASSWORD_RESET:hr,RECOVER_EMAIL:dr,REVERT_SECOND_FACTOR_ADDITION:pr,VERIFY_AND_CHANGE_EMAIL:vr,VERIFY_EMAIL:mr}},EmailAuthProvider:Ta,FacebookAuthProvider:Da,GithubAuthProvider:Oa,GoogleAuthProvider:Ra,OAuthProvider:Aa,SAMLAuthProvider:La,PhoneAuthProvider:vl,PhoneMultiFactorGenerator:cc,RecaptchaVerifier:gl,TwitterAuthProvider:ja,Auth:hl,AuthCredential:Hi,Error:lt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ml.registerVersion("@firebase/auth-compat","0.2.18");var kl,wl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},bl={},xl=xl||{},_l=wl||self;function Il(){}function Sl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function El(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Tl="closure_uid_"+(1e9*Math.random()>>>0),Nl=0;function Cl(e,t,n){return e.call.apply(e.bind,arguments)}function Al(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Dl(e,t,n){return(Dl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cl:Al).apply(null,arguments)}function Rl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ol(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Pl(){this.s=this.s,this.o=this.o}var Ll={};Pl.prototype.s=!1,Pl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Tl)&&e[Tl]||(e[Tl]=++Nl)}(this);delete Ll[e]}},Pl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ml=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Fl(e){return Array.prototype.concat.apply([],arguments)}function Vl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ul(e){return/^[\s\xa0]*$/.test(e)}var Bl,zl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ql(e,t){return-1!=e.indexOf(t)}function Kl(e,t){return e<t?-1:e>t?1:0}e:{var Gl=_l.navigator;if(Gl){var Hl=Gl.userAgent;if(Hl){Bl=Hl;break e}}Bl=""}function Wl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ql(e){var t={};for(var n in e)t[n]=e[n];return t}var $l="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<$l.length;a++)n=$l[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Jl(e){return Jl[" "](e),e}Jl[" "]=Il;var Xl,Zl=ql(Bl,"Opera"),ef=ql(Bl,"Trident")||ql(Bl,"MSIE"),tf=ql(Bl,"Edge"),nf=tf||ef,rf=ql(Bl,"Gecko")&&!(ql(Bl.toLowerCase(),"webkit")&&!ql(Bl,"Edge"))&&!(ql(Bl,"Trident")||ql(Bl,"MSIE"))&&!ql(Bl,"Edge"),af=ql(Bl.toLowerCase(),"webkit")&&!ql(Bl,"Edge");function of(){var e=_l.document;return e?e.documentMode:void 0}e:{var uf="",sf=function(){var e=Bl;return rf?/rv:([^\);]+)(\)|;)/.exec(e):tf?/Edge\/([\d\.]+)/.exec(e):ef?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):af?/WebKit\/(\S+)/.exec(e):Zl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(sf&&(uf=sf?sf[1]:""),ef){var cf=of();if(null!=cf&&cf>parseFloat(uf)){Xl=String(cf);break e}}Xl=uf}var lf,ff={};function hf(){return function(e){var t=ff;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=zl(String(Xl)).split("."),n=zl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Kl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Kl(0==a[2].length,0==o[2].length)||Kl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(_l.document&&ef){var df=of();lf=df||(parseInt(Xl,10)||void 0)}else lf=void 0;var pf=lf,vf=function(){if(!_l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{_l.addEventListener("test",Il,t),_l.removeEventListener("test",Il,t)}catch(n){}return e}();function mf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function yf(e,t){if(mf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(rf){e:{try{Jl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:gf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yf.Z.h.call(this)}}mf.prototype.h=function(){this.defaultPrevented=!0},Ol(yf,mf);var gf={2:"touch",3:"pen",4:"mouse"};yf.prototype.h=function(){yf.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var kf="closure_listenable_"+(1e6*Math.random()|0),wf=0;function bf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++wf,this.ca=this.fa=!1}function xf(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function _f(e){this.src=e,this.g={},this.h=0}function If(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=jl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(xf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Sf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}_f.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Sf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new bf(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Ef="closure_lm_"+(1e6*Math.random()|0),Tf={};function Nf(e,t,n,r,i){if(r&&r.once)return Af(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Nf(e,t[a],n,r,i);return null}return n=Mf(n),e&&e[kf]?e.N(t,n,El(r)?!!r.capture:!!r,i):Cf(e,t,n,!1,r,i)}function Cf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=El(i)?!!i.capture:!!i,u=Lf(e);if(u||(e[Ef]=u=new _f(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Pf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Of(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Af(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Af(e,t[a],n,r,i);return null}return n=Mf(n),e&&e[kf]?e.O(t,n,El(r)?!!r.capture:!!r,i):Cf(e,t,n,!0,r,i)}function Df(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Df(e,t[a],n,r,i);else r=El(r)?!!r.capture:!!r,n=Mf(n),e&&e[kf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Sf(a=e.g[t],n,r,i))&&(xf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Lf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Sf(t,n,r,i)),(n=-1<e?t[e]:null)&&Rf(n))}function Rf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[kf])If(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Of(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Lf(t))?(If(n,e),0==n.h&&(n.src=null,t[Ef]=null)):xf(e)}}}function Of(e){return e in Tf?Tf[e]:Tf[e]="on"+e}function Pf(e,t){if(e.ca)e=!0;else{t=new yf(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Rf(e),e=n.call(r,t)}return e}function Lf(e){return(e=e[Ef])instanceof _f?e:null}var jf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mf(e){return"function"===typeof e?e:(e[jf]||(e[jf]=function(t){return e.handleEvent(t)}),e[jf])}function Ff(){Pl.call(this),this.i=new _f(this),this.P=this,this.I=null}function Vf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new mf(t,e);else if(t instanceof mf)t.target=t.target||e;else{var i=t;Yl(t=new mf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Uf(o,r,!0,t)&&i}if(i=Uf(o=t.g=e,r,!0,t)&&i,i=Uf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Uf(o=t.g=n[a],r,!1,t)&&i}function Uf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&If(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ol(Ff,Pl),Ff.prototype[kf]=!0,Ff.prototype.removeEventListener=function(e,t,n,r){Df(this,e,t,n,r)},Ff.prototype.M=function(){if(Ff.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xf(n[r]);delete t.g[e],t.h--}}this.I=null},Ff.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ff.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Bf=_l.JSON.stringify;function zf(){var e=Yf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var qf,Kf=function(){function e(){je(this,e),this.h=this.g=null}return Fe(e,[{key:"add",value:function(e,t){var n=Gf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Gf=new(function(){function e(t,n){je(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Fe(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Hf}),(function(e){return e.reset()})),Hf=function(){function e(){je(this,e),this.next=this.g=this.h=null}return Fe(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Wf(e){_l.setTimeout((function(){throw e}),0)}function Qf(e,t){qf||function(){var e=_l.Promise.resolve(void 0);qf=function(){e.then(Jf)}}(),$f||(qf(),$f=!0),Yf.add(e,t)}var $f=!1,Yf=new Kf;function Jf(){for(var e;e=zf();){try{e.h.call(e.g)}catch(n){Wf(n)}var t=Gf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$f=!1}function Xf(e,t){Ff.call(this),this.h=e||1,this.g=t||_l,this.j=Dl(this.kb,this),this.l=Date.now()}function Zf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function eh(e,t,n){if("function"===typeof e)n&&(e=Dl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Dl(e.handleEvent,e)}return 2147483647<Number(t)?-1:_l.setTimeout(e,t||0)}function th(e){e.g=eh((function(){e.g=null,e.i&&(e.i=!1,th(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ol(Xf,Ff),(kl=Xf.prototype).da=!1,kl.S=null,kl.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vf(this,"tick"),this.da&&(Zf(this),this.start()))}},kl.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kl.M=function(){Xf.Z.M.call(this),Zf(this),delete this.g};var nh=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Fe(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:th(this)}},{key:"M",value:function(){rr(ze(n.prototype),"M",this).call(this),this.g&&(_l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Pl);function rh(e){Pl.call(this),this.h=e,this.g={}}Ol(rh,Pl);var ih=[];function ah(e,t,n,r){Array.isArray(n)||(n&&(ih[0]=n.toString()),n=ih);for(var i=0;i<n.length;i++){var a=Nf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function oh(e){Wl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Rf(e)}),e),e.g={}}function uh(){this.g=!0}function sh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Bf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}rh.prototype.M=function(){rh.Z.M.call(this),oh(this)},rh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uh.prototype.Aa=function(){this.g=!1},uh.prototype.info=function(){};var ch={},lh=null;function fh(){return lh=lh||new Ff}function hh(e){mf.call(this,ch.Ma,e)}function dh(e){var t=fh();Vf(t,new hh(t,e))}function ph(e,t){mf.call(this,ch.STAT_EVENT,e),this.stat=t}function vh(e){var t=fh();Vf(t,new ph(t,e))}function mh(e,t){mf.call(this,ch.Na,e),this.size=t}function yh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return _l.setTimeout((function(){e()}),t)}ch.Ma="serverreachability",Ol(hh,mf),ch.STAT_EVENT="statevent",Ol(ph,mf),ch.Na="timingevent",Ol(mh,mf);var gh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},kh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wh(){}function bh(e){return e.h||(e.h=e.i())}function xh(){}wh.prototype.h=null;var _h,Ih={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sh(){mf.call(this,"d")}function Eh(){mf.call(this,"c")}function Th(){}function Nh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new rh(this),this.P=Ah,e=nf?125:void 0,this.W=new Xf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ch}function Ch(){this.i=null,this.g="",this.h=!1}Ol(Sh,mf),Ol(Eh,mf),Ol(Th,wh),Th.prototype.g=function(){return new XMLHttpRequest},Th.prototype.i=function(){return{}},_h=new Th;var Ah=45e3,Dh={},Rh={};function Oh(e,t,n){e.K=1,e.v=nd(Yh(t)),e.s=n,e.U=!0,Ph(e,null)}function Ph(e,t){e.F=Date.now(),Fh(e),e.A=Yh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),vd(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ch,e.g=yp(e.l,n?t:null,!e.s),0<e.O&&(e.L=new nh(Dl(e.Ia,e,e.g),e.O)),ah(e.V,e.g,"readystatechange",e.gb),t=e.H?Ql(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),dh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Lh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function jh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Mh(e,n))==Rh){4==t&&(e.o=4,vh(14),i=!1),sh(e.j,e.m,null,"[Incomplete Response]");break}if(r==Dh){e.o=4,vh(15),sh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}sh(e.j,e.m,r,null),qh(e,r)}Lh(e)&&r!=Rh&&r!=Dh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),cp(t),t.L=!0,vh(11))):(sh(e.j,e.m,n,"[Invalid Chunked Response]"),zh(e),Bh(e))}function Mh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Rh:(n=Number(t.substring(n,r)),isNaN(n)?Dh:(r+=1)+n>t.length?Rh:(t=t.substr(r,n),e.C=r+n,t))}function Fh(e){e.Y=Date.now()+e.P,Vh(e,e.P)}function Vh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yh(Dl(e.eb,e),t)}function Uh(e){e.B&&(_l.clearTimeout(e.B),e.B=null)}function Bh(e){0==e.l.G||e.I||hp(e.l,e)}function zh(e){Uh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Zf(e.W),oh(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function qh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||_d(n.i,e)))if(n.I=e.N,!e.J&&_d(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fp(n),ep(n)}sp(n),vh(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=yh(Dl(n.ab,n),6e3));if(1>=xd(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else pp(n,11)}else if((e.J||n.g==e)&&fp(n),!Ul(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ql(l,"spdy")||ql(l,"quic")||ql(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Id(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,td(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=mp(r,r.H?r.la:null,r.W),d.J){Sd(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Uh(p),Fh(p)),r.g=d}else up(r);0<n.l.length&&rp(n)}else"stop"!=a[0]&&"close"!=a[0]||pp(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?pp(n,7):Zd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}dh(4)}catch(a){}}function Kh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Sl(e)||"string"===typeof e)Ml(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Sl(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Sl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Gh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Gh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Hh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Wh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Wh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Wh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(kl=Nh.prototype).setTimeout=function(e){this.P=e},kl.gb=function(e){e=e.target;var t=this.L;t&&3==Qd(e)?t.l():this.Ia(e)},kl.Ia=function(e){try{if(e==this.g)e:{var t=Qd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||nf||this.g&&(this.h.h||this.g.ga()||$d(this.g)))){this.I||4!=t||7==n||dh(8==n||0>=r?3:2),Uh(this);var i=this.g.ba();this.N=i;t:if(Lh(this)){var a=$d(this.g);e="";var o=a.length,u=4==Qd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){zh(this),Bh(this);var s="";break t}this.h.i=new _l.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ul(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,vh(12),zh(this),Bh(this);break e}sh(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qh(this,i)}this.U?(jh(this,t,s),nf&&this.i&&3==t&&(ah(this.V,this.W,"tick",this.fb),this.W.start())):(sh(this.j,this.m,s,null),qh(this,s)),4==t&&zh(this),this.i&&!this.I&&(4==t?hp(this.l,this):(this.i=!1,Fh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,vh(12)):(this.o=0,vh(13)),zh(this),Bh(this)}}}catch(t){}},kl.fb=function(){if(this.g){var e=Qd(this.g),t=this.g.ga();this.C<t.length&&(Uh(this),jh(this,e,t),this.i&&4!=e&&Fh(this))}},kl.cancel=function(){this.I=!0,zh(this)},kl.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(dh(3),vh(17)),zh(this),this.o=2,Bh(this)):Vh(this,this.Y-e)},(kl=Gh.prototype).R=function(){Hh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},kl.T=function(){return Hh(this),this.g.concat()},kl.get=function(e,t){return Wh(this.h,e)?this.h[e]:t},kl.set=function(e,t){Wh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},kl.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Qh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $h(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof $h){this.g=void 0!==t?t:e.g,Jh(this,e.j),this.s=e.s,Xh(this,e.i),Zh(this,e.m),this.l=e.l,t=e.h;var n=new fd;n.i=t.i,t.g&&(n.g=new Gh(t.g),n.h=t.h),ed(this,n),this.o=e.o}else e&&(n=String(e).match(Qh))?(this.g=!!t,Jh(this,n[1]||"",!0),this.s=rd(n[2]||""),Xh(this,n[3]||"",!0),Zh(this,n[4]),this.l=rd(n[5]||"",!0),ed(this,n[6]||"",!0),this.o=rd(n[7]||"")):(this.g=!!t,this.h=new fd(null,this.g))}function Yh(e){return new $h(e)}function Jh(e,t,n){e.j=n?rd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xh(e,t,n){e.i=n?rd(t,!0):t}function Zh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ed(e,t,n){t instanceof fd?(e.h=t,function(e,t){t&&!e.j&&(hd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dd(this,t),vd(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=id(t,cd)),e.h=new fd(t,e.g))}function td(e,t,n){e.h.set(t,n)}function nd(e){return td(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function id(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ad),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ad(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$h.prototype.toString=function(){var e=[],t=this.j;t&&e.push(id(t,od,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(id(t,od,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(id(n,"/"==n.charAt(0)?sd:ud,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",id(n,ld)),e.join("")};var od=/[#\/\?@]/g,ud=/[#\?:]/g,sd=/[#\?]/g,cd=/[#\?@]/g,ld=/#/g;function fd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hd(e){e.g||(e.g=new Gh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dd(e,t){hd(e),t=md(e,t),Wh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Wh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Hh(e)))}function pd(e,t){return hd(e),t=md(e,t),Wh(e.g.h,t)}function vd(e,t,n){dd(e,t),0<n.length&&(e.i=null,e.g.set(md(e,t),Vl(n)),e.h+=n.length)}function md(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(kl=fd.prototype).add=function(e,t){hd(this),this.i=null,e=md(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},kl.forEach=function(e,t){hd(this),this.g.forEach((function(n,r){Ml(n,(function(n){e.call(t,n,r,this)}),this)}),this)},kl.T=function(){hd(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},kl.R=function(e){hd(this);var t=[];if("string"===typeof e)pd(this,e)&&(t=Fl(t,this.g.get(md(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Fl(t,e[n])}return t},kl.set=function(e,t){return hd(this),this.i=null,pd(this,e=md(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},kl.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},kl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var yd=Fe((function e(t,n){je(this,e),this.h=t,this.g=n}));function gd(e){this.l=e||wd,_l.PerformanceNavigationTiming?e=0<(e=_l.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(_l.g&&_l.g.Ea&&_l.g.Ea()&&_l.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var kd,wd=10;function bd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xd(e){return e.h?1:e.g?e.g.size:0}function _d(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Id(e,t){e.g?e.g.add(t):e.h=t}function Sd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ed(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ve(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Vl(e.i)}function Td(){}function Nd(){this.g=new Td}function Cd(e,t,n){var r=n||"";try{Kh(e,(function(e,n){var i=e;El(e)&&(i=Bf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ad(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Dd(e){this.l=e.$b||null,this.j=e.ib||!1}function Rd(e,t){Ff.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Od,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gd.prototype.cancel=function(){if(this.i=Ed(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ve(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Td.prototype.stringify=function(e){return _l.JSON.stringify(e,void 0)},Td.prototype.parse=function(e){return _l.JSON.parse(e,void 0)},Ol(Dd,wh),Dd.prototype.g=function(){return new Rd(this.l,this.j)},Dd.prototype.i=(kd={},function(){return kd}),Ol(Rd,Ff);var Od=0;function Pd(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ld(e){e.readyState=4,e.l=null,e.j=null,e.A=null,jd(e)}function jd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(kl=Rd.prototype).open=function(e,t){if(this.readyState!=Od)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,jd(this)},kl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||_l).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},kl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ld(this)),this.readyState=Od},kl.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jd(this)),this.g&&(this.readyState=3,jd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof _l.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pd(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},kl.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ld(this):jd(this),3==this.readyState&&Pd(this)}},kl.Ua=function(e){this.g&&(this.response=this.responseText=e,Ld(this))},kl.Ta=function(e){this.g&&(this.response=e,Ld(this))},kl.ha=function(){this.g&&Ld(this)},kl.setRequestHeader=function(e,t){this.v.append(e,t)},kl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},kl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Md=_l.JSON.parse;function Fd(e){Ff.call(this),this.headers=new Gh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vd,this.K=this.L=!1}Ol(Fd,Ff);var Vd="",Ud=/^https?$/i,Bd=["POST","PUT"];function zd(e){return"content-type"==e.toLowerCase()}function qd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Kd(e),Hd(e)}function Kd(e){e.D||(e.D=!0,Vf(e,"complete"),Vf(e,"error"))}function Gd(e){if(e.h&&"undefined"!=typeof xl&&(!e.C[1]||4!=Qd(e)||2!=e.ba()))if(e.v&&4==Qd(e))eh(e.Fa,0,e);else if(Vf(e,"readystatechange"),4==Qd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Qh)[1]||null;if(!a&&_l.self&&_l.self.location){var o=_l.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ud.test(a?a.toLowerCase():"")}t=i}if(t)Vf(e,"complete"),Vf(e,"success");else{e.m=6;try{var u=2<Qd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Kd(e)}}finally{Hd(e)}}}function Hd(e,t){if(e.g){Wd(e);var n=e.g,r=e.C[0]?Il:null;e.g=null,e.C=null,t||Vf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Wd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(_l.clearTimeout(e.A),e.A=null)}function Qd(e){return e.g?e.g.readyState:0}function $d(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Vd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Wl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):td(e,t,n))}function Jd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xd(e){this.za=0,this.l=[],this.h=new uh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jd("baseRetryDelayMs",5e3,e),this.$a=Jd("retryDelaySeedMs",1e4,e),this.Ya=Jd("forwardChannelMaxRetries",2,e),this.ra=Jd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new gd(e&&e.concurrentRequestLimit),this.Ca=new Nd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Zd(e){if(tp(e),3==e.G){var t=e.V++,n=Yh(e.F);td(n,"SID",e.J),td(n,"RID",t),td(n,"TYPE","terminate"),ap(e,n),(t=new Nh(e,e.h,t,void 0)).K=2,t.v=nd(Yh(n)),n=!1,_l.navigator&&_l.navigator.sendBeacon&&(n=_l.navigator.sendBeacon(t.v.toString(),"")),!n&&_l.Image&&((new Image).src=t.v,n=!0),n||(t.g=yp(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Fh(t)}vp(e)}function ep(e){e.g&&(cp(e),e.g.cancel(),e.g=null)}function tp(e){ep(e),e.u&&(_l.clearTimeout(e.u),e.u=null),fp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&_l.clearTimeout(e.m),e.m=null)}function np(e,t){e.l.push(new yd(e.Za++,t)),3==e.G&&rp(e)}function rp(e){bd(e.i)||e.m||(e.m=!0,Qf(e.Ha,e),e.C=0)}function ip(e,t){var n;n=t?t.m:e.V++;var r=Yh(e.F);td(r,"SID",e.J),td(r,"RID",n),td(r,"AID",e.U),ap(e,r),e.o&&e.s&&Yd(r,e.o,e.s),n=new Nh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=op(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Id(e.i,n),Oh(n,r,t)}function ap(e,t){e.j&&Kh({},(function(e,n){td(t,n,e)}))}function op(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Dl(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Cd(l,o,"req"+c+"_")}catch(Gp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function up(e){e.g||e.u||(e.Y=1,Qf(e.Ga,e),e.A=0)}function sp(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=yh(Dl(e.Ga,e),dp(e,e.A)),e.A++,!0)}function cp(e){null!=e.B&&(_l.clearTimeout(e.B),e.B=null)}function lp(e){e.g=new Nh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Yh(e.oa);td(t,"RID","rpc"),td(t,"SID",e.J),td(t,"CI",e.N?"0":"1"),td(t,"AID",e.U),ap(e,t),td(t,"TYPE","xmlhttp"),e.o&&e.s&&Yd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=nd(Yh(t)),n.s=null,n.U=!0,Ph(n,e)}function fp(e){null!=e.v&&(_l.clearTimeout(e.v),e.v=null)}function hp(e,t){var n=null;if(e.g==t){fp(e),cp(e),e.g=null;var r=2}else{if(!_d(e.i,t))return;n=t.D,Sd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Vf(r=fh(),new mh(r,n,t,i)),rp(e)}else up(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(xd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=yh(Dl(e.Ha,e,t),dp(e,e.C)),e.C++,!0))}(e,t)||2==r&&sp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:pp(e,5);break;case 4:pp(e,10);break;case 3:pp(e,6);break;default:pp(e,2)}}function dp(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function pp(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Dl(e.jb,e);n||(n=new $h("//www.google.com/images/cleardot.gif"),_l.location&&"http"==_l.location.protocol||Jh(n,"https"),nd(n)),function(e,t){var n=new uh;if(_l.Image){var r=new Image;r.onload=Rl(Ad,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Rl(Ad,n,r,"TestLoadImage: error",!1,t),r.onabort=Rl(Ad,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Rl(Ad,n,r,"TestLoadImage: timeout",!1,t),_l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vh(2);e.G=0,e.j&&e.j.va(t),vp(e),tp(e)}function vp(e){e.G=0,e.I=-1,e.j&&(0==Ed(e.i).length&&0==e.l.length||(e.i.i.length=0,Vl(e.l),e.l.length=0),e.j.ua())}function mp(e,t,n){var r=function(e){return e instanceof $h?Yh(e):new $h(e,void 0)}(n);if(""!=r.i)t&&Xh(r,t+"."+r.i),Zh(r,r.m);else{var i=_l.location;r=function(e,t,n,r){var i=new $h(null,void 0);return e&&Jh(i,e),t&&Xh(i,t),n&&Zh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Wl(e.aa,(function(e,t){td(r,t,e)})),t=e.D,n=e.sa,t&&n&&td(r,t,n),td(r,"VER",e.ma),ap(e,r),r}function yp(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Fd(new Dd({ib:!0})):new Fd(e.qa)).L=e.H,t}function gp(){}function kp(){if(ef&&!(10<=Number(pf)))throw Error("Environmental error: no available transport.")}function wp(e,t){Ff.call(this),this.g=new Xd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ul(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ul(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _p(this)}function bp(e){Sh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xp(){Eh.call(this),this.status=1}function _p(e){this.g=e}(kl=Fd.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_h.g(),this.C=this.u?bh(this.u):bh(_h),this.g.onreadystatechange=Dl(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void qd(this,a)}e=n||"";var i=new Gh(this.headers);r&&Kh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=zd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=_l.FormData&&e instanceof _l.FormData,!(0<=jl(Bd,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wd(this),0<this.B&&((this.K=function(e){return ef&&hf()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dl(this.pa,this)):this.A=eh(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){qd(this,a)}},kl.pa=function(){"undefined"!=typeof xl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vf(this,"timeout"),this.abort(8))},kl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Vf(this,"complete"),Vf(this,"abort"),Hd(this))},kl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hd(this,!0)),Fd.Z.M.call(this)},kl.Fa=function(){this.s||(this.F||this.v||this.l?Gd(this):this.cb())},kl.cb=function(){Gd(this)},kl.ba=function(){try{return 2<Qd(this)?this.g.status:-1}catch(kd){return-1}},kl.ga=function(){try{return this.g?this.g.responseText:""}catch(kd){return""}},kl.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Md(t)}},kl.Da=function(){return this.m},kl.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(kl=Xd.prototype).ma=8,kl.G=1,kl.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},kl.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Nh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Yl(n=Ql(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=op(this,t,r),td(i=Yh(this.F),"RID",e),td(i,"CVER",22),this.D&&td(i,"X-HTTP-Session-Id",this.D),ap(this,i),this.o&&n&&Yd(i,this.o,n),Id(this.i,t),this.Ra&&td(i,"TYPE","init"),this.ja?(td(i,"$req",r),td(i,"SID","null"),t.$=!0,Oh(t,i,null)):Oh(t,i,r),this.G=2}}else 3==this.G&&(e?ip(this,e):0==this.l.length||bd(this.i)||ip(this))},kl.Ga=function(){if(this.u=null,lp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=yh(Dl(this.bb,this),e)}},kl.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vh(10),ep(this),lp(this))},kl.ab=function(){null!=this.v&&(this.v=null,ep(this),sp(this),vh(19))},kl.jb=function(e){e?(this.h.info("Successfully pinged google.com"),vh(2)):(this.h.info("Failed to ping google.com"),vh(1))},(kl=gp.prototype).xa=function(){},kl.wa=function(){},kl.va=function(){},kl.ua=function(){},kl.Oa=function(){},kp.prototype.g=function(e,t){return new wp(e,t)},Ol(wp,Ff),wp.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Qf(Dl(e.hb,e,t))),vh(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=mp(e,null,e.W),rp(e)},wp.prototype.close=function(){Zd(this.g)},wp.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,np(this.g,t)}else this.v?((t={}).__data__=Bf(e),np(this.g,t)):np(this.g,e)},wp.prototype.M=function(){this.g.j=null,delete this.j,Zd(this.g),delete this.g,wp.Z.M.call(this)},Ol(bp,Sh),Ol(xp,Eh),Ol(_p,gp),_p.prototype.xa=function(){Vf(this.g,"a")},_p.prototype.wa=function(e){Vf(this.g,new bp(e))},_p.prototype.va=function(e){Vf(this.g,new xp(e))},_p.prototype.ua=function(){Vf(this.g,"b")},kp.prototype.createWebChannel=kp.prototype.g,wp.prototype.send=wp.prototype.u,wp.prototype.open=wp.prototype.m,wp.prototype.close=wp.prototype.close,gh.NO_ERROR=0,gh.TIMEOUT=8,gh.HTTP_ERROR=6,kh.COMPLETE="complete",xh.EventType=Ih,Ih.OPEN="a",Ih.CLOSE="b",Ih.ERROR="c",Ih.MESSAGE="d",Ff.prototype.listen=Ff.prototype.N,Fd.prototype.listenOnce=Fd.prototype.O,Fd.prototype.getLastError=Fd.prototype.La,Fd.prototype.getLastErrorCode=Fd.prototype.Da,Fd.prototype.getStatus=Fd.prototype.ba,Fd.prototype.getResponseJson=Fd.prototype.Qa,Fd.prototype.getResponseText=Fd.prototype.ga,Fd.prototype.send=Fd.prototype.ea;var Ip=bl.createWebChannelTransport=function(){return new kp},Sp=bl.getStatEventTarget=function(){return fh()},Ep=bl.ErrorCode=gh,Tp=bl.EventType=kh,Np=bl.Event=ch,Cp=bl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ap=bl.FetchXmlHttpFactory=Dd,Dp=bl.WebChannel=xh,Rp=bl.XhrIo=Fd,Op="@firebase/firestore",Pp=function(){function e(t){je(this,e),this.uid=t}return Fe(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Pp.UNAUTHENTICATED=new Pp(null),Pp.GOOGLE_CREDENTIALS=new Pp("google-credentials-uid"),Pp.FIRST_PARTY=new Pp("first-party-uid"),Pp.MOCK_USER=new Pp("mock-user");var Lp="9.9.2",jp=new Ut("@firebase/firestore");function Mp(){return jp.logLevel}function Fp(e){if(jp.logLevel<=Ot.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bp);jp.debug.apply(jp,["Firestore (".concat(Lp,"): ").concat(e)].concat(Et(i)))}}function Vp(e){if(jp.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bp);jp.error.apply(jp,["Firestore (".concat(Lp,"): ").concat(e)].concat(Et(i)))}}function Up(e){if(jp.logLevel<=Ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bp);jp.warn.apply(jp,["Firestore (".concat(Lp,"): ").concat(e)].concat(Et(i)))}}function Bp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function zp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Lp,") INTERNAL ASSERTION FAILED: ")+e;throw Vp(t),new Error(t)}function qp(e,t){e||zp()}function Kp(e,t){return e}var Gp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hp=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Fe(n)}(lt),Wp=Fe((function e(){var t=this;je(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Qp=Fe((function e(t,n){je(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),$p=function(){function e(){je(this,e)}return Fe(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Pp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Yp=function(){function e(t){je(this,e),this.token=t,this.changeListener=null}return Fe(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Jp=function(){function e(t){je(this,e),this.t=t,this.currentUser=Pp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Fe(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Wp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Wp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Fp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Fp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Fp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(qp("string"==typeof n.accessToken),new Qp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return qp(null===e||"string"==typeof e),new Pp(e)}}]),e}(),Xp=Fe((function e(t,n,r){je(this,e),this.type="FirstParty",this.user=Pp.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Zp=function(){function e(t,n,r){je(this,e),this.h=t,this.l=n,this.m=r}return Fe(e,[{key:"getToken",value:function(){return Promise.resolve(new Xp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Pp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ev=Fe((function e(t){je(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),tv=function(){function e(t){je(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Fe(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Fp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Fp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Fp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Fp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(qp("string"==typeof t.token),e.p=t.token,new ev(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function nv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var rv=function(){function e(){je(this,e)}return Fe(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=nv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function iv(e,t){return e<t?-1:e>t?1:0}function av(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ov(e){return e+"\0"}var uv=function(){function e(t,n){if(je(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hp(Gp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hp(Gp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hp(Gp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hp(Gp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Fe(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?iv(this.nanoseconds,e.nanoseconds):iv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),sv=function(){function e(t){je(this,e),this.timestamp=t}return Fe(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new uv(0,0))}},{key:"max",value:function(){return new e(new uv(253402300799,999999999))}}]),e}(),cv=function(){function e(t,n,r){je(this,e),void 0===n?n=0:n>t.length&&zp(),void 0===r?r=t.length-n:r>t.length-n&&zp(),this.segments=t,this.offset=n,this.len=r}return Fe(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),lv=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Et(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(cv),fv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hv=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return fv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Hp(Gp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hp(Gp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Hp(Gp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(cv),dv=function(){function e(t){je(this,e),this.path=t}return Fe(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===lv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(lv.fromString(t))}},{key:"fromName",value:function(t){return new e(lv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(lv.emptyPath())}},{key:"comparator",value:function(e,t){return lv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new lv(t.slice()))}}]),e}(),pv=Fe((function e(t,n,r,i){je(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function vv(e){return e.fields.find((function(e){return 2===e.kind}))}function mv(e){return e.fields.filter((function(e){return 2!==e.kind}))}pv.UNKNOWN_ID=-1;var yv=Fe((function e(t,n){je(this,e),this.fieldPath=t,this.kind=n}));var gv=function(){function e(t,n){je(this,e),this.sequenceNumber=t,this.offset=n}return Fe(e,null,[{key:"empty",value:function(){return new e(0,bv.min())}}]),e}();function kv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=sv.fromTimestamp(1e9===r?new uv(n+1,0):new uv(n,r));return new bv(i,dv.empty(),t)}function wv(e){return new bv(e.readTime,e.key,-1)}var bv=function(){function e(t,n,r){je(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Fe(e,null,[{key:"min",value:function(){return new e(sv.min(),dv.empty(),-1)}},{key:"max",value:function(){return new e(sv.max(),dv.empty(),-1)}}]),e}();function xv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=dv.comparator(e.documentKey,t.documentKey))?n:iv(e.largestBatchId,t.largestBatchId)}var _v="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Iv=function(){function e(){je(this,e),this.onCommittedListeners=[]}return Fe(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Sv(e){return Ev.apply(this,arguments)}function Ev(){return Ev=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Gp.FAILED_PRECONDITION&&t.message===_v){e.next=2;break}throw t;case 2:Fp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}var Tv=function(){function e(t){var n=this;je(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Fe(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&zp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Ve(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Nv=function(){function e(t,n){var r=this;je(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Wp,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Dv(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=jv(e.target.error);r.T.reject(new Dv(t,n))}}return Fe(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(Fp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ov(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Dv(n,t)}}}]),e}(),Cv=function(){function e(t,n,r){je(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(rt())&&Vp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Fe(e,[{key:"k",value:function(){var e=Nt(It().mark((function e(t){var n=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Fp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Dv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Hp(Gp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Hp(Gp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Dv(t,n))},i.onupgradeneeded=function(e){Fp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){Fp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Nt(It().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(It().mark((function e(){var n,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Nv.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Tv.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Fp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Fp("SimpleDb","Removing database:",e),Pv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!ct())return!1;if(e.S())return!0;var t=rt(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/assessment_deploy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Av=function(){function e(t){je(this,e),this.$=t,this.B=!1,this.L=null}return Fe(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Pv(this.$.delete())}}]),e}(),Dv=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,Gp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Fe(n)}(Hp);function Rv(e){return"IndexedDbTransactionError"===e.name}var Ov=function(){function e(t){je(this,e),this.store=t}return Fe(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Fp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Fp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Pv(n)}},{key:"add",value:function(e){return Fp("SimpleDb","ADD",this.store.name,e,e),Pv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Pv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Fp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Fp("SimpleDb","DELETE",this.store.name,e),Pv(this.store.delete(e))}},{key:"count",value:function(){return Fp("SimpleDb","COUNT",this.store.name),Pv(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Tv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Tv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){Fp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Tv((function(n,r){t.onerror=function(e){var t=jv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Tv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Av(i),o=t(i.primaryKey,i.value,a);if(o instanceof Tv){var u=o.catch((function(e){return a.done(),Tv.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Tv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Pv(e){return new Tv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=jv(e.target.error);n(t)}}))}var Lv=!1;function jv(e){var t=Cv.v(rt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Hp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Lv||(Lv=!0,setTimeout((function(){throw r}),0)),r}}return e}var Mv=function(){function e(t,n){je(this,e),this.asyncQueue=t,this.X=n,this.task=null}return Fe(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;Fp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Fp,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Rv(e.t4)){e.next=17;break}Fp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Sv(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Fv=function(){function e(t,n){je(this,e),this.localStore=t,this.persistence=n}return Fe(e,[{key:"tt",value:function(){var e=Nt(It().mark((function e(){var t,n=this,r=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Tv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Fp("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return Fp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=wv(t);xv(r,n)>0&&(n=r)})),new bv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Vv=function(){function e(t,n){var r=this;je(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return Fe(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Uv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Vv.ot=-1;var qv=function(){function e(t,n){je(this,e),this.comparator=t,this.root=n||Gv.EMPTY}return Fe(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Kv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Kv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Kv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Kv(this.root,e,this.comparator,!0)}}]),e}(),Kv=function(){function e(t,n,r,i){je(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Fe(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gv=function(){function e(t,n,r,i,a){je(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Fe(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw zp();if(this.right.isRed())throw zp();var e=this.left.check();if(e!==this.right.check())throw zp();return e+(this.isRed()?0:1)}}]),e}();Gv.EMPTY=null,Gv.RED=!0,Gv.BLACK=!1,Gv.EMPTY=new(function(){function e(){je(this,e),this.size=0}return Fe(e,[{key:"key",get:function(){throw zp()}},{key:"value",get:function(){throw zp()}},{key:"color",get:function(){throw zp()}},{key:"left",get:function(){throw zp()}},{key:"right",get:function(){throw zp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Hv=function(){function e(t){je(this,e),this.comparator=t,this.data=new qv(this.comparator)}return Fe(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wv=function(){function e(t){je(this,e),this.iter=t}return Fe(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qv(e){return e.hasNext()?e.getNext():void 0}var $v=function(){function e(t){je(this,e),this.fields=t,t.sort(hv.comparator)}return Fe(e,[{key:"unionWith",value:function(t){var n,r=new Hv(hv.comparator),i=Ve(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Ve(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Ve(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return av(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Yv=function(e){function t(e){je(this,t),this.binaryString=e}return Fe(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return iv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yv.EMPTY_BYTE_STRING=new Yv("");var Jv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xv(e){if(qp(!!e),"string"==typeof e){var t=0,n=Jv.exec(e);if(qp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zv(e.seconds),nanos:Zv(e.nanos)}}function Zv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function em(e){return"string"==typeof e?Yv.fromBase64String(e):Yv.fromUint8Array(e)}function tm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nm(e){var t=e.mapValue.fields.__previous_value__;return tm(t)?nm(t):t}function rm(e){var t=Xv(e.mapValue.fields.__local_write_time__.timestampValue);return new uv(t.seconds,t.nanos)}var im=Fe((function e(t,n,r,i,a,o,u,s){je(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),am=function(){function e(t,n){je(this,e),this.projectId=t,this.database=n||"(default)"}return Fe(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function om(e){return null==e}function um(e){return 0===e&&1/e==-1/0}function sm(e){return"number"==typeof e&&Number.isInteger(e)&&!um(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var cm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lm={nullValue:"NULL_VALUE"};function fm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tm(e)?4:Sm(e)?9007199254740991:10:zp()}function hm(e,t){if(e===t)return!0;var n=fm(e);if(n!==fm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rm(e).isEqual(rm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Xv(e.timestampValue),r=Xv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return em(e.bytesValue).isEqual(em(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zv(e.geoPointValue.latitude)===Zv(t.geoPointValue.latitude)&&Zv(e.geoPointValue.longitude)===Zv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zv(e.integerValue)===Zv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Zv(e.doubleValue),r=Zv(t.doubleValue);return n===r?um(n)===um(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return av(e.arrayValue.values||[],t.arrayValue.values||[],hm);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uv(n)!==Uv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hm(n[i],r[i])))return!1;return!0}(e,t);default:return zp()}}function dm(e,t){return void 0!==(e.values||[]).find((function(e){return hm(e,t)}))}function pm(e,t){if(e===t)return 0;var n=fm(e),r=fm(t);if(n!==r)return iv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Zv(e.integerValue||e.doubleValue),r=Zv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vm(e.timestampValue,t.timestampValue);case 4:return vm(rm(e),rm(t));case 5:return iv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=em(e),r=em(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=iv(n[i],r[i]);if(0!==a)return a}return iv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=iv(Zv(e.latitude),Zv(t.latitude));return 0!==n?n:iv(Zv(e.longitude),Zv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=pm(n[i],r[i]);if(a)return a}return iv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cm.mapValue&&t===cm.mapValue)return 0;if(e===cm.mapValue)return 1;if(t===cm.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=iv(r[o],a[o]);if(0!==u)return u;var s=pm(n[r[o]],i[a[o]]);if(0!==s)return s}return iv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw zp()}}function vm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iv(e,t);var n=Xv(e),r=Xv(t),i=iv(n.seconds,r.seconds);return 0!==i?i:iv(n.nanos,r.nanos)}function mm(e){return ym(e)}function ym(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Xv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?em(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,dv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Ve(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ym(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Ve(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ym(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):zp();var t,n}function gm(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function km(e){return!!e&&"integerValue"in e}function wm(e){return!!e&&"arrayValue"in e}function bm(e){return!!e&&"nullValue"in e}function xm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _m(e){return!!e&&"mapValue"in e}function Im(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Bv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Im(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Im(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Sm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Em(e){return"nullValue"in e?lm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gm(am.empty(),dv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zp()}function Tm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gm(am.empty(),dv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?cm:zp()}function Nm(e,t){var n=pm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Cm(e,t){var n=pm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Am=function(){function e(t){je(this,e),this.value=t}return Fe(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!_m(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Im(t)}},{key:"setAll",value:function(e){var t=this,n=hv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Im(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());_m(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return hm(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];_m(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Bv(t,(function(t,n){return e[t]=n}));var r,i=Ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Im(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Dm(e){var t=[];return Bv(e.fields,(function(e,n){var r=new hv([e]);if(_m(n)){var i=Dm(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Ve(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new $v(t)}var Rm=function(){function e(t,n,r,i,a,o){je(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Fe(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Am.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Am.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=sv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,sv.min(),sv.min(),Am.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,sv.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,sv.min(),Am.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,sv.min(),Am.empty(),2)}}]),e}(),Om=Fe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;je(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Pm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Om(e,t,n,r,i,a,o)}function Lm(e){var t=Kp(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+mm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),om(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return mm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return mm(e)})).join(",")),t.ut=n}return t.ut}function jm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Xm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!hm(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ey(e.startAt,t.startAt)&&ey(e.endAt,t.endAt)}function Mm(e){return dv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Fm(e,t){return e.filters.filter((function(e){return e instanceof Bm&&e.field.isEqual(t)}))}function Vm(e,t,n){var r,i=lm,a=!0,o=Ve(Fm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=lm,c=!0;switch(u.op){case"<":case"<=":s=Em(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=lm}Nm({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Nm({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Um(e,t,n){var r,i=cm,a=!0,o=Ve(Fm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=cm,c=!0;switch(u.op){case">=":case">":s=Tm(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=cm}Cm({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Cm({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Bm=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Fe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(pm(t,this.value)):null!==t&&fm(this.value)===fm(t)&&this.at(pm(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zp()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new zm(e,t,r):"array-contains"===t?new Hm(e,r):"in"===t?new Wm(e,r):"not-in"===t?new Qm(e,r):"array-contains-any"===t?new $m(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new qm(e,n):new Km(e,n)}}]),n}(function(){return Fe((function e(){je(this,e)}))}()),zm=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this,e,r,i)).key=dv.fromName(i.referenceValue),a}return Fe(n,[{key:"matches",value:function(e){var t=dv.comparator(e.key,this.key);return this.at(t)}}]),n}(Bm),qm=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,"in",r)).keys=Gm("in",r),i}return Fe(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Bm),Km=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,"not-in",r)).keys=Gm("not-in",r),i}return Fe(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Bm);function Gm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return dv.fromName(e.referenceValue)}))}var Hm=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"array-contains",r)}return Fe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return wm(t)&&dm(t.arrayValue,this.value)}}]),n}(Bm),Wm=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"in",r)}return Fe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&dm(this.value.arrayValue,t)}}]),n}(Bm),Qm=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"not-in",r)}return Fe(n,[{key:"matches",value:function(e){if(dm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!dm(this.value.arrayValue,t)}}]),n}(Bm),$m=function(e){Be(n,e);var t=He(n);function n(e,r){return je(this,n),t.call(this,e,"array-contains-any",r)}return Fe(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return dm(t.value.arrayValue,e)}))}}]),n}(Bm),Ym=Fe((function e(t,n){je(this,e),this.position=t,this.inclusive=n})),Jm=Fe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";je(this,e),this.field=t,this.dir=n}));function Xm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Zm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?dv.comparator(dv.fromName(o.referenceValue),n.key):pm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ey(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hm(e.position[n],t.position[n]))return!1;return!0}var ty=Fe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;je(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function ny(e,t,n,r,i,a,o,u){return new ty(e,t,n,r,i,a,o,u)}function ry(e){return new ty(e)}function iy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ay(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function oy(e){var t,n=Ve(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function uy(e){return null!==e.collectionGroup}function sy(e){var t=Kp(e);if(null===t.lt){t.lt=[];var n=oy(t),r=ay(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Jm(n)),t.lt.push(new Jm(hv.keyField(),"asc"));else{var i,a=!1,o=Ve(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Jm(hv.keyField(),s))}}}return t.lt}function cy(e){var t=Kp(e);if(!t.ft)if("F"===t.limitType)t.ft=Pm(t.path,t.collectionGroup,sy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Ve(sy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Jm(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ym(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ym(t.startAt.position,t.startAt.inclusive):null;t.ft=Pm(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function ly(e,t,n){return new ty(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fy(e,t){return jm(cy(e),cy(t))&&e.limitType===t.limitType}function hy(e){return"".concat(Lm(cy(e)),"|lt:").concat(e.limitType)}function dy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(mm(t.value));var t})).join(", "),"]")),om(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return mm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return mm(e)})).join(",")),"Target(".concat(t,")")}(cy(e)),"; limitType=").concat(e.limitType,")")}function py(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ve(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ve(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Zm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,sy(e),t))&&!(e.endAt&&!function(e,t,n){var r=Zm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,sy(e),t))}(e,t)}function vy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function my(e){return function(t,n){var r,i=!1,a=Ve(sy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=yy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function yy(e,t,n){var r=e.field.isKeyField()?dv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?pm(r,i):zp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zp()}}function gy(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:um(t)?"-0":t}}function ky(e){return{integerValue:""+e}}function wy(e,t){return sm(t)?ky(t):gy(e,t)}var by=Fe((function e(){je(this,e),this._=void 0}));function xy(e,t,n){return e instanceof Sy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ey?Ty(e,t):e instanceof Ny?Cy(e,t):function(e,t){var n=Iy(e,t),r=Dy(n)+Dy(e._t);return km(n)&&km(e._t)?ky(r):gy(e.wt,r)}(e,t)}function _y(e,t,n){return e instanceof Ey?Ty(e,t):e instanceof Ny?Cy(e,t):n}function Iy(e,t){return e instanceof Ay?km(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Sy=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n)}(by),Ey=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).elements=e,r}return Fe(n)}(by);function Ty(e,t){var n,r=Ry(t),i=Ve(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return hm(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ny=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).elements=e,r}return Fe(n)}(by);function Cy(e,t){var n,r=Ry(t),i=Ve(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!hm(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ay=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).wt=e,i._t=r,i}return Fe(n)}(by);function Dy(e){return Zv(e.integerValue||e.doubleValue)}function Ry(e){return wm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Oy=Fe((function e(t,n){je(this,e),this.field=t,this.transform=n}));var Py=Fe((function e(t,n){je(this,e),this.version=t,this.transformResults=n})),Ly=function(){function e(t,n){je(this,e),this.updateTime=t,this.exists=n}return Fe(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function jy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var My=Fe((function e(){je(this,e)}));function Fy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yy(e.key,Ly.none()):new qy(e.key,e.data,Ly.none());var n,r=e.data,i=Am.empty(),a=new Hv(hv.comparator),o=Ve(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Ky(e.key,i,new $v(a.toArray()),Ly.none())}function Vy(e,t,n){e instanceof qy?function(e,t,n){var r=e.value.clone(),i=Hy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ky?function(e,t,n){if(jy(e.precondition,t)){var r=Hy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Uy(e,t,n,r){return e instanceof qy?function(e,t,n,r){if(!jy(e.precondition,t))return n;var i=e.value.clone(),a=Wy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ky?function(e,t,n,r){if(!jy(e.precondition,t))return n;var i=Wy(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gy(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return jy(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function By(e,t){var n,r=null,i=Ve(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Iy(a.transform,o||null);null!=u&&(null===r&&(r=Am.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function zy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&av(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ey&&t instanceof Ey||e instanceof Ny&&t instanceof Ny?av(e.elements,t.elements,hm):e instanceof Ay&&t instanceof Ay?hm(e._t,t._t):e instanceof Sy&&t instanceof Sy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var qy=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return je(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Fe(n,[{key:"getFieldMask",value:function(){return null}}]),n}(My),Ky=function(e){Be(n,e);var t=He(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return je(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Fe(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(My);function Gy(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Hy(e,t,n){var r=new Map;qp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,_y(o,u,n[i]))}return r}function Wy(e,t,n){var r,i=new Map,a=Ve(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,xy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Qy,$y,Yy=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Fe(n,[{key:"getFieldMask",value:function(){return null}}]),n}(My),Jy=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Fe(n,[{key:"getFieldMask",value:function(){return null}}]),n}(My),Xy=Fe((function e(t){je(this,e),this.count=t}));function Zy(e){switch(e){default:return zp();case Gp.CANCELLED:case Gp.UNKNOWN:case Gp.DEADLINE_EXCEEDED:case Gp.RESOURCE_EXHAUSTED:case Gp.INTERNAL:case Gp.UNAVAILABLE:case Gp.UNAUTHENTICATED:return!1;case Gp.INVALID_ARGUMENT:case Gp.NOT_FOUND:case Gp.ALREADY_EXISTS:case Gp.PERMISSION_DENIED:case Gp.FAILED_PRECONDITION:case Gp.ABORTED:case Gp.OUT_OF_RANGE:case Gp.UNIMPLEMENTED:case Gp.DATA_LOSS:return!0}}function eg(e){if(void 0===e)return Vp("GRPC error has no .code"),Gp.UNKNOWN;switch(e){case Qy.OK:return Gp.OK;case Qy.CANCELLED:return Gp.CANCELLED;case Qy.UNKNOWN:return Gp.UNKNOWN;case Qy.DEADLINE_EXCEEDED:return Gp.DEADLINE_EXCEEDED;case Qy.RESOURCE_EXHAUSTED:return Gp.RESOURCE_EXHAUSTED;case Qy.INTERNAL:return Gp.INTERNAL;case Qy.UNAVAILABLE:return Gp.UNAVAILABLE;case Qy.UNAUTHENTICATED:return Gp.UNAUTHENTICATED;case Qy.INVALID_ARGUMENT:return Gp.INVALID_ARGUMENT;case Qy.NOT_FOUND:return Gp.NOT_FOUND;case Qy.ALREADY_EXISTS:return Gp.ALREADY_EXISTS;case Qy.PERMISSION_DENIED:return Gp.PERMISSION_DENIED;case Qy.FAILED_PRECONDITION:return Gp.FAILED_PRECONDITION;case Qy.ABORTED:return Gp.ABORTED;case Qy.OUT_OF_RANGE:return Gp.OUT_OF_RANGE;case Qy.UNIMPLEMENTED:return Gp.UNIMPLEMENTED;case Qy.DATA_LOSS:return Gp.DATA_LOSS;default:return zp()}}($y=Qy||(Qy={}))[$y.OK=0]="OK",$y[$y.CANCELLED=1]="CANCELLED",$y[$y.UNKNOWN=2]="UNKNOWN",$y[$y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$y[$y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$y[$y.NOT_FOUND=5]="NOT_FOUND",$y[$y.ALREADY_EXISTS=6]="ALREADY_EXISTS",$y[$y.PERMISSION_DENIED=7]="PERMISSION_DENIED",$y[$y.UNAUTHENTICATED=16]="UNAUTHENTICATED",$y[$y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$y[$y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$y[$y.ABORTED=10]="ABORTED",$y[$y.OUT_OF_RANGE=11]="OUT_OF_RANGE",$y[$y.UNIMPLEMENTED=12]="UNIMPLEMENTED",$y[$y.INTERNAL=13]="INTERNAL",$y[$y.UNAVAILABLE=14]="UNAVAILABLE",$y[$y.DATA_LOSS=15]="DATA_LOSS";var tg=function(){function e(t,n){je(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Fe(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Ve(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Bv(this.inner,(function(t,n){var r,i=Ve(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return zv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ng=new qv(dv.comparator);function rg(){return ng}var ig=new qv(dv.comparator);function ag(){for(var e=ig,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function og(e){var t=ig;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function ug(){return cg()}function sg(){return cg()}function cg(){return new tg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var lg=new qv(dv.comparator),fg=new Hv(dv.comparator);function hg(){for(var e=fg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var dg=new Hv(iv);function pg(){return dg}var vg=function(){function e(t,n,r,i,a){je(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Fe(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,mg.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(sv.min(),r,pg(),rg(),hg())}}]),e}(),mg=function(){function e(t,n,r,i,a){je(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Fe(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Yv.EMPTY_BYTE_STRING,n,hg(),hg(),hg())}}]),e}(),yg=Fe((function e(t,n,r,i){je(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),gg=Fe((function e(t,n){je(this,e),this.targetId=t,this.It=n})),kg=Fe((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;je(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),wg=function(){function e(){je(this,e),this.Tt=0,this.Et=_g(),this.At=Yv.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return Fe(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=hg(),t=hg(),n=hg();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zp()}})),new mg(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=_g()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),bg=function(){function e(t){je(this,e),this.Ot=t,this.Ft=new Map,this.$t=rg(),this.Bt=xg(),this.Lt=new Hv(iv)}return Fe(e,[{key:"Ut",value:function(e){var t,n=Ve(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ve(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:zp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Mm(i))if(0===n){var a=new dv(i.path);this.Kt(t,a,Rm.newNoDocument(a,sv.min()))}else qp(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Mm(a.target)){var o=new dv(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Rm.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=hg();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new vg(e,n,this.Lt,this.$t,r);return this.$t=rg(),this.Bt=xg(),this.Lt=new Hv(iv),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new wg,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new Hv(iv),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Fp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new wg),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function xg(){return new qv(dv.comparator)}function _g(){return new qv(dv.comparator)}var Ig={asc:"ASCENDING",desc:"DESCENDING"},Sg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eg=Fe((function e(t,n){je(this,e),this.databaseId=t,this.dt=n}));function Tg(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ng(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Cg(e,t){return Tg(e,t.toTimestamp())}function Ag(e){return qp(!!e),sv.fromTimestamp(function(e){var t=Xv(e);return new uv(t.seconds,t.nanos)}(e))}function Dg(e,t){return function(e){return new lv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Rg(e){var t=lv.fromString(e);return qp(tk(t)),t}function Og(e,t){return Dg(e.databaseId,t.path)}function Pg(e,t){var n=Rg(t);if(n.get(1)!==e.databaseId.projectId)throw new Hp(Gp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hp(Gp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new dv(Fg(n))}function Lg(e,t){return Dg(e.databaseId,t)}function jg(e){var t=Rg(e);return 4===t.length?lv.emptyPath():Fg(t)}function Mg(e){return new lv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fg(e){return qp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vg(e,t,n){return{name:Og(e,t),fields:n.value.mapValue.fields}}function Ug(e,t,n){var r=Pg(e,t.name),i=Ag(t.updateTime),a=new Am({mapValue:{fields:t.fields}}),o=Rm.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Bg(e,t){return"found"in t?function(e,t){qp(!!t.found),t.found.name,t.found.updateTime;var n=Pg(e,t.found.name),r=Ag(t.found.updateTime),i=new Am({mapValue:{fields:t.found.fields}});return Rm.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){qp(!!t.missing),qp(!!t.readTime);var n=Pg(e,t.missing),r=Ag(t.readTime);return Rm.newNoDocument(n,r)}(e,t):zp()}function zg(e,t){var n;if(t instanceof qy)n={update:Vg(e,t.key,t.value)};else if(t instanceof Yy)n={delete:Og(e,t.key)};else if(t instanceof Ky)n={update:Vg(e,t.key,t.data),updateMask:ek(t.fieldMask)};else{if(!(t instanceof Jy))return zp();n={verify:Og(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Sy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ey)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ny)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ay)return{fieldPath:t.field.canonicalString(),increment:n._t};throw zp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zp()}(e,t.precondition)),n}function qg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ly.updateTime(Ag(e.updateTime)):void 0!==e.exists?Ly.exists(e.exists):Ly.none()}(t.currentDocument):Ly.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)qp("REQUEST_TIME"===t.setToServerValue),n=new Sy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ey(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ny(i)}else"increment"in t?n=new Ay(e,t.increment):zp();var a=hv.fromServerFormat(t.fieldPath);return new Oy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Pg(e,t.update.name),a=new Am({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new $v(t.map((function(e){return hv.fromServerFormat(e)})))}(t.updateMask);return new Ky(i,a,o,n,r)}return new qy(i,a,n,r)}if(t.delete){var u=Pg(e,t.delete);return new Yy(u,n)}if(t.verify){var s=Pg(e,t.verify);return new Jy(s,n)}return zp()}function Kg(e,t){return{documents:[Lg(e,t.path)]}}function Gg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Lg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Lg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(xm(e.value))return{unaryFilter:{field:Yg(e.field),op:"IS_NAN"}};if(bm(e.value))return{unaryFilter:{field:Yg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xm(e.value))return{unaryFilter:{field:Yg(e.field),op:"IS_NOT_NAN"}};if(bm(e.value))return{unaryFilter:{field:Yg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yg(e.field),op:$g(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Yg(e.field),direction:Qg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||om(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Hg(e){var t=jg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Wg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Jm(Jg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return om(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ym(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ym(n,t)}(n.endAt)),ny(t,i,u,o,s,"F",c,l)}function Wg(e){return e?void 0!==e.unaryFilter?[Zg(e)]:void 0!==e.fieldFilter?[Xg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Wg(e)})).reduce((function(e,t){return e.concat(t)})):zp():[]}function Qg(e){return Ig[e]}function $g(e){return Sg[e]}function Yg(e){return{fieldPath:e.canonicalString()}}function Jg(e){return hv.fromServerFormat(e.fieldPath)}function Xg(e){return Bm.create(Jg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zp()}}(e.fieldFilter.op),e.fieldFilter.value)}function Zg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Jg(e.unaryFilter.field);return Bm.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Jg(e.unaryFilter.field);return Bm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Jg(e.unaryFilter.field);return Bm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Jg(e.unaryFilter.field);return Bm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zp()}}function ek(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function tk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function nk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ik(t)),t=rk(e.get(n),t);return ik(t)}function rk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ik(e){return e+"\x01\x01"}function ak(e){var t=e.length;if(qp(t>=2),2===t)return qp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),lv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&zp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:zp()}a=o+2}return new lv(r)}var ok=["userId","batchId"];function uk(e,t){return[e,nk(t)]}function sk(e,t,n){return[e,nk(t),n]}var ck={},lk=["prefixPath","collectionGroup","readTime","documentId"],fk=["prefixPath","collectionGroup","documentId"],hk=["collectionGroup","readTime","prefixPath","documentId"],dk=["canonicalId","targetId"],pk=["targetId","path"],vk=["path","targetId"],mk=["collectionId","parent"],yk=["indexId","uid"],gk=["uid","sequenceNumber"],kk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wk=["indexId","uid","orderedDocumentKey"],bk=["userId","collectionPath","documentId"],xk=["userId","collectionPath","largestBatchId"],_k=["userId","collectionGroup","largestBatchId"],Ik=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Sk=[].concat(Et(Ik),["documentOverlays"]),Ek=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tk=Ek,Nk=[].concat(Tk,["indexConfiguration","indexState","indexEntries"]),Ck=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return Fe(n)}(Iv);function Ak(e,t){var n=Kp(e);return Cv.N(n.ee,t)}var Dk=function(){function e(t,n,r,i){je(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Fe(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Ve(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Uy(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Ve(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Uy(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=sg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Fy(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(sv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),hg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&av(this.mutations,e.mutations,(function(e,t){return zy(e,t)}))&&av(this.baseMutations,e.baseMutations,(function(e,t){return zy(e,t)}))}}]),e}(),Rk=function(){function e(t,n,r,i){je(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Fe(e,null,[{key:"from",value:function(t,n,r){qp(t.mutations.length===r.length);for(var i=lg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ok=function(){function e(t,n){je(this,e),this.largestBatchId=t,this.mutation=n}return Fe(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Pk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:sv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yv.EMPTY_BYTE_STRING;je(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Fe(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Lk=Fe((function e(t){je(this,e),this.ne=t}));function jk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Og(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Tg(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fk(t.version)};else{if(!t.isUnknownDocument())return zp();r.unknownDocument={path:n.path.toArray(),version:Fk(t.version)}}return r}function Mk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Vk(e){var t=new uv(e.seconds,e.nanoseconds);return sv.fromTimestamp(t)}function Uk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return qg(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return qg(e.ne,t)})),u=uv.fromMillis(t.localWriteTimeMs);return new Dk(t.batchId,u,n,o)}function Bk(e){var t,n,r=Vk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Vk(e.lastLimboFreeSnapshotVersion):sv.min();return void 0!==e.query.documents?(qp(1===(n=e.query).documents.length),t=cy(ry(jg(n.documents[0])))):t=function(e){return cy(Hg(e))}(e.query),new Pk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Yv.fromBase64String(e.resumeToken))}function zk(e,t){var n,r=Fk(t.snapshotVersion),i=Fk(t.lastLimboFreeSnapshotVersion);n=Mm(t.target)?Kg(e.ne,t.target):Gg(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Lm(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function qk(e){var t=Hg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ly(t,t.limit,"L"):t}function Kk(e,t){return new Ok(t.largestBatchId,qg(e.ne,t.overlayMutation))}function Gk(e,t){var n=t.path.lastSegment();return[e,nk(t.path.popLast()),n]}function Hk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fk(r.readTime),documentKey:nk(r.documentKey.path),largestBatchId:r.largestBatchId}}var Wk=function(){function e(){je(this,e)}return Fe(e,[{key:"getBundleMetadata",value:function(e,t){return Qk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Vk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Qk(e).put({bundleId:(n=t).id,createTime:Fk(Ag(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return $k(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:qk(t.bundledQuery),readTime:Vk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return $k(e).put(function(e){return{name:e.name,readTime:Fk(Ag(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Qk(e){return Ak(e,"bundles")}function $k(e){return Ak(e,"namedQueries")}var Yk=function(){function e(t,n){je(this,e),this.wt=t,this.userId=n}return Fe(e,[{key:"getOverlay",value:function(e,t){var n=this;return Jk(e).get(Gk(this.userId,t)).next((function(e){return e?Kk(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=ug();return Tv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ok(t,a);i.push(r.ie(e,o))})),Tv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(nk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Jk(e).W("collectionPathOverlayIndex",i))})),Tv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ug(),a=nk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Jk(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=Ve(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Kk(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ug(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jk(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Kk(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Jk(e).put(function(e,t,n){var r=s(Gk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zg(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Jk(e){return Ak(e,"documentOverlays")}var Xk=function(){function e(){je(this,e)}return Fe(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Zv(e.integerValue));else if("doubleValue"in e){var n=Zv(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),um(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(em(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Sm(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):zp()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=Ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),dv.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Zk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ew(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Zk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xk.ye=new Xk;var tw=function(){function e(){je(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Fe(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=Ve(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=Ve(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=ew(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=ew(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),nw=function(){function e(t){je(this,e),this.Oe=t}return Fe(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),rw=function(){function e(t){je(this,e),this.Oe=t}return Fe(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),iw=function(){function e(){je(this,e),this.Oe=new tw,this.Fe=new nw(this.Oe),this.$e=new rw(this.Oe)}return Fe(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),aw=function(){function e(t,n,r,i){je(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Fe(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ow(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=uw(e.arrayValue,t.arrayValue))?n:0!==(n=uw(e.directionalValue,t.directionalValue))?n:dv.comparator(e.documentKey,t.documentKey)}function uw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var sw=function(){function e(t){je(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=Ve(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Fe(e,[{key:"Ge",value:function(e){var t=vv(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=mv(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=Ve(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),cw=function(){function e(){je(this,e),this.ze=new lw}return Fe(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Tv.resolve()}},{key:"getCollectionParents",value:function(e,t){return Tv.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Tv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Tv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Tv.resolve(null)}},{key:"getIndexType",value:function(e,t){return Tv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Tv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Tv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Tv.resolve(bv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Tv.resolve(bv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Tv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Tv.resolve()}}]),e}(),lw=function(){function e(){je(this,e),this.index={}}return Fe(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hv(lv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Hv(lv.comparator)).toArray()}}]),e}(),fw=new Uint8Array(0),hw=function(){function e(t,n){je(this,e),this.user=t,this.databaseId=n,this.He=new lw,this.Je=new tg((function(e){return Lm(e)}),(function(e,t){return jm(e,t)})),this.uid=t.uid||""}return Fe(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:nk(i)};return dw(e).put(a)}return Tv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ov(t),""],!1,!0);return dw(e).K(r).next((function(e){var r,i=Ve(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ak(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=vw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=mw(e);return a.next((function(e){o.put(Hk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=vw(e),r=mw(e),i=pw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=pw(e),i=!0,a=new Map;return Tv.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=hg(),o=[];return Tv.forEach(a,(function(i,a){var u;Fp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Lm(t)));var s=function(e,t){var n=vv(t);if(void 0===n)return null;var r,i=Ve(Fm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Ve(mv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Ve(Fm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Ve(mv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Vm(e,o.fieldPath,e.startAt):Um(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ym(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Ve(mv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Um(e,o.fieldPath,e.endAt):Vm(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ym(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Tv.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=dv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Tv.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):fw,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Et(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new aw(e,dv.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new aw(e,dv.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new sw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Ve(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Tv.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Hv(hv.comparator),r=!1,i=Ve(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Ve(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new iw,i=Ve(mv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Xk.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new iw;return Xk.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new iw;return Xk.ye.re(gm(this.databaseId,t),n.Be(function(e){var t=mv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new iw);var i,a=0,o=Ve(mv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Ve(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&wm(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);Xk.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=Et(e),a=[],o=Ve(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Ve(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new iw;f.seed(l.Me()),Xk.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Bm&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=vw(e),i=mw(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Tv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new gv(t.sequenceNumber,new bv(Vk(t.readTime),new dv(ak(t.documentKey)),t.largestBatchId)):gv.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new yv(hv.fromServerFormat(n),r)}));return new pv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:iv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=vw(e),a=mw(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Tv.forEach(t,(function(t){return a.put(Hk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Tv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Tv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Tv.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Tv.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return pw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return pw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=pw(e),i=new Hv(ow);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new aw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new Hv(ow),r=this.on(t,e);if(null==r)return n;var i=vv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(wm(a)){var o,u=Ve(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new aw(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new aw(t.indexId,e.key,fw,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Fp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Qv(a),s=Qv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Qv(o)):l?(i(u),u=Qv(a)):(u=Qv(a),s=Qv(o))}}(r,i,ow,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Tv.waitFor(o)}},{key:"ln",value:function(e){var t=1;return mw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return ow(e,t)})).filter((function(e,t,n){return!t||0!==ow(e,n[t-1])}));var r=[];r.push(e);var i,a=Ve(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=ow(o,e),s=ow(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,fw,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,fw,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(yw)}},{key:"getMinOffset",value:function(e,t){var n=this;return Tv.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||zp()}))})).next(yw)}}]),e}();function dw(e){return Ak(e,"collectionParents")}function pw(e){return Ak(e,"indexEntries")}function vw(e){return Ak(e,"indexConfiguration")}function mw(e){return Ak(e,"indexState")}function yw(e){qp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;xv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new bv(t.readTime,t.documentKey,n)}var gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kw=function(){function e(t,n,r){je(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Fe(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ww(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){qp(1===u)})));var c,l=[],f=Ve(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=sk(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Tv.waitFor(a).next((function(){return l}))}function bw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zp();t=e.noDocument}return JSON.stringify(t).length}kw.DEFAULT_COLLECTION_PERCENTILE=10,kw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kw.DEFAULT=new kw(41943040,kw.DEFAULT_COLLECTION_PERCENTILE,kw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kw.DISABLED=new kw(-1,0,0);var xw=function(){function e(t,n,r,i){je(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return Fe(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Iw(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Sw(e),o=Iw(e);return o.add({}).next((function(u){qp("number"==typeof u);var s,c=new Dk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return zg(e.ne,t)})),i=n.mutations.map((function(t){return zg(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new Hv((function(e,t){return iv(e.canonicalString(),t.canonicalString())})),d=Ve(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=sk(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ck))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Tv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Iw(e).get(t).next((function(e){return e?(qp(e.userId===n.userId),Uk(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Tv.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Iw(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(qp(t.batchId>=r),a=Uk(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Iw(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Iw(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return Uk(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=uk(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Sw(e).J({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=ak(l);if(c===n.userId&&t.path.isEqual(h))return Iw(e).get(f).next((function(e){if(!e)throw zp();qp(e.userId===n.userId),a.push(Uk(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Hv(iv),i=[];return t.forEach((function(t){var a=uk(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Sw(e).J({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=ak(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Tv.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=uk(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Hv(iv);return Sw(e).J({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=ak(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Iw(e).get(t).next((function(e){if(null===e)throw zp();qp(e.userId===n.userId),r.push(Uk(n.wt,e))})))})),Tv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ww(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Tv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Tv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Sw(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ak(e[1]);i.push(a)}else r.done()})).next((function(){qp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return _w(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Ew(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return qp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function _w(e,t,n){var r=uk(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Sw(e).J({range:a,H:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Iw(e){return Ak(e,"mutations")}function Sw(e){return Ak(e,"documentMutations")}function Ew(e){return Ak(e,"mutationQueues")}var Tw=function(){function e(t){je(this,e),this.En=t}return Fe(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Nw=function(){function e(t,n){je(this,e),this.referenceDelegate=t,this.wt=n}return Fe(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Tw(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return sv.fromTimestamp(new uv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Cw(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return qp(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Cw(e).J((function(o,u){var s=Bk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Tv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Cw(e).J((function(e,n){var r=Bk(n);t(r)}))}},{key:"bn",value:function(e){return Aw(e).get("targetGlobalKey").next((function(e){return qp(null!==e),e}))}},{key:"Pn",value:function(e,t){return Aw(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Cw(e).put(zk(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Lm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cw(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Bk(n);jm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Dw(e);return t.forEach((function(t){var o=nk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Tv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Dw(e);return Tv.forEach(t,(function(t){var a=nk(t.path);return Tv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Dw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Dw(e),i=hg();return r.J({range:n,H:!0},(function(e,t,n){var r=ak(e[1]),a=new dv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=nk(t.path),r=IDBKeyRange.bound([n],[ov(n)],!1,!0),i=0;return Dw(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Cw(e).get(t).next((function(e){return e?Bk(e):null}))}}]),e}();function Cw(e){return Ak(e,"targets")}function Aw(e){return Ak(e,"targetGlobal")}function Dw(e){return Ak(e,"targetDocuments")}function Rw(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=iv(r,o);return 0===c?iv(i,u):c}var Ow=function(){function e(t){je(this,e),this.Sn=t,this.buffer=new Hv(Rw),this.Dn=0}return Fe(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Rw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Pw=function(){function e(t,n,r){je(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return Fe(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;Fp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Rv(e.t0)){e.next=12;break}Fp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Sv(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Lw=function(){function e(t,n){je(this,e),this.Mn=t,this.params=n}return Fe(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Tv.resolve(Vv.ot);var r=new Ow(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Fp("LruGarbageCollector","Garbage collection skipped; disabled"),Tv.resolve(gw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Fp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),gw):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Fp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Mp()<=Ot.DEBUG&&Fp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Tv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),jw=function(){function e(t,n){je(this,e),this.db=t,this.garbageCollector=function(e,t){return new Lw(e,t)}(this,n)}return Fe(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Mw(e,n)}},{key:"removeReference",value:function(e,t,n){return Mw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Mw(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Ew(e).Y((function(r){return _w(e,r,t).next((function(e){return e&&(n=!0),Tv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,sv.min()),Dw(e).delete([0,nk(o.path)])}))}));i.push(s)}})).next((function(){return Tv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Mw(e,t)}},{key:"Ln",value:function(e,t){var n,r=Dw(e),i=Vv.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Vv.ot&&t(new dv(ak(n)),i),i=c,n=u):i=Vv.ot})).next((function(){i!==Vv.ot&&t(new dv(ak(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Mw(e,t){return Dw(e).put(function(e,t){return{targetId:0,path:nk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Fw=function(){function e(){je(this,e),this.changes=new tg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Fe(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Rm.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Tv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Vw=function(){function e(t){je(this,e),this.wt=t}return Fe(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return qw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return qw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Mk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Rm.newInvalidDocument(t);return qw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kw(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Rm.newInvalidDocument(t)};return qw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kw(t))},(function(e,i){r={document:n.Kn(t,i),size:bw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=rg();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=rg(),i=new qv(dv.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,bw(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Tv.resolve();var r=new Hv(Hw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Kw(r.first()),Kw(r.last())),a=r.getIterator(),o=a.getNext();return qw(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=dv.fromSegments([].concat(Et(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Hw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(Kw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Mk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qw(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=rg(),i=Ve(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(dv.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=rg(),o=Gw(t,n),u=Gw(t,bv.max());return qw(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(dv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Bw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return zw(e).get("remoteDocumentGlobalKey").next((function(e){return qp(!!e),e}))}},{key:"qn",value:function(e,t){return zw(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ug(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=dv.fromSegments(t.noDocument.path),i=Vk(t.noDocument.readTime);n=Rm.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zp();var a=dv.fromSegments(t.unknownDocument.path),o=Vk(t.unknownDocument.version);n=Rm.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new uv(e[0],e[1]);return sv.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(sv.min()))return n}return Rm.newInvalidDocument(e)}}]),e}();function Uw(e){return new Vw(e)}var Bw=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new tg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Fe(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Hv((function(e,t){return iv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=jk(t.zn.wt,o);i=i.add(a.path.popLast());var c=bw(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=jk(t.zn.wt,o.convertToNoDocument(sv.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Tv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Fw);function zw(e){return Ak(e,"remoteDocumentGlobal")}function qw(e){return Ak(e,"remoteDocumentsV14")}function Kw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Gw(e,t){var n=t.documentKey.path.toArray();return[e,Mk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Hw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=iv(n[a],r[a]))return i;return(i=iv(n.length,r.length))||((i=iv(n[n.length-2],r[r.length-2]))||iv(n[n.length-1],r[r.length-1]))}var Ww=Fe((function e(t,n){je(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Qw=function(){function e(t,n,r,i){je(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Fe(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Uy(r.mutation,e,$v.empty(),uv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,hg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hg(),i=ug();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ag();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=ug();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,hg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=rg(),a=cg(),o=cg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ky)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Uy(o.mutation,t,o.mutation.getFieldMask(),uv.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ww(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=cg(),i=new qv((function(e,t){return e-t})),a=hg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Ve(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||$v.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||hg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=sg();c.forEach((function(e){if(!a.has(e)){var n=Fy(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Tv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return dv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Tv.resolve(ug()),u=-1,s=a;return o.next((function(t){return Tv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Tv.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,hg())})).next((function(e){return{batchId:u,changes:og(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new dv(t)).next((function(e){var t=ag();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ag();return this.indexManager.getCollectionParents(e,i).next((function(o){return Tv.forEach(o,(function(o){var u=function(e,t){return new ty(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Rm.newInvalidDocument(n)))}));var n=ag();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Uy(a.mutation,i,$v.empty(),uv.now()),py(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Tv.resolve(Rm.newInvalidDocument(t))}}]),e}(),$w=function(){function e(t){je(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return Fe(e,[{key:"getBundleMetadata",value:function(e,t){return Tv.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ag(n.createTime)}),Tv.resolve()}},{key:"getNamedQuery",value:function(e,t){return Tv.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:qk(e.bundledQuery),readTime:Ag(e.readTime)}}(t)),Tv.resolve()}}]),e}(),Yw=function(){function e(){je(this,e),this.overlays=new qv(dv.comparator),this.Xn=new Map}return Fe(e,[{key:"getOverlay",value:function(e,t){return Tv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=ug();return Tv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Tv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Tv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ug(),i=t.length+1,a=new dv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Tv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new qv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ug(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ug(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Tv.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ok(t,n));var a=this.Xn.get(t);void 0===a&&(a=hg(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Jw=function(){function e(){je(this,e),this.Zn=new Hv(Xw.ts),this.es=new Hv(Xw.ns)}return Fe(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Xw(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Xw(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new dv(new lv([])),r=new Xw(n,e),i=new Xw(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new dv(new lv([])),n=new Xw(t,e),r=new Xw(t,e+1),i=hg();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Xw(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Xw=function(){function e(t,n){je(this,e),this.key=t,this.ls=n}return Fe(e,null,[{key:"ts",value:function(e,t){return dv.comparator(e.key,t.key)||iv(e.ls,t.ls)}},{key:"ns",value:function(e,t){return iv(e.ls,t.ls)||dv.comparator(e.key,t.key)}}]),e}(),Zw=function(){function e(t,n){je(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Hv(Xw.ts)}return Fe(e,[{key:"checkEmpty",value:function(e){return Tv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Dk(i,t,n,r);this.mutationQueue.push(a);var o,u=Ve(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Xw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Tv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Tv.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Tv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Tv.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Tv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Xw(t,0),i=new Xw(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Tv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Hv(iv);return t.forEach((function(e){var t=new Xw(e,0),i=new Xw(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Tv.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;dv.isDocumentKey(i)||(i=i.child(""));var a=new Xw(new dv(i),0),o=new Hv(iv);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Tv.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;qp(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Tv.forEach(t.mutations,(function(i){var a=new Xw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Xw(t,0),r=this.ds.firstAfterOrEqual(n);return Tv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Tv.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),eb=function(){function e(t){je(this,e),this.ps=t,this.docs=new qv(dv.comparator),this.size=0}return Fe(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Tv.resolve(n?n.document.mutableCopy():Rm.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=rg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Rm.newInvalidDocument(e))})),Tv.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=rg(),i=new dv(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||xv(wv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Tv.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){zp()}},{key:"Is",value:function(e,t){return Tv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new tb(this)}},{key:"getSize",value:function(e){return Tv.resolve(this.size)}}]),e}(),tb=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).zn=e,r}return Fe(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Tv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Fw),nb=function(){function e(t){je(this,e),this.persistence=t,this.Ts=new tg((function(e){return Lm(e)}),jm),this.lastRemoteSnapshotVersion=sv.min(),this.highestTargetId=0,this.Es=0,this.As=new Jw,this.targetCount=0,this.Rs=Tw.An()}return Fe(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Tv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Tv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Tv.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Tv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Tv.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Tw(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Tv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Tv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Tv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Tv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Tv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Tv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Tv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Tv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Tv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Tv.resolve(n)}},{key:"containsKey",value:function(e,t){return Tv.resolve(this.As.containsKey(t))}}]),e}(),rb=function(){function e(t,n){var r=this;je(this,e),this.bs={},this.overlays={},this.Ps=new Vv(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new nb(this),this.indexManager=new cw,this.remoteDocumentCache=new eb((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Lk(n),this.Ds=new $w(this.wt)}return Fe(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Yw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Zw(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Fp("MemoryPersistence","Starting transaction:",e);var i=new ib(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Tv.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),ib=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Fe(n)}(Iv),ab=function(){function e(t){je(this,e),this.persistence=t,this.ks=new Jw,this.Ms=null}return Fe(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw zp()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Tv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Tv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Tv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tv.forEach(this.Fs,(function(r){var i=dv.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,sv.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Tv.or([function(){return Tv.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),ob=function(){function e(t){je(this,e),this.wt=t}return Fe(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Nv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ok,{unique:!0}),e.createObjectStore("documentMutations")}(e),ub(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Tv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ub(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ok,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Tv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:bk});t.createIndex("collectionPathOverlayIndex",xk,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",_k,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:lk});t.createIndex("documentKeyIndex",fk),t.createIndex("collectionGroupIndex",hk)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:yk}).createIndex("sequenceNumberIndex",gk,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:kk}).createIndex("documentKeyIndex",wk,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=bw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Tv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Tv.forEach(r,(function(r){qp(r.userId===n.userId);var i=Uk(t.wt,r);return ww(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new lv(n),o=function(e){return[0,nk(e)]}(a);r.push(t.get(o).next((function(n){return n?Tv.resolve():function(n){return t.put({targetId:0,path:nk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Tv.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:mk});var n=t.store("collectionParents"),r=new lw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:nk(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new lv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],ak(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Bk(r),a=zk(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new dv(lv.fromString(i.document.name).popFirst(5)):i.noDocument?dv.fromSegments(i.noDocument.path):i.unknownDocument?dv.fromSegments(i.unknownDocument.path):zp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Tv.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=Uw(this.wt),a=new rb(ab.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:hg();Uk(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Tv.forEach(r,(function(e,r){var o=new Pp(r),u=Yk.se(n.wt,o),s=a.getIndexManager(o),c=xw.se(o,n.wt,s,a.referenceDelegate);return new Qw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Ck(t,Vv.ot),e).next()}))}))}}]),e}();function ub(e){e.createObjectStore("targetDocuments",{keyPath:pk}).createIndex("documentTargetsIndex",vk,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dk,{unique:!0}),e.createObjectStore("targetGlobal")}var sb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(je(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new Hp(Gp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jw(this,i),this.ei=n+"main",this.wt=new Lk(s),this.ni=new Cv(this.ei,this.Hs,new ob(this.wt)),this.Vs=new Nw(this.referenceDelegate,this.wt),this.remoteDocumentCache=Uw(this.wt),this.Ds=new Wk,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&Vp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Fe(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Hp(Gp.FAILED_PRECONDITION,sb);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new Vv(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=Nt(It().mark((function n(r){return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=Nt(It().mark((function t(n){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return fb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Rv(t))return Fp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Fp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return lb(e).get("owner").next((function(e){return Tv.resolve(t.di(e))}))}},{key:"_i",value:function(e){return fb(e).delete(this.clientId)}},{key:"wi",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i,a=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ak(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Tv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=Ve(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Tv.resolve(!0):lb(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new Hp(Gp.FAILED_PRECONDITION,sb);return!1}}return!(!t.networkEnabled||!t.inForeground)||fb(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Fp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Nt(It().mark((function e(){var t=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ck(e,Vv.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return fb(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return xw.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new hw(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Yk.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Fp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Nk:14===i?Tk:13===i?Ek:12===i?Sk:11===i?Ik:void zp();return this.ni.runTransaction(e,o,u,(function(i){return a=new Ck(i,r.Ps?r.Ps.next():Vv.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw Vp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new Hp(Gp.FAILED_PRECONDITION,_v);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return lb(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Hp(Gp.FAILED_PRECONDITION,sb)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lb(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=lb(e);return n.get("owner").next((function(e){return t.di(e)?(Fp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Tv.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Vp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!at()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Fp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Vp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Ol){Vp("Failed to set zombie client id.",Ol)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Ol){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Cv.V()}}]),e}();function lb(e){return Ak(e,"owner")}function fb(e){return Ak(e,"clientMetadata")}function hb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var db=function(){function e(t,n,r,i){je(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return Fe(e,null,[{key:"Vi",value:function(t,n){var r,i=hg(),a=hg(),o=Ve(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),pb=function(){function e(){je(this,e),this.Si=!1}return Fe(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(iy(t))return Tv.resolve(null);var r=cy(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ly(t,null,"F"),r=cy(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=hg.apply(void 0,Et(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,ly(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return iy(t)||r.isEqual(sv.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(Mp()<=Ot.DEBUG&&Fp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dy(t)),i.Oi(e,o,t,kv(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new Hv(my(e));return t.forEach((function(t,r){py(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Mp()<=Ot.DEBUG&&Fp("QueryEngine","Using full collection scan to execute query:",dy(t)),this.Di.getDocumentsMatchingQuery(e,t,bv.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),vb=function(){function e(t,n,r,i){je(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new qv(iv),this.Bi=new tg((function(e){return Lm(e)}),jm),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return Fe(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function mb(e,t,n,r){return new vb(e,t,n,r)}function yb(e,t){return gb.apply(this,arguments)}function gb(){return gb=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=hg(),s=Ve(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Ve(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Ve(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Ve(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}function kb(e,t){var n=Kp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Tv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);qp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=hg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function wb(e){var t=Kp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function bb(e,t){var n=Kp(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Yv.EMPTY_BYTE_STRING,sv.min()).withLastLimboFreeSnapshotVersion(sv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=rg(),s=hg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(xb(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(sv.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Tv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function xb(e,t,n){var r=hg(),i=hg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=rg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(sv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Fp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function _b(e,t){var n=Kp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ib(e,t){var n=Kp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Tv.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Pk(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Sb(e,t,n){return Eb.apply(this,arguments)}function Eb(){return Eb=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kp(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Rv(e.t1)){e.next=12;break}throw e.t1;case 12:Fp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Eb.apply(this,arguments)}function Tb(e,t,n){var r=Kp(e),i=sv.min(),a=hg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Kp(e),i=r.Bi.get(n);return void 0!==i?Tv.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,cy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:sv.min(),n?a:hg())})).next((function(e){return Ab(r,vy(t),e),{documents:e,ji:a}}))}))}function Nb(e,t){var n=Kp(e),r=Kp(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Cb(e,t){var n=Kp(e),r=n.Li.get(t)||sv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,kv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Ab(n,t,e),e}))}function Ab(e,t,n){var r=sv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Db(e,t,n,r){return Rb.apply(this,arguments)}function Rb(){return Rb=Nt(It().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Kp(t),o=hg(),u=rg(),s=Ve(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Ib(a,function(e){return cy(ry(lv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return xb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Ob(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=Nt(It().mark((function e(t,n){var r,i,a,o=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:hg(),e.next=3,Ib(t,cy(qk(n.bundledQuery)));case 3:return i=e.sent,a=Kp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ag(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Yv.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Lb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function jb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Mb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Fb=function(){function e(t,n,r,i){je(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Fe(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Hp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Vp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Vb=function(){function e(t,n,r){je(this,e),this.targetId=t,this.state=n,this.error=r}return Fe(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hp(i.error.code,i.error.message))),a?new e(t,i.state,r):(Vp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ub=function(){function e(t,n){je(this,e),this.clientId=t,this.activeTargetIds=n}return Fe(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=pg(),o=0;i&&o<r.activeTargetIds.length;++o)i=sm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Vp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Bb=function(){function e(t,n){je(this,e),this.clientId=t,this.onlineState=n}return Fe(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Vp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),zb=function(){function e(){je(this,e),this.activeTargetIds=pg()}return Fe(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),qb=function(){function e(t,n,r,i,a){je(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new qv(iv),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Lb(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new zb),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Fe(e,[{key:"start",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=Ve(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Lb(this.persistenceKey,i)))&&(o=Ub.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=Ve(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Mb(this.persistenceKey,e));if(n){var r=Vb.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Mb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Fp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Fp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Fp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Fp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Vp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(Nt(It().mark((function e(){var r,i,a,o,u,s,c;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=Vv.ot;if(null!=e)try{var n=JSON.parse(e);qp("number"==typeof n),t=n}catch(e){Vp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Vv.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Fb(this.currentUser,e,t,n),i=jb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=jb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Mb(this.persistenceKey,e),i=new Vb(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Ub.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Fb.Ji(new Pp(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Vb.Ji(r,t)}},{key:"wr",value:function(e){return Bb.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Fp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=pg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Kb=function(){function e(){je(this,e),this.Fr=new zb,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Fe(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new zb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Gb=function(){function e(){je(this,e)}return Fe(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Hb=function(){function e(){var t=this;je(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return Fe(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Fp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ve(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Fp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ve(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Wb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Qb=function(){function e(t){je(this,e),this.jr=t.jr,this.Wr=t.Wr}return Fe(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),$b=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Fe(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Rp;o.listenOnce(Tp.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ep.NO_ERROR:var t=o.getResponseJson();Fp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ep.TIMEOUT:Fp("Connection",'RPC "'+e+'" timed out'),a(new Hp(Gp.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:var n=o.getStatus();if(Fp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gp).indexOf(t)>=0?t:Gp.UNKNOWN}(r.status);a(new Hp(u,r.message))}else a(new Hp(Gp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Hp(Gp.UNAVAILABLE,"Connection failed."));break;default:zp()}}finally{Fp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ip(),a=Sp(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ap({})),this.uo(o.initMessageHeaders,t,n),it()||ut()||rt().indexOf("Electron/")>=0||st()||rt().indexOf("MSAppHost/")>=0||ot()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Fp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Qb({jr:function(e){l?Fp("Connection","Not sending because WebChannel is closed:",e):(c||(Fp("Connection","Opening WebChannel transport."),s.open(),c=!0),Fp("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Dp.EventType.OPEN,(function(){l||Fp("Connection","WebChannel transport opened.")})),h(s,Dp.EventType.CLOSE,(function(){l||(l=!0,Fp("Connection","WebChannel transport closed"),f.eo())})),h(s,Dp.EventType.ERROR,(function(e){l||(l=!0,Up("Connection","WebChannel transport errored:",e),f.eo(new Hp(Gp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Dp.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];qp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Fp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Qy[e];if(void 0!==t)return eg(t)}(a),u=i.message;void 0===o&&(o=Gp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Hp(o,u)),s.close()}else Fp("Connection","WebChannel received:",n),f.no(n)}})),h(a,Np.STAT_EVENT,(function(e){e.stat===Cp.PROXY?Fp("Connection","Detected buffering proxy"):e.stat===Cp.NOPROXY&&Fp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){je(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Fe(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Fp("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Fp("RestConnection","Received: ",e),e}),(function(t){throw Up("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Wb[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Yb(){return"undefined"!=typeof window?window:null}function Jb(){return"undefined"!=typeof document?document:null}function Xb(e){return new Eg(e,!0)}var Zb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;je(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return Fe(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Fp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),ex=function(){function e(t,n,r,i,a,o,u,s){je(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Zb(t,n)}return Fe(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Gp.RESOURCE_EXHAUSTED?(Vp(n.toString()),Vp("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Gp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Hp(Gp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Fp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Fp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),tx=function(e){Be(n,e);var t=He(n);function n(e,r,i,a,o,u){var s;return je(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return Fe(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(qp(void 0===t||"string"==typeof t),Yv.fromBase64String(t||"")):(qp(void 0===t||t instanceof Uint8Array),Yv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Gp.UNKNOWN:eg(e.code);return new Hp(t,e.message||"")}(o);n=new kg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Pg(e,s.document.name),l=Ag(s.document.updateTime),f=new Am({mapValue:{fields:s.document.fields}}),h=Rm.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new yg(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Pg(e,v.document),y=v.readTime?Ag(v.readTime):sv.min(),g=Rm.newNoDocument(m,y),k=v.removedTargetIds||[];n=new yg([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Pg(e,w.document),x=w.removedTargetIds||[];n=new yg([],x,b,null)}else{if(!("filter"in t))return zp();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new Xy(I),E=_.targetId;n=new gg(E,S)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return sv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?sv.min():t.readTime?Ag(t.readTime):sv.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Mg(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Mm(r)?{documents:Kg(e,r)}:{query:Gg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ng(e,t.resumeToken):t.snapshotVersion.compareTo(sv.min())>0&&(n.readTime=Tg(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Mg(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(ex),nx=function(e){Be(n,e);var t=He(n);function n(e,r,i,a,o,u){var s;return je(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return Fe(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,rr(ze(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(qp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(qp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ag(e.updateTime):Ag(t);return n.isEqual(sv.min())&&(n=Ag(t)),new Py(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ag(e.commitTime);return this.listener.Jo(n,t)}return qp(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Mg(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zg(t.wt,e)}))};this.Oo(n)}}]),n}(ex),rx=function(e){Be(n,e);var t=He(n);function n(e,r,i,a){var o;return je(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return Fe(n,[{key:"tu",value:function(){if(this.Zo)throw new Hp(Gp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hp(Gp.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.bo.ao(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Hp(Gp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return Fe((function e(){je(this,e)}))}()),ix=function(){function e(t,n){je(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return Fe(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Vp(t),this.su=!1):Fp("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),ax=Fe((function e(t,n,r,i,a){var o=this;je(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=mx(o),!e.t0){e.next=5;break}return Fp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Kp(t)).lu.add(4),e.next=4,sx(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,ox(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new ix(r,i)}));function ox(e){return ux.apply(this,arguments)}function ux(){return ux=Nt(It().mark((function e(t){var n,r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mx(t)){e.next=18;break}n=Ve(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ux.apply(this,arguments)}function sx(e){return cx.apply(this,arguments)}function cx(){return cx=Nt(It().mark((function e(t){var n,r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ve(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),cx.apply(this,arguments)}function lx(e,t){var n=Kp(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),vx(n)?px(n):Gx(n).Co()&&hx(n,t))}function fx(e,t){var n=Kp(e),r=Gx(n);n.hu.delete(t),r.Co()&&dx(n,t),0===n.hu.size&&(r.Co()?r.ko():mx(n)&&n._u.set("Unknown"))}function hx(e,t){e.wu.Nt(t.targetId),Gx(e).Qo(t)}function dx(e,t){e.wu.Nt(t),Gx(e).jo(t)}function px(e){e.wu=new bg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),Gx(e).start(),e._u.iu()}function vx(e){return mx(e)&&!Gx(e).Do()&&e.hu.size>0}function mx(e){return 0===Kp(e).lu.size}function yx(e){e.wu=void 0}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){hx(t,e)}));case 1:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(e,t){return bx.apply(this,arguments)}function bx(){return bx=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yx(t),vx(t)?(t._u.uu(n),px(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}function xx(e,t,n){return _x.apply(this,arguments)}function _x(){return _x=Nt(It().mark((function e(t,n,r){var i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof kg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Ve(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Fp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ix(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof yg?t.wu.Ut(n):n instanceof gg?t.wu.zt(n):t.wu.Gt(n),r.isEqual(sv.min())){e.next=29;break}return e.prev=14,e.next=17,wb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Yv.EMPTY_BYTE_STRING,n.snapshotVersion)),dx(e,t);var r=new Pk(n.target,t,1,n.sequenceNumber);hx(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Fp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ix(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),_x.apply(this,arguments)}function Ix(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=Nt(It().mark((function e(t,n,r){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rv(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,sx(t);case 5:t._u.set("Offline"),r||(r=function(){return wb(t.localStore)}),t.asyncQueue.enqueueRetryable(Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,ox(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Ex(e,t){return t().catch((function(n){return Ix(e,n,t)}))}function Tx(e){return Nx.apply(this,arguments)}function Nx(){return Nx=Nt(It().mark((function e(t){var n,r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Kp(t),r=Hx(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Cx(n)){e.next=19;break}return e.prev=3,e.next=6,_b(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Ax(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ix(n,e.t0);case 17:e.next=2;break;case 19:Dx(n)&&Rx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Nx.apply(this,arguments)}function Cx(e){return mx(e)&&e.au.length<10}function Ax(e,t){e.au.push(t);var n=Hx(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Dx(e){return mx(e)&&!Hx(e).Do()&&e.au.length>0}function Rx(e){Hx(e).start()}function Ox(e){return Px.apply(this,arguments)}function Px(){return Px=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Hx(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Lx(e){return jx.apply(this,arguments)}function jx(){return jx=Nt(It().mark((function e(t){var n,r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Hx(t),r=Ve(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Mx(e,t,n){return Fx.apply(this,arguments)}function Fx(){return Fx=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=Rk.from(i,n,r),e.next=3,Ex(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Tx(t);case 5:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function Vx(e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=Nt(It().mark((function e(t,n){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Hx(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zy(i=n.code)||i===Gp.ABORTED){e.next=7;break}return r=t.au.shift(),Hx(t).No(),e.next=5,Ex(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Tx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Dx(t)&&Rx(t);case 5:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Bx(e,t){return zx.apply(this,arguments)}function zx(){return zx=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Kp(t)).asyncQueue.verifyOperationInProgress(),Fp("RemoteStore","RemoteStore received new credentials"),i=mx(r),r.lu.add(3),e.next=6,sx(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,ox(r);case 12:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}function qx(e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,ox(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,sx(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Gx(e){return e.mu||(e.mu=function(e,t,n){var r=Kp(e);return r.tu(),new tx(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:gx.bind(null,e),Jr:wx.bind(null,e),Go:xx.bind(null,e)}),e.fu.push(function(){var t=Nt(It().mark((function t(n){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),vx(e)?px(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:yx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Hx(e){return e.gu||(e.gu=function(e,t,n){var r=Kp(e);return r.tu(),new nx(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Ox.bind(null,e),Jr:Vx.bind(null,e),Yo:Lx.bind(null,e),Jo:Mx.bind(null,e)}),e.fu.push(function(){var t=Nt(It().mark((function t(n){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Tx(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Fp("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Wx=function(){function e(t,n,r,i,a){je(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Fe(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hp(Gp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Qx(e,t){if(Vp("AsyncQueue","".concat(t,": ").concat(e)),Rv(e))return new Hp(Gp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var $x=function(){function e(t){je(this,e),this.comparator=t?function(e,n){return t(e,n)||dv.comparator(e.key,n.key)}:function(e,t){return dv.comparator(e.key,t.key)},this.keyedMap=ag(),this.sortedSet=new qv(this.comparator)}return Fe(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Yx=function(){function e(){je(this,e),this.yu=new qv(dv.comparator)}return Fe(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):zp():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Jx=function(){function e(t,n,r,i,a,o,u,s){je(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Fe(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,$x.emptySet(n),a,r,i,!0,!1)}}]),e}(),Xx=Fe((function e(){je(this,e),this.Iu=void 0,this.listeners=[]})),Zx=Fe((function e(){je(this,e),this.queries=new tg((function(e){return hy(e)}),fy),this.onlineState="Unknown",this.Tu=new Set}));function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=Nt(It().mark((function e(t,n){var r,i,a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Xx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Qx(e.t0,"Initialization of query '".concat(dy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&o_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),t_.apply(this,arguments)}function n_(e,t){return r_.apply(this,arguments)}function r_(){return r_=Nt(It().mark((function e(t,n){var r,i,a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){var n,r=Kp(e),i=!1,a=Ve(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Ve(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&o_(r)}function a_(e,t,n){var r=Kp(e),i=r.queries.get(t);if(i){var a,o=Ve(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function o_(e){e.Tu.forEach((function(e){e.next()}))}var u_=function(){function e(t,n,r){je(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return Fe(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ve(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Jx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Jx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),s_=function(){function e(t,n){je(this,e),this.payload=t,this.byteLength=n}return Fe(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),c_=function(){function e(t){je(this,e),this.wt=t}return Fe(e,[{key:"Wi",value:function(e){return Pg(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?Ug(this.wt,e.document,!1):Rm.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Ag(e)}}]),e}(),l_=function(){function e(t,n,r){je(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=f_(t)}return Fe(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=lv.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new c_(this.wt),i=Ve(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=Ve(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||hg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Db(this.localStore,new c_(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=Ve(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ob(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function f_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var h_=Fe((function e(t){je(this,e),this.key=t})),d_=Fe((function e(t){je(this,e),this.key=t})),p_=function(){function e(t,n){je(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=hg(),this.mutatedKeys=hg(),this.Lu=my(t),this.Uu=new $x(this.Lu)}return Fe(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new Yx,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=py(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zp()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new Jx(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Yx,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=hg(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new d_(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new h_(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=hg();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Jx.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),v_=Fe((function e(t,n,r){je(this,e),this.query=t,this.targetId=n,this.view=r})),m_=Fe((function e(t){je(this,e),this.key=t,this.Xu=!1})),y_=function(){function e(t,n,r,i,a,o){je(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new tg((function(e){return hy(e)}),fy),this.ec=new Map,this.nc=new Set,this.sc=new qv(dv.comparator),this.ic=new Map,this.rc=new Jw,this.oc={},this.uc=new Map,this.cc=Tw.Rn(),this.onlineState="Unknown",this.ac=void 0}return Fe(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=Nt(It().mark((function e(t,n){var r,i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fI(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Ib(r.localStore,cy(n));case 8:return u=e.sent,r.isPrimaryClient&&lx(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,w_(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function w_(e,t,n,r){return b_.apply(this,arguments)}function b_(){return b_=Nt(It().mark((function e(t,n,r,i){var a,o,u,s,c,l;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Nt(It().mark((function e(t,n,r,i){var a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Tb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(B_(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Tb(t.localStore,n,!0);case 3:return a=e.sent,o=new p_(n,a.ji),u=o.Ku(a.documents),s=mg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),B_(t,r,c.zu),l=new v_(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function x_(e,t){return __.apply(this,arguments)}function __(){return __=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!fy(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Sb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),fx(r.remoteStore,i.targetId),V_(r,i.targetId)})).catch(Sv);case 9:e.next=14;break;case 11:return V_(r,i.targetId),e.next=14,Sb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function I_(e,t,n){return S_.apply(this,arguments)}function S_(){return S_=Nt(It().mark((function e(t,n,r){var i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hI(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Kp(e),a=uv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),hg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=rg(),s=hg();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Ve(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=By(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Ky(c.key,l,Dm(l.value.mapValue),Ly.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:og(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new qv(iv)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,K_(i,a.changes);case 9:return e.next=11,Tx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Qx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),S_.apply(this,arguments)}function E_(e,t){return T_.apply(this,arguments)}function T_(){return T_=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.prev=1,e.next=4,bb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(qp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?qp(n.Xu):e.removedDocuments.size>0&&(qp(n.Xu),n.Xu=!1))})),e.next=8,K_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Sv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),T_.apply(this,arguments)}function N_(e,t,n){var r=Kp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Kp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Ve(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&o_(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function C_(e,t,n){return A_.apply(this,arguments)}function A_(){return A_=Nt(It().mark((function e(t,n,r){var i,a,o,u,s,c;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Kp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new qv(dv.comparator)).insert(o,Rm.newNoDocument(o,sv.min())),s=hg().add(o),c=new vg(sv.min(),new Map,new Hv(iv),u,s),e.next=9,E_(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),q_(i),e.next=16;break;case 14:return e.next=16,Sb(i.localStore,n,!1).then((function(){return V_(i,n,r)})).catch(Sv);case 16:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function D_(e,t){return R_.apply(this,arguments)}function R_(){return R_=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),i=n.batch.batchId,e.prev=1,e.next=4,kb(r.localStore,n);case 4:return a=e.sent,F_(r,i,null),M_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,K_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),R_.apply(this,arguments)}function O_(e,t,n){return P_.apply(this,arguments)}function P_(){return P_=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kp(t),e.prev=1,e.next=4,function(e,t){var n=Kp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return qp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,F_(i,n,r),M_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,K_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),P_.apply(this,arguments)}function L_(e,t){return j_.apply(this,arguments)}function j_(){return j_=Nt(It().mark((function e(t,n){var r,i,a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mx((r=Kp(t)).remoteStore)||Fp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Kp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Qx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),j_.apply(this,arguments)}function M_(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function F_(e,t,n){var r=Kp(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function V_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Ve(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||U_(e,t)}))}function U_(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(fx(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),q_(e))}function B_(e,t,n){var r,i=Ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof h_?(e.rc.addReference(a.key,t),z_(e,a)):a instanceof d_?(Fp("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||U_(e,a.key)):zp()}}catch(o){i.e(o)}finally{i.f()}}function z_(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Fp("SyncEngine","New document in limbo: "+n),e.nc.add(r),q_(e))}function q_(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new dv(lv.fromString(t)),r=e.cc.next();e.ic.set(r,new m_(n)),e.sc=e.sc.insert(n,r),lx(e.remoteStore,new Pk(cy(ry(n.path)),r,2,Vv.ot))}}function K_(e,t,n){return G_.apply(this,arguments)}function G_(){return G_=Nt(It().mark((function e(t,n,r){var i,a,o,u;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kp(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=db.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Nt(It().mark((function e(t,n){var r,i,a,o,u,s,c,l;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Tv.forEach(n,(function(t){return Tv.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Tv.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Rv(e.t0)){e.next=10;break}throw e.t0;case 10:Fp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Ve(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function H_(e,t){return W_.apply(this,arguments)}function W_(){return W_=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Kp(t)).currentUser.isEqual(n)){e.next=11;break}return Fp("SyncEngine","User change. New user:",n.toKey()),e.next=5,yb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Hp(Gp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,K_(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function Q_(e,t){var n=Kp(e),r=n.ic.get(t);if(r&&r.Xu)return hg().add(r.key);var i=hg(),a=n.ec.get(t);if(!a)return i;var o,u=Ve(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function $_(e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.next=3,Tb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&B_(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function J_(e,t){return X_.apply(this,arguments)}function X_(){return X_=Nt(It().mark((function e(t,n){var r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.abrupt("return",Cb(r.localStore,n).then((function(e){return K_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(e,t,n,r){return eI.apply(this,arguments)}function eI(){return eI=Nt(It().mark((function e(t,n,r,i){var a,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Kp(t),e.next=3,function(e,t){var n=Kp(e),r=Kp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Tv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Tx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(F_(a,n,i||null),M_(a,n),function(e,t){Kp(Kp(e).mutationQueue).In(t)}(a.localStore,n)):zp();case 11:return e.next=13,K_(a,o);case 13:e.next=16;break;case 15:Fp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=Nt(It().mark((function e(t,n){var r,i,a,o,u,s,c,l;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fI(r=Kp(t)),hI(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,rI(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,qx(r.remoteStore,!0);case 9:o=Ve(a);try{for(o.s();!(u=o.n()).done;)s=u.value,lx(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return V_(r,t),Sb(r.localStore,t,!0)})),fx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,rI(r,c);case 21:return function(e){var t=Kp(e);t.ic.forEach((function(e,n){fx(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new qv(dv.comparator)}(r),r.ac=!1,e.next=25,qx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t,n){return iI.apply(this,arguments)}function iI(){return iI=Nt(It().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Kp(t),a=[],o=[],u=Ve(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Ib(i.localStore,cy(f[0]));case 11:l=e.sent,h=Ve(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,$_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Nb(i.localStore,c);case 36:return y=e.sent,e.next=39,Ib(i.localStore,y);case 39:return l=e.sent,e.next=42,w_(i,aI(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),iI.apply(this,arguments)}function aI(e){return ny(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function oI(e){var t=Kp(e);return Kp(Kp(t.localStore).persistence).Ri()}function uI(e,t,n,r){return sI.apply(this,arguments)}function sI(){return sI=Nt(It().mark((function e(t,n,r,i){var a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Kp(t)).ac){e.next=3;break}return e.abrupt("return",void Fp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Cb(a.localStore,vy(o[0]));case 10:return u=e.sent,s=vg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,K_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Sb(a.localStore,n,!0);case 17:return V_(a,n,i),e.abrupt("break",20);case 19:zp();case 20:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e,t,n){return lI.apply(this,arguments)}function lI(){return lI=Nt(It().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=fI(t)).ac){e.next=45;break}a=Ve(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return Fp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Nb(i.localStore,u);case 12:return s=e.sent,e.next=15,Ib(i.localStore,s);case 15:return c=e.sent,e.next=18,w_(i,aI(s),c.targetId,!1);case 18:lx(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Ve(r),e.prev=30,h=It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Sb(i.localStore,t,!1).then((function(){fx(i.remoteStore,t),V_(i,t)})).catch(Sv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),lI.apply(this,arguments)}function fI(e){var t=Kp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=E_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=C_.bind(null,t),t.Zu.Go=i_.bind(null,t.eventManager),t.Zu.lc=a_.bind(null,t.eventManager),t}function hI(e){var t=Kp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=D_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=O_.bind(null,t),t}function dI(e,t,n){var r=Kp(e);(function(){var e=Nt(It().mark((function e(t,n,r){var i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Kp(e),r=Ag(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(f_(i)),a=new l_(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,K_(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=Kp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Up("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var pI=function(){function e(){je(this,e),this.synchronizeTabs=!1}return Fe(e,[{key:"initialize",value:function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Xb(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return mb(this.persistence,new pb,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new rb(ab.Os,this.wt)}},{key:"dc",value:function(e){return new Kb}},{key:"terminate",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vI=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Fe(n,[{key:"initialize",value:function(){var e=Nt(It().mark((function e(t){var r=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(ze(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,hI(this.yc.syncEngine);case 6:return e.next=8,Tx(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return mb(this.persistence,new pb,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Pw(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Fv(t,this.persistence);return new Mv(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=hb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?kw.withCacheSize(this.cacheSizeBytes):kw.DEFAULT;return new cb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Yb(),Jb(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new Kb}}]),n}(pI),mI=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Fe(n,[{key:"initialize",value:function(){var e=Nt(It().mark((function e(t){var r,i=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(ze(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof qb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:Z_.bind(null,r),Mr:uI.bind(null,r),Or:cI.bind(null,r),Ri:oI.bind(null,r),Nr:J_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tI(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=Yb();if(!qb.V(t))throw new Hp(Gp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=hb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(vI),yI=function(){function e(){je(this,e)}return Fe(e,[{key:"initialize",value:function(){var e=Nt(It().mark((function e(t,n){var r=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return N_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=H_.bind(null,this.syncEngine),e.next=12,qx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Zx}},{key:"createDatastore",value:function(e){var t,n=Xb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new $b(t));return function(e,t,n,r){return new rx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return N_(o.syncEngine,e,0)},a=Hb.V()?new Hb:new Gb,new ax(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new y_(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kp(t),Fp("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,sx(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function gI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Nt(It().mark((function r(){var i;return It().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var kI=function(){function e(t){je(this,e),this.observer=t,this.muted=!1}return Fe(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):Vp("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),wI=function(){function e(t,n){var r=this;je(this,e),this.Ec=t,this.wt=n,this.metadata=new Wp,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Fe(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=Nt(It().mark((function e(){var t,n,r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new s_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=Nt(It().mark((function e(){var t,n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=Nt(It().mark((function e(){var t,n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),bI=function(){function e(t){je(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Fe(e,[{key:"lookup",value:function(){var e=Nt(It().mark((function e(t){var n,r=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Hp(Gp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Nt(It().mark((function e(t,n){var r,i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),i=Mg(r.wt)+"/documents",a={documents:n.map((function(e){return Og(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Bg(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());qp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Yy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Nt(It().mark((function e(){var t,n=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=dv.fromPath(t);n.mutations.push(new Jy(r,n.precondition(r)))})),e.next=7,function(){var e=Nt(It().mark((function e(t,n){var r,i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),i=Mg(r.wt)+"/documents",a={writes:n.map((function(e){return zg(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zp();t=sv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hp(Gp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ly.updateTime(t):Ly.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sv.min()))throw new Hp(Gp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ly.updateTime(t)}return Ly.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),xI=function(){function e(t,n,r,i,a){je(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Zb(this.asyncQueue,"transaction_retry")}return Fe(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(Nt(It().mark((function t(){var n,r;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new bI(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!om(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Zy(t)}return!1}}]),e}(),_I=function(){function e(t,n,r,i){var a=this;je(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pp.UNAUTHENTICATED,this.clientId=rv.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Fp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Fe(e,[{key:"getConfiguration",value:function(){var e=Nt(It().mark((function e(){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hp(Gp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Wp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Nt(It().mark((function n(){var r;return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Qx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function II(e,t){return SI.apply(this,arguments)}function SI(){return SI=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Fp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,yb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=Nt(It().mark((function e(t,n){var r,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,NI(t);case 3:return r=e.sent,Fp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Bx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Bx(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function NI(e){return CI.apply(this,arguments)}function CI(){return CI=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Fp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,II(t,new pI);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function AI(e){return DI.apply(this,arguments)}function DI(){return DI=Nt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Fp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,EI(t,new yI);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function RI(e){return NI(e).then((function(e){return e.persistence}))}function OI(e){return NI(e).then((function(e){return e.localStore}))}function PI(e){return AI(e).then((function(e){return e.remoteStore}))}function LI(e){return AI(e).then((function(e){return e.syncEngine}))}function jI(e){return MI.apply(this,arguments)}function MI(){return MI=Nt(It().mark((function e(t){var n,r;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=g_.bind(null,n.syncEngine),r.onUnlisten=x_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function i(){return It().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kI({next:function(a){t.enqueueAndForget((function(){return n_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Hp(Gp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Hp(Gp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new u_(ry(n.path),a,{includeMetadataChanges:!0,Du:!0});return e_(e,o)},i.next=3,jI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function VI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function i(){return It().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kI({next:function(n){t.enqueueAndForget((function(){return n_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hp(Gp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new u_(n,a,{includeMetadataChanges:!0,Du:!0});return e_(e,o)},i.next=3,jI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var UI=new Map;function BI(e,t,n){if(!n)throw new Hp(Gp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zI(e,t,n,r){if(!0===t&&!0===r)throw new Hp(Gp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function qI(e){if(!dv.isDocumentKey(e))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function KI(e){if(dv.isDocumentKey(e))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function GI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":zp()}function HI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hp(Gp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=GI(e);throw new Hp(Gp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function WI(e,t){if(t<=0)throw new Hp(Gp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var QI=function(){function e(t){var n;if(je(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hp(Gp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hp(Gp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,zI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Fe(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),$I=function(){function e(t,n,r){je(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QI({}),this._settingsFrozen=!1,t instanceof am?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hp(Gp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new am(e.options.projectId)}(t))}return Fe(e,[{key:"app",get:function(){if(!this._app)throw new Hp(Gp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hp(Gp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $p;switch(e.type){case"gapi":var t=e.client;return qp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Zp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Hp(Gp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=UI.get(e);t&&(Fp("ComponentProvider","Removing Datastore"),UI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function YI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=HI(e,$I))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Up("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Pp.MOCK_USER;else{o=nt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Hp(Gp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Pp(s)}e._authCredentials=new Yp(new Qp(o,u))}}var JI=function(){function e(t,n,r){je(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Fe(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ZI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),XI=function(){function e(t,n,r){je(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Fe(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ZI=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this,e,r,ry(i)))._path=i,a.type="collection",a}return Fe(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new JI(this.firestore,null,new dv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(XI);function eS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_t(e),BI("collection","path",t),e instanceof $I){var a=lv.fromString.apply(lv,[t].concat(r));return KI(a),new ZI(e,null,a)}if(!(e instanceof JI||e instanceof ZI))throw new Hp(Gp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(lv.fromString.apply(lv,[t].concat(r)));return KI(o),new ZI(e.firestore,null,o)}function tS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_t(e),1===arguments.length&&(t=rv.I()),BI("doc","path",t),e instanceof $I){var a=lv.fromString.apply(lv,[t].concat(r));return qI(a),new JI(e,null,new dv(a))}if(!(e instanceof JI||e instanceof ZI))throw new Hp(Gp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(lv.fromString.apply(lv,[t].concat(r)));return qI(o),new JI(e.firestore,e instanceof ZI?e.converter:null,new dv(o))}function nS(e,t){return e=_t(e),t=_t(t),(e instanceof JI||e instanceof ZI)&&(t instanceof JI||t instanceof ZI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rS(e,t){return e=_t(e),t=_t(t),e instanceof XI&&t instanceof XI&&e.firestore===t.firestore&&fy(e._query,t._query)&&e.converter===t.converter}var iS=function(){function e(){var t=this;je(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Zb(this,"async_queue_retry"),this.Kc=function(){var e=Jb();e&&Fp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Jb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return Fe(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Jb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Wp;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Nt(It().mark((function e(){var t=this;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Rv(e.t0)){e.next=12;break}throw e.t0;case 12:Fp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=Wx.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&zp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Nt(It().mark((function e(){var t;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=Ve(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ve(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function aS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Ve(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var oS=function(){function e(){je(this,e),this._progressObserver={},this._taskCompletionResolver=new Wp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Fe(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),uS=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new iS,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Fe(n,[{key:"_terminate",value:function(){return this._firestoreClient||cS(this),this._firestoreClient.terminate()}}]),n}($I);function sS(e){return e._firestoreClient||cS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cS(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new im(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new _I(e._authCredentials,e._appCheckCredentials,e._queue,r)}function lS(e,t,n){var r=new Wp;return e.asyncQueue.enqueue(Nt(It().mark((function i(){var a;return It().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,II(e,n);case 3:return i.next=5,EI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Gp.FAILED_PRECONDITION||e.code===Gp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Up("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function fS(e){return function(e){return e.asyncQueue.enqueue(Nt(It().mark((function t(){var n,r;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RI(e);case 2:return n=t.sent,t.next=5,PI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Kp(e);return t.lu.delete(0),ox(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(sS(e=HI(e,uS)))}function hS(e){return function(e){return e.asyncQueue.enqueue(Nt(It().mark((function t(){var n,r;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RI(e);case 2:return n=t.sent,t.next=5,PI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Kp(t)).lu.add(0),e.next=4,sx(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(sS(e=HI(e,uS)))}function dS(e,t){var n=sS(e=HI(e,uS)),r=new oS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new wI(e,t)}(function(e,t){if(e instanceof Uint8Array)return gI(e,t);if(e instanceof ArrayBuffer)return gI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Xb(t));e.asyncQueue.enqueueAndForget(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dI,t.next=3,LI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function pS(e,t){return function(e,t){return e.asyncQueue.enqueue(Nt(It().mark((function n(){return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Kp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,OI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(sS(e=HI(e,uS)),t).then((function(t){return t?new XI(e,null,t.query):null}))}function vS(e){if(e._initialized||e._terminated)throw new Hp(Gp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mS=function(){function e(){je(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hv(n)}return Fe(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var yS=function(){function e(t){je(this,e),this._byteString=t}return Fe(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yv.fromBase64String(t))}catch(t){throw new Hp(Gp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yv.fromUint8Array(t))}}]),e}(),gS=Fe((function e(t){je(this,e),this._methodName=t})),kS=function(){function e(t,n){if(je(this,e),!isFinite(t)||t<-90||t>90)throw new Hp(Gp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hp(Gp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Fe(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return iv(this._lat,e._lat)||iv(this._long,e._long)}}]),e}(),wS=/^__.*__$/,bS=function(){function e(t,n,r){je(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Fe(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ky(e,this.data,this.fieldMask,t,this.fieldTransforms):new qy(e,this.data,t,this.fieldTransforms)}}]),e}(),xS=function(){function e(t,n,r){je(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Fe(e,[{key:"toMutation",value:function(e,t){return new Ky(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function _S(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zp()}}var IS=function(){function e(t,n,r,i,a,o){je(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Fe(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return KS(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(_S(this.Zc)&&wS.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),SS=function(){function e(t,n,r){je(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Xb(t)}return Fe(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new IS({Zc:e,methodName:t,ca:n,path:hv.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function ES(e){var t=e._freezeSettings(),n=Xb(e._databaseId);return new SS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function TS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);US("Data must be an object, but it was:",o,r);var u,s,c=FS(r,o);if(a.merge)u=new $v(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Ve(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=BS(t,d,n);if(!o.contains(p))throw new Hp(Gp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));GS(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new $v(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new bS(new Am(c),u,s)}var NS=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gS);function CS(e,t,n){return new IS({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var AS=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"_toFieldTransform",value:function(e){return new Oy(e.path,new Sy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gS),DS=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e)).ha=r,i}return Fe(n,[{key:"_toFieldTransform",value:function(e){var t=CS(this,e,!0),n=this.ha.map((function(e){return MS(e,t)})),r=new Ey(n);return new Oy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gS),RS=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e)).ha=r,i}return Fe(n,[{key:"_toFieldTransform",value:function(e){var t=CS(this,e,!0),n=this.ha.map((function(e){return MS(e,t)})),r=new Ny(n);return new Oy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gS),OS=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e)).la=r,i}return Fe(n,[{key:"_toFieldTransform",value:function(e){var t=new Ay(e.wt,wy(e.wt,this.la));return new Oy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gS);function PS(e,t,n,r){var i=e.aa(1,t,n);US("Data must be an object, but it was:",i,r);var a=[],o=Am.empty();Bv(r,(function(e,r){var u=qS(t,e,n);r=_t(r);var s=i.ia(u);if(r instanceof NS)a.push(u);else{var c=MS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new $v(a);return new xS(o,u,i.fieldTransforms)}function LS(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[BS(t,r,n)],s=[i];if(a.length%2!=0)throw new Hp(Gp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(BS(t,a[c])),s.push(a[c+1]);for(var l=[],f=Am.empty(),h=u.length-1;h>=0;--h)if(!GS(l,u[h])){var d=u[h],p=s[h];p=_t(p);var v=o.ia(d);if(p instanceof NS)l.push(d);else{var m=MS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new $v(l);return new xS(f,y,o.fieldTransforms)}function jS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return MS(n,e.aa(r?4:3,t))}function MS(e,t){if(VS(e=_t(e)))return US("Unsupported field value:",t,e),FS(e,t);if(e instanceof gS)return function(e,t){if(!_S(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Ve(e);try{for(a.s();!(n=a.n()).done;){var o=MS(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=_t(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wy(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=uv.fromDate(e);return{timestampValue:Tg(t.wt,n)}}if(e instanceof uv){var r=new uv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Tg(t.wt,r)}}if(e instanceof kS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yS)return{bytesValue:Ng(t.wt,e._byteString)};if(e instanceof JI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Dg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(GI(e)))}(e,t)}function FS(e,t){var n={};return zv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bv(e,(function(e,r){var i=MS(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function VS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof uv||e instanceof kS||e instanceof yS||e instanceof JI||e instanceof gS)}function US(e,t,n){if(!VS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=GI(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function BS(e,t,n){if((t=_t(t))instanceof mS)return t._internalPath;if("string"==typeof t)return qS(e,t);throw KS("Field path arguments must be of type string or ",e,!1,void 0,n)}var zS=new RegExp("[~\\*/\\[\\]]");function qS(e,t,n){if(t.search(zS)>=0)throw KS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return We(mS,Et(t.split(".")))._internalPath}catch(r){throw KS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function KS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Hp(Gp.INVALID_ARGUMENT,u+e+s)}function GS(e,t){return e.some((function(e){return e.isEqual(t)}))}var HS=function(){function e(t,n,r,i,a){je(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Fe(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new JI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new WS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(QS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),WS=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"data",value:function(){return rr(ze(n.prototype),"data",this).call(this)}}]),n}(HS);function QS(e,t){return"string"==typeof t?qS(e,t):t instanceof mS?t._internalPath:t._delegate._internalPath}var $S=function(){function e(t,n){je(this,e),this.hasPendingWrites=t,this.fromCache=n}return Fe(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),YS=function(e){Be(n,e);var t=He(n);function n(e,r,i,a,o,u){var s;return je(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Fe(n,[{key:"exists",value:function(){return rr(ze(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new JS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(QS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(HS),JS=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rr(ze(n.prototype),"data",this).call(this,e)}}]),n}(YS),XS=function(){function e(t,n,r,i){je(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new $S(i.hasPendingWrites,i.fromCache),this.query=r}return Fe(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new JS(n._firestore,n._userDataWriter,r.key,r,new $S(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Hp(Gp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new JS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $S(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new JS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $S(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ZS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ZS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zp()}}function eE(e,t){return e instanceof YS&&t instanceof YS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof XS&&t instanceof XS&&e._firestore===t._firestore&&rS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function tE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hp(Gp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nE=Fe((function e(){je(this,e)}));function rE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var iE=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return Fe(n,[{key:"_apply",value:function(e){var t=ES(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){vE(o,a);var s,c=[],l=Ve(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(pE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=pE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||vE(o,a),u=jS(n,"where",o,"in"===a||"not-in"===a);var h=Bm.create(i,a,u);return function(e,t){if(t.ht()){var n=oy(e);if(null!==n&&!n.isEqual(t.field))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ay(e);null!==r&&mE(e,t.field,r)}var i=function(e,t){var n,r=Ve(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Hp(Gp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hp(Gp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new XI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ty(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(nE);var aE=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return Fe(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Jm(t,n);return function(e,t){if(null===ay(e)){var n=oy(e);null!==n&&mE(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new XI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ty(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(nE);var oE=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return Fe(n,[{key:"_apply",value:function(e){return new XI(e.firestore,e.converter,ly(e._query,this.ma,this.ga))}}]),n}(nE);var uE=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Fe(n,[{key:"_apply",value:function(e){var t=dE(e,this.type,this.ya,this.pa);return new XI(e.firestore,e.converter,function(e,t){return new ty(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(nE);function sE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uE("startAt",t,!0)}function cE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uE("startAfter",t,!1)}var lE=function(e){Be(n,e);var t=He(n);function n(e,r,i){var a;return je(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Fe(n,[{key:"_apply",value:function(e){var t=dE(e,this.type,this.ya,this.pa);return new XI(e.firestore,e.converter,function(e,t){return new ty(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(nE);function fE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lE("endBefore",t,!1)}function hE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lE("endAt",t,!0)}function dE(e,t,n,r){if(n[0]=_t(n[0]),n[0]instanceof HS)return function(e,t,n,r,i){if(!r)throw new Hp(Gp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Ve(sy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(gm(t,r.key));else{var c=r.data.field(s.field);if(tm(c))throw new Hp(Gp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ym(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ES(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Hp(Gp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!uy(e)&&-1!==c.indexOf("/"))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(lv.fromString(c));if(!dv.isDocumentKey(l))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new dv(l);u.push(gm(t,f))}else{var h=jS(n,r,c);u.push(h)}}return new Ym(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function pE(e,t,n){if("string"==typeof(n=_t(n))){if(""===n)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uy(t)&&-1!==n.indexOf("/"))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(lv.fromString(n));if(!dv.isDocumentKey(r))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gm(e,new dv(r))}if(n instanceof JI)return gm(e,n._key);throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(GI(n),"."))}function vE(e,t){if(!Array.isArray(e)||0===e.length)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function mE(e,t,n){if(!n.isEqual(t))throw new Hp(Gp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var yE={maxAttempts:5},gE=function(){function e(){je(this,e)}return Fe(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(em(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Bv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new kS(Zv(e.latitude),Zv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=nm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Xv(e);return new uv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=lv.fromString(e);qp(tk(n));var r=new am(n.get(1),n.get(3)),i=new dv(n.popFirst(5));return r.isEqual(t)||Vp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function kE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var wE=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).firestore=e,r}return Fe(n,[{key:"convertBytes",value:function(e){return new yS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new JI(this.firestore,null,t)}}]),n}(gE),bE=function(){function e(t,n){je(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ES(t)}return Fe(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=xE(e,this._firestore),i=kE(r.converter,t,n),a=TS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ly.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=xE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=_t(t))||t instanceof mS?LS(this._dataReader,"WriteBatch.update",i._key,t,n,o):PS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ly.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=xE(e,this._firestore);return this._mutations=this._mutations.concat(new Yy(t._key,Ly.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Hp(Gp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function xE(e,t){if((e=_t(e)).firestore!==t)throw new Hp(Gp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var _E=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).firestore=e,r}return Fe(n,[{key:"convertBytes",value:function(e){return new yS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new JI(this.firestore,null,t)}}]),n}(gE);function IE(e){e=HI(e,JI);var t=HI(e.firestore,uS),n=sS(t),r=new _E(t);return function(e,t){var n=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function r(){return It().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Nt(It().mark((function e(t,n,r){var i,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Kp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Hp(Gp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Qx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,OI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new YS(t,r,e._key,n,new $S(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function SE(e){e=HI(e,XI);var t=HI(e.firestore,uS),n=sS(t),r=new _E(t);return function(e,t){var n=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function r(){return It().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Nt(It().mark((function e(t,n,r){var i,a,o,u,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tb(t,n,!0);case 3:i=e.sent,a=new p_(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Qx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,OI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new XS(t,r,e,n)}))}function EE(e,t,n){e=HI(e,JI);var r=HI(e.firestore,uS),i=kE(e.converter,t,n);return AE(r,[TS(ES(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ly.none())])}function TE(e,t,n){e=HI(e,JI);for(var r=HI(e.firestore,uS),i=ES(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return AE(r,[("string"==typeof(t=_t(t))||t instanceof mS?LS(i,"updateDoc",e._key,t,n,o):PS(i,"updateDoc",e._key,t)).toMutation(e._key,Ly.exists(!0))])}function NE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=_t(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||aS(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(aS(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof JI)l=HI(e.firestore,uS),f=ry(e._key.path),c={next:function(t){n[s]&&n[s](DE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=HI(e,XI);l=HI(p.firestore,uS),f=p._query;var v=new _E(l);c={next:function(e){n[s]&&n[s](new XS(l,v,p,e))},error:n[s+1],complete:n[s+2]},tE(e._query)}return function(e,t,n,r){var i=new kI(r),a=new u_(t,i,n);return e.asyncQueue.enqueueAndForget(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e_,t.next=3,jI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n_,t.next=3,jI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sS(l),f,h,c)}function CE(e,t){return function(e,t){var n=new kI(t);return e.asyncQueue.enqueueAndForget(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Kp(e).Tu.add(t),t.next()},t.next=3,jI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(Nt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Kp(e).Tu.delete(t)},t.next=3,jI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sS(e=HI(e,uS)),aS(t)?t:{next:t})}function AE(e,t){return function(e,t){var n=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function r(){return It().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=I_,r.next=3,LI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(sS(e),t)}function DE(e,t,n){var r=n.docs.get(t._key),i=new _E(e);return new YS(e,i,t._key,r,new $S(n.hasPendingWrites,n.fromCache),t.converter)}var RE=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,r))._firestore=e,i}return Fe(n,[{key:"get",value:function(e){var t=this,r=xE(e,this._firestore),i=new _E(this._firestore);return rr(ze(n.prototype),"get",this).call(this,e).then((function(e){return new YS(t._firestore,i,r._key,e._document,new $S(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){je(this,e),this._firestore=t,this._transaction=n,this._dataReader=ES(t)}return Fe(e,[{key:"get",value:function(e){var t=this,n=xE(e,this._firestore),r=new wE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return zp();var i=e[0];if(i.isFoundDocument())return new HS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new HS(t._firestore,r,n._key,null,n.converter);throw zp()}))}},{key:"set",value:function(e,t,n){var r=xE(e,this._firestore),i=kE(r.converter,t,n),a=TS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=xE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=_t(t))||t instanceof mS?LS(this._dataReader,"Transaction.update",i._key,t,n,o):PS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=xE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function OE(e,t,n){e=HI(e,uS);var r=Object.assign(Object.assign({},yE),n);return function(e){if(e.maxAttempts<1)throw new Hp(Gp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function i(){var a;return It().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return AI(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new xI(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(sS(e),(function(n){return t(new RE(e,n))}),r)}function PE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DS("arrayUnion",t)}function LE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new RS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Lp=e}(Sn),gn(new Ct("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new uS(i,new Jp(e.getProvider("auth-internal")),new tv(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Dn(Op,"3.4.14",e),Dn(Op,"3.4.14","esm2017")}();function jE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Hp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ME(){if("undefined"===typeof Uint8Array)throw new Hp("unimplemented","Uint8Arrays are not available in this environment.")}function FE(){if("undefined"==typeof atob)throw new Hp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var VE=function(){function e(t){je(this,e),this._delegate=t}return Fe(e,[{key:"toBase64",value:function(){return FE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ME(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return FE(),new e(yS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ME(),new e(yS.fromUint8Array(t))}}]),e}();function UE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Ve(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var BE=function(){function e(){je(this,e)}return Fe(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){vS(e=HI(e,uS));var n=sS(e),r=e._freezeSettings(),i=new yI;return lS(n,i,new vI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){vS(e=HI(e,uS));var t=sS(e),n=e._freezeSettings(),r=new yI;return lS(t,r,new mI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Hp(Gp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Wp;return e._queue.enqueueAndForgetEvenWhileRestricted(Nt(It().mark((function n(){return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Nt(It().mark((function e(t){var n;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cv.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Cv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(hb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),zE=function(){function e(t,n,r){var i=this;je(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof am||(this._appCompat=t)}return Fe(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Up("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};YI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return fS(this._delegate)}},{key:"disableNetwork",value:function(){return hS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&zI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Wp;return e.asyncQueue.enqueueAndForget(Nt(It().mark((function n(){return It().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=L_,n.next=3,LI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(sS(e=HI(e,uS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return CE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Hp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new nT(this,eS(this._delegate,e))}catch(t){throw QE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new WE(this,tS(this._delegate,e))}catch(t){throw QE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ZE(this,function(e,t){if(e=HI(e,$I),BI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Hp(Gp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new XI(e,null,function(e){return new ty(lv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw QE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return OE(this._delegate,(function(n){return e(new KE(t,n))}))}},{key:"batch",value:function(){var e=this;return sS(this._delegate),new GE(new bE(this._delegate,(function(t){return AE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return dS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return pS(this._delegate,e).then((function(e){return e?new ZE(t,e):null}))}}]),e}(),qE=function(e){Be(n,e);var t=He(n);function n(e){var r;return je(this,n),(r=t.call(this)).firestore=e,r}return Fe(n,[{key:"convertBytes",value:function(e){return new VE(new yS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return WE.forKey(t,this.firestore,null)}}]),n}(gE);var KE=function(){function e(t,n){je(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new qE(t)}return Fe(e,[{key:"get",value:function(e){var t=this,n=rT(e);return this._delegate.get(n).then((function(e){return new JE(t._firestore,new YS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=rT(e);return n?(jE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=rT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=rT(e);return this._delegate.delete(t),this}}]),e}(),GE=function(){function e(t){je(this,e),this._delegate=t}return Fe(e,[{key:"set",value:function(e,t,n){var r=rT(e);return n?(jE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=rT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=rT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),HE=function(){function e(t,n,r){je(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Fe(e,[{key:"fromFirestore",value:function(e,t){var n=new JS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new XE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new qE(t),n),i.set(n,a)),a}}]),e}();HE.INSTANCES=new WeakMap;var WE=function(){function e(t,n){je(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qE(t)}return Fe(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new nT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new nT(this.firestore,eS(this._delegate,e))}catch(t){throw QE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=_t(e))instanceof JI&&nS(this._delegate,e)}},{key:"set",value:function(e,t){t=jE("DocumentReference.set",t);try{return t?EE(this._delegate,e,t):EE(this._delegate,e)}catch(n){throw QE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?TE(this._delegate,e):TE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw QE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return AE(HI(e.firestore,uS),[new Yy(e._key,Ly.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$E(n),a=YE(n,(function(t){return new JE(e.firestore,new YS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return NE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?IE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=HI(e,JI);var t=HI(e.firestore,uS);return FI(sS(t),e._key,{source:"server"}).then((function(n){return DE(t,e,n)}))}(this._delegate):function(e){e=HI(e,JI);var t=HI(e.firestore,uS);return FI(sS(t),e._key).then((function(n){return DE(t,e,n)}))}(this._delegate),t.then((function(e){return new JE(n.firestore,new YS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(HE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Hp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new JI(n._delegate,r,new dv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new JI(n._delegate,r,t))}}]),e}();function QE(e,t,n){return e.message=e.message.replace(t,n),e}function $E(e){var t,n=Ve(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!UE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function YE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=UE(e[0])?e[0]:UE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var JE=function(){function e(t,n){je(this,e),this._firestore=t,this._delegate=n}return Fe(e,[{key:"ref",get:function(){return new WE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return eE(this._delegate,e._delegate)}}]),e}(),XE=function(e){Be(n,e);var t=He(n);function n(){return je(this,n),t.apply(this,arguments)}return Fe(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||zp()}(void 0!==t),t}}]),n}(JE),ZE=function(){function e(t,n){je(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qE(t)}return Fe(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,rE(this._delegate,function(e,t,n){var r=t,i=QS("where",e);return new iE(i,r,n)}(t,n,r)))}catch(i){throw QE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,rE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=QS("orderBy",e);return new aE(n,t)}(t,n)))}catch(r){throw QE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,rE(this._delegate,function(e){return WI("limit",e),new oE("limit",e,"F")}(t)))}catch(n){throw QE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,rE(this._delegate,function(e){return WI("limitToLast",e),new oE("limitToLast",e,"L")}(t)))}catch(n){throw QE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,rE(this._delegate,sE.apply(void 0,arguments)))}catch(t){throw QE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,rE(this._delegate,cE.apply(void 0,arguments)))}catch(t){throw QE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,rE(this._delegate,fE.apply(void 0,arguments)))}catch(t){throw QE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,rE(this._delegate,hE.apply(void 0,arguments)))}catch(t){throw QE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return rS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?SE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=HI(e,XI);var t=HI(e.firestore,uS),n=sS(t),r=new _E(t);return VI(n,e._query,{source:"server"}).then((function(n){return new XS(t,r,e,n)}))}(this._delegate):function(e){e=HI(e,XI);var t=HI(e.firestore,uS),n=sS(t),r=new _E(t);return tE(e._query),VI(n,e._query).then((function(n){return new XS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new tT(n.firestore,new XS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$E(n),a=YE(n,(function(t){return new tT(e.firestore,new XS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return NE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(HE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),eT=function(){function e(t,n){je(this,e),this._firestore=t,this._delegate=n}return Fe(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new XE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),tT=function(){function e(t,n){je(this,e),this._firestore=t,this._delegate=n}return Fe(e,[{key:"query",get:function(){return new ZE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new XE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new eT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new XE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return eE(this._delegate,e._delegate)}}]),e}(),nT=function(e){Be(n,e);var t=He(n);function n(e,r){var i;return je(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Fe(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new WE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new WE(this.firestore,void 0===e?tS(this._delegate):tS(this._delegate,e))}catch(t){throw QE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=HI(e.firestore,uS),r=tS(e),i=kE(e.converter,t);return AE(n,[TS(ES(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ly.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new WE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return nS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(HE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(ZE);function rT(e){return HI(e,JI)}var iT=function(){function e(){je(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=We(mS,n)}return Fe(e,[{key:"isEqual",value:function(e){return(e=_t(e))instanceof mS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(hv.keyField().canonicalString())}}]),e}(),aT=function(){function e(t){je(this,e),this._delegate=t}return Fe(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new AS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new NS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=PE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=LE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new OS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),oT={Firestore:zE,GeoPoint:kS,Timestamp:uv,Blob:VE,Transaction:KE,WriteBatch:GE,DocumentReference:WE,DocumentSnapshot:JE,Query:ZE,QueryDocumentSnapshot:XE,QuerySnapshot:tT,CollectionReference:nT,FieldPath:iT,FieldValue:aT,setLogLevel:function(e){!function(e){jp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ct("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},oT)))}(e,(function(e,t){return new zE(e,t,new BE)})),e.registerVersion("@firebase/firestore-compat","0.1.23")}(tr);tr.initializeApp({apiKey:"AIzaSyDG2swZfO_z_NLFEHd4b4LL8sG4HAVs-MA",authDomain:"assessment-auth.firebaseapp.com",projectId:"assessment-auth",storageBucket:"assessment-auth.appspot.com",messagingSenderId:"969431624862",appId:"1:969431624862:web:1994840eb0d80b52789f8f",measurementId:"G-QF4MSMS2MD"}).firestore();var uT=tr.auth();function sT(e){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]})(e)}var cT=function(e){var t=e.close;return(0,c.jsxs)("div",{className:"menu",children:[(0,c.jsxs)("div",{className:"menu_head",children:[(0,c.jsx)("img",{src:"https://cdn-cpapa.nitrocdn.com/ymOIiISvfwfhKKlcNHQkeJnhLXeukOqq/assets/static/optimized/rev-2dc9606/wp-content/uploads/2020/04/Interactive-Brokers-Banner-with-White-Background-1024x195.png",alt:"log"}),(0,c.jsx)("span",{className:"close",children:(0,c.jsx)(De,{to:"/",children:(0,c.jsx)(sT,{className:"close-btn",onClick:t})})})]}),(0,c.jsxs)("div",{className:"menu-items",children:[(0,c.jsx)("h5",{children:(0,c.jsx)("span",{className:"Red",children:"Portal Login"})}),(0,c.jsx)("h5",{children:(0,c.jsx)("span",{className:"Red",children:"Open Account"})}),(0,c.jsx)("h5",{children:"Free Trial"}),(0,c.jsx)("h5",{children:"Why IBKR"}),(0,c.jsx)("h5",{children:"Account Types "}),(0,c.jsx)("h5",{children:"Pricing"}),(0,c.jsx)("h5",{children:"Trading "}),(0,c.jsx)("h5",{children:"Services "}),(0,c.jsx)("h5",{children:"Education "}),(0,c.jsx)("h5",{children:"About Us"}),(0,c.jsx)("h5",{children:"Support "})]})]})};var lT=function(e){var t=e.open,n=e.close;return t?(0,c.jsx)("div",{children:(0,c.jsx)(cT,{close:n})}):null};var fT=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=(0,t.useRef)();return(0,t.useEffect)((function(){document.addEventListener("mousedown",(function(e){i.current.contains(e.target)||r(!1)}))})),(0,c.jsxs)("div",{className:"header2",children:[(0,c.jsxs)("div",{className:"header2__left",children:[(0,c.jsx)("img",{className:"header2_img_1",src:"https://cdn-cpapa.nitrocdn.com/ymOIiISvfwfhKKlcNHQkeJnhLXeukOqq/assets/static/optimized/rev-2dc9606/wp-content/uploads/2020/04/Interactive-Brokers-Banner-with-White-Background-1024x195.png"}),(0,c.jsx)("div",{className:"img__2",children:(0,c.jsx)("img",{className:"header2_img_2",src:"https://www.interactivebrokers.co.in/images/web/logos/ibkr-logo-text-black.svg"})})]}),(0,c.jsxs)("div",{className:"header2__right",children:[(0,c.jsx)("div",{className:"options",children:(0,c.jsx)("p",{children:"Why IBKR"})}),(0,c.jsx)("div",{className:"options",children:(0,c.jsx)("p",{children:"Pricing"})}),(0,c.jsx)("div",{className:"options",children:(0,c.jsx)("p",{children:"Trading"})}),(0,c.jsx)("div",{className:"options",children:(0,c.jsx)("p",{children:"Services"})}),(0,c.jsx)("div",{className:"options",children:(0,c.jsx)("p",{children:"Education"})}),(0,c.jsx)("div",{className:"icon options",children:(0,c.jsx)("p",{children:(0,c.jsx)(I,{})})}),(0,c.jsx)("div",{className:"login",onClick:function(){uT&&uT.signOut()},children:(0,c.jsx)(De,{to:"/login",children:(0,c.jsx)("button",{children:uT?"Log-Out":"Log-In"})})}),(0,c.jsx)("div",{className:"openAccountTop",children:(0,c.jsx)(De,{to:"/login",onClick:function(){window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})},children:(0,c.jsx)("button",{children:"Open Account"})})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{onClick:function(){return r(!0)},children:(0,c.jsx)(Pe,{className:"menu-btn"})}),(0,c.jsx)("div",{ref:i,children:(0,c.jsx)(lT,{open:n,close:function(){return r(!1)}})})]})]})]})};var hT=function(){return(0,c.jsx)("div",{className:"item1",children:(0,c.jsxs)("div",{className:"text1",children:[(0,c.jsxs)("h1",{className:"heading1",children:["Interactive Brokers clients",(0,c.jsx)("br",{}),"earn up to USD 1.83% on ",(0,c.jsx)("br",{}),"their idle cash balances*"]}),(0,c.jsx)("div",{className:"btn1",children:(0,c.jsx)("button",{children:"Learn More"})}),(0,c.jsxs)("p",{className:"para1",children:["*Restrictions apply. For additional information on interest rates,",(0,c.jsxs)("a",{className:"a",href:"https://www.interactivebrokers.co.in/en/index.php?f=46788",children:[" ","click here."]}),(0,c.jsx)("br",{})," Credit interest rate as of 7/29/2022."]})]})})};var dT=function(){return(0,c.jsx)("div",{className:"item2",children:(0,c.jsxs)("div",{className:"text2",children:[(0,c.jsxs)("h1",{className:"heading2",children:["Put the World in the",(0,c.jsx)("br",{})," Palm of Your Hand with",(0,c.jsx)("br",{})," IBKR GlobalTrader"]}),(0,c.jsxs)("p",{className:"para2",children:["Deposit in your local currency and easily trade global stocks",(0,c.jsx)("br",{}),"from your phone or tablet."]}),(0,c.jsx)("div",{className:"btn2",children:(0,c.jsx)("button",{children:"Learn More"})})]})})};var pT=function(){return(0,c.jsx)("div",{className:"item3",children:(0,c.jsxs)("div",{className:"text3",children:[(0,c.jsxs)("h1",{className:"heading3",children:["Interactive Brokers:",(0,c.jsx)("br",{}),"Rated Lowest Margin Fees",(0,c.jsx)("br",{})," by StockBrokers.com"]}),(0,c.jsxs)("p",{className:"mid-para",children:["IBKR charges margin loan rates from ",(0,c.jsx)("b",{children:"USD 2.83% to USD 3.83%*"})]}),(0,c.jsx)("div",{className:"btn3",children:(0,c.jsx)("button",{children:"Learn More"})}),(0,c.jsxs)("p",{className:"para3",children:["*Restrictions apply. Annual Percentage Rate (APR) on USD margin loan balances as of 7/29/22.",(0,c.jsx)("br",{})," Interactive Brokers calculates the interest charged on margin loans using the applicable rates for",(0,c.jsx)("br",{})," each interest rate tier listed on its website. For additional information on margin loan rates .",(0,c.jsx)("br",{}),(0,c.jsx)("a",{href:"https://www.interactivebrokers.co.in/en/index.php?f=46782&p=m",children:"click here."})]})]})})};var vT=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"sliding_carousel",children:(0,c.jsxs)("div",{id:"carouselExampleIndicators",class:"carousel slide","data-ride":"carousel","data-interval":"1000",children:[(0,c.jsxs)("ol",{class:"carousel-indicators",children:[(0,c.jsx)("li",{"data-target":"#carouselExampleIndicators","data-slide-to":"0",class:"active"}),(0,c.jsx)("li",{"data-target":"#carouselExampleIndicators","data-slide-to":"1"}),(0,c.jsx)("li",{"data-target":"#carouselExampleIndicators","data-slide-to":"2"})]}),(0,c.jsxs)("div",{class:"carousel-inner",children:[(0,c.jsx)("div",{class:"carousel-item active",children:(0,c.jsx)(hT,{})}),(0,c.jsx)("div",{class:"carousel-item",children:(0,c.jsx)(dT,{})}),(0,c.jsx)("div",{class:"carousel-item",children:(0,c.jsx)(pT,{})})]})]})}),(0,c.jsxs)("div",{className:"carousel_visible",children:[(0,c.jsx)(hT,{}),(0,c.jsx)(dT,{}),(0,c.jsx)(pT,{})]})]})};var mT=function(){return(0,c.jsxs)("div",{className:"features",children:[(0,c.jsxs)("div",{className:"f_1",children:[(0,c.jsx)("img",{className:"f_1_img",src:"https://www.interactivebrokers.co.in/images/web/crd-low-cost.svg",alt:"logo"}),(0,c.jsxs)("div",{className:"f_text",children:[(0,c.jsx)("h5",{children:"Lower Costs"}),(0,c.jsxs)("p",{children:["Our transparent, low commissions and",(0,c.jsx)("br",{})," financing rates minimize costs to maximize",(0,c.jsx)("br",{})," returns."]})]})]}),(0,c.jsxs)("div",{className:"f_2",children:[(0,c.jsx)("img",{className:"f_2_img",src:"https://www.interactivebrokers.co.in/images/web/crd-global-access.svg",alt:"logo"}),(0,c.jsxs)("div",{className:"f_text",children:[(0,c.jsx)("h5",{children:"Globat Access"}),(0,c.jsxs)("p",{children:["Invest globally in stocks, options, futures,",(0,c.jsx)("br",{})," currencies, bonds and funds from a single",(0,c.jsx)("br",{})," unified platform."]})]})]}),(0,c.jsxs)("div",{className:"f_3",children:[(0,c.jsx)("img",{className:"f_3_img",src:"https://www.interactivebrokers.co.in/images/web/crd-technology.svg",alt:"logo"}),(0,c.jsxs)("div",{className:"f_text",children:[(0,c.jsx)("h5",{children:"Premier Technology"}),(0,c.jsxs)("p",{children:["IBKR's powerful suite of technology helps",(0,c.jsx)("br",{})," you optimize your trading speed and",(0,c.jsx)("br",{})," efficiency and perform sophisticated",(0,c.jsx)("br",{})," portfolio analysis"]})]})]})]})};var yT=function(){return(0,c.jsxs)("div",{className:"awards",children:[(0,c.jsx)("h5",{children:"AWARD WINNING PLATFORM & SERVICES"}),(0,c.jsxs)("div",{className:"actual_awards",children:[(0,c.jsxs)("div",{className:"award_1",children:[(0,c.jsx)("img",{src:"https://www.interactivebrokers.co.in/images/web/2022_sb-badge-1-professional-trading.png",alt:"logo"}),(0,c.jsxs)("p",{children:["#1 Professional Trading",(0,c.jsx)("br",{}),"#1 Offering of Investments"]})]}),(0,c.jsxs)("div",{className:"award_2",children:[(0,c.jsx)("img",{src:"https://www.interactivebrokers.co.in/images/2015/award-benzinga-best-trading-tech-2020.png",alt:"logo"}),(0,c.jsxs)("p",{children:["2020 Benzinga",(0,c.jsx)("br",{}),"Best Trading Technology"]})]}),(0,c.jsxs)("div",{className:"award_3",children:[(0,c.jsx)("img",{src:"https://www.interactivebrokers.co.in/images/web/award-barrons-2022-best-online-broker-crop.png",alt:"logo"}),(0,c.jsxs)("p",{children:["#1 Best Online Broker",(0,c.jsx)("br",{}),"5 out of 5 stars"]})]}),(0,c.jsxs)("div",{className:"award_4",children:[(0,c.jsx)("img",{src:"https://www.interactivebrokers.co.in/images/web/awards-investopedia-2022-General.png",alt:"logo"}),(0,c.jsxs)("p",{children:["4.6 out of 5 stars",(0,c.jsx)("br",{}),"Overall"]})]}),(0,c.jsxs)("div",{className:"award_5",children:[(0,c.jsx)("img",{src:"https://www.interactivebrokers.co.in/images/2015/award-nw-2020-crop.png",alt:"logo"}),(0,c.jsxs)("p",{children:["Best Broker for",(0,c.jsx)("br",{}),"Low-Cost Investing"]})]})]}),(0,c.jsx)("div",{className:"award_btn",children:(0,c.jsx)("button",{children:"See All Awards"})})]})};function gT(e){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}}]})(e)}function kT(e){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}}]})(e)}var wT=function(){return(0,c.jsxs)("div",{className:"middle",children:[(0,c.jsxs)("div",{className:"middle_1",children:[(0,c.jsx)("div",{className:"middle1_left",children:(0,c.jsx)("img",{className:"middle1_img child",src:"https://www.interactivebrokers.co.in/images/web/home-low-cost.jpg",alt:"logo"})}),(0,c.jsxs)("div",{className:"middle1_right child",children:[(0,c.jsxs)("h1",{children:["Experience the Lowest Costs",(0,c.jsx)("br",{className:"head_break"})," in the Industry"]}),(0,c.jsxs)("div",{className:"middle1_para",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)(_,{className:"check"}),"\xa0\xa0 Low commissions with no added spreads, ticket charges, platform fees, or account minimums."]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(_,{className:"check"})," \xa0\xa0"," ",(0,c.jsx)("span",{className:"check",children:"I B SmartRouting"})," helps support best execution by searching for the dark poles."]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(_,{className:"check"}),"\xa0\xa0 ",(0,c.jsx)("span",{className:"check",children:"Margin rates"})," up to 66% lower than the industry."]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(_,{className:"check"}),"\xa0\xa0 Earn interest of up to"," ",(0,c.jsx)("span",{className:"check",children:"USD 1.83% "}),"on uninvested cash."]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(_,{className:"check"})," \xa0 Earn extra income on your lendable shares."]})]}),(0,c.jsx)("div",{className:"middle1_btn",children:(0,c.jsx)("button",{children:"Learn More"})})]})]}),(0,c.jsxs)("div",{className:"middle_2",children:[(0,c.jsxs)("div",{className:"middle2_right child",children:[(0,c.jsxs)("h1",{children:["Discover a World of",(0,c.jsx)("br",{className:"head_break"})," Opportunities"]}),(0,c.jsxs)("div",{className:"middle2_para",children:[(0,c.jsxs)("p",{children:["Invest globally in stocks, options, futures, currencies,",(0,c.jsx)("br",{className:"head_break"})," bonds & funds from a single unified platform. Fund",(0,c.jsx)("br",{className:"head_break"})," your account in multiple currencies and trade assets",(0,c.jsx)("br",{className:"head_break"})," denominated in multiple currencies. Access market",(0,c.jsx)("br",{className:"head_break"})," data 24 hours a day and six days a week."]}),(0,c.jsxs)("div",{className:"data",children:[(0,c.jsxs)("div",{className:"data1",children:[(0,c.jsx)("h1",{children:"150"}),(0,c.jsx)("p",{children:"Markets"})]}),(0,c.jsxs)("div",{className:"data1",children:[(0,c.jsx)("h1",{children:"33"}),(0,c.jsx)("p",{children:"Countries"})]}),(0,c.jsxs)("div",{className:"data1",children:[(0,c.jsx)("h1",{children:"24"}),(0,c.jsx)("p",{children:"Currencies"})]})]})]}),(0,c.jsx)("div",{className:"middle2_btn",children:(0,c.jsx)("button",{children:"Learn More"})})]}),(0,c.jsx)("div",{className:"middle2_left",children:(0,c.jsx)("img",{className:"middle2_img child",src:"https://www.interactivebrokers.com/images/web/map-solo-5320.jpg",alt:"logo"})})]}),(0,c.jsxs)("div",{className:"middle_3",children:[(0,c.jsx)("div",{className:"left_grid_3",children:(0,c.jsx)("img",{src:"https://www.interactivebrokers.com/images/web/home-tech-full.jpg",alt:"logo"})}),(0,c.jsxs)("div",{className:"right_grid_3",children:[(0,c.jsx)("h2",{children:"Leverage Technology Built to Help You Get Ahead"}),(0,c.jsxs)("div",{className:"right_inner_grid",children:[(0,c.jsxs)("div",{className:"left_inner_grid_left",children:[(0,c.jsxs)("p",{className:"red",children:["Trading Professionals \xa0"," ",(0,c.jsx)(gT,{className:"arrowRight"})]}),(0,c.jsx)("p",{children:"Powerful enough for the professional trader but designed for everyone. Available on desktop, mobile and web."}),(0,c.jsx)("br",{}),(0,c.jsxs)("p",{className:"red",children:["Order Types and Algos \xa0"," ",(0,c.jsx)(gT,{className:"arrowRight"})]}),(0,c.jsx)("p",{children:"100+ order types \u2013 from limit orders to complex algorithmic trading \u2013 help you execute any trading strategy."})]}),(0,c.jsxs)("div",{className:"left_inner_grid_right",children:[(0,c.jsxs)("p",{className:"red",children:["Free Trading Tools \xa0"," ",(0,c.jsx)(gT,{className:"arrowRight"})]}),(0,c.jsx)("p",{children:"Spot market opportunities, analyze results, manage your account and make better decisions with our free trading tools."}),(0,c.jsx)("br",{}),(0,c.jsxs)("p",{className:"red",children:["Comprehensive Reporting \xa0"," ",(0,c.jsx)(gT,{className:"arrowRight"})]}),(0,c.jsx)("p",{children:"Real-time trade confirmations, margin details, transaction cost analysis, sophisticated portfolio analysis and more."})]})]})]})]}),(0,c.jsxs)("div",{className:"middle_4",children:[(0,c.jsxs)("div",{className:"middle4_right child",children:[(0,c.jsx)("h1",{children:"A Broker You Can Trust"}),(0,c.jsxs)("div",{className:"middle4_para",children:[(0,c.jsxs)("p",{children:["When placing your money with a broker, you need to make sure your broker is",(0,c.jsx)("br",{})," secure and can endure through good and bad times. Our strong capital position,",(0,c.jsx)("br",{})," conservative balance sheet and automated risk controls are designed to protect",(0,c.jsx)("br",{})," IBKR and our clients from large trading losses."]}),(0,c.jsxs)("div",{className:"data",children:[(0,c.jsxs)("div",{className:"data1",children:[(0,c.jsx)("h1",{children:"IBKR"}),(0,c.jsx)("p",{children:"Nasdaq Listed"})]}),(0,c.jsxs)("div",{className:"data1",children:[(0,c.jsx)("h1",{children:"$10.60B"}),(0,c.jsx)("p",{children:"Equity Capital"})]}),(0,c.jsxs)("div",{className:"data1",children:[(0,c.jsx)("h1",{children:"76.3%"}),(0,c.jsx)("p",{children:"Privately Held"})]})]}),(0,c.jsxs)("div",{className:"data",children:[(0,c.jsxs)("div",{className:"data2",children:[(0,c.jsx)("h1",{children:"$7.4B"}),(0,c.jsx)("p",{children:"Excessive Regulatory"})]}),(0,c.jsxs)("div",{className:"data2",children:[(0,c.jsx)("h1",{children:"1.92M"}),(0,c.jsx)("p",{children:"Clients Accounts"})]}),(0,c.jsxs)("div",{className:"data2",children:[(0,c.jsx)("h1",{children:"2.17M"}),(0,c.jsx)("p",{children:"Daily Avg. Revenue"})]})]})]}),(0,c.jsx)("div",{className:"middle4_btn",children:(0,c.jsx)("button",{children:"IBKR Protection"})}),(0,c.jsx)("div",{className:"info",children:(0,c.jsx)("p",{children:"*Interactive Brokers Group and its affiliates. For additional information view our Investors Relations - Earnings Release section by clicking here."})})]}),(0,c.jsx)("div",{className:"middle4_left",children:(0,c.jsx)("img",{className:"middle4_img child",src:"https://www.interactivebrokers.com/images/web/home-security.jpg",alt:"logo"})})]})]})};var bT=function(e){var t=e.isOpen,n=e.register,r=e.setEmail,i=e.setPassword,a=e.email,o=e.password;return!1===t?null:(0,c.jsx)("div",{children:(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"signUp",children:[(0,c.jsx)("a",{href:"/",children:(0,c.jsx)("img",{className:"signUp__logo",src:"https://cdn-cpapa.nitrocdn.com/ymOIiISvfwfhKKlcNHQkeJnhLXeukOqq/assets/static/optimized/rev-2dc9606/wp-content/uploads/2020/04/Interactive-Brokers-Banner-with-White-Background-1024x195.png",alt:"logo"})}),(0,c.jsxs)("div",{className:"signUp__container",children:[(0,c.jsx)("h1",{children:"Create Account"}),(0,c.jsxs)("form",{children:[(0,c.jsx)("h5",{children:"First Name"}),(0,c.jsx)("input",{type:"text",placeholder:"First name..."}),(0,c.jsx)("h5",{children:"Last Name"}),(0,c.jsx)("input",{type:"text",placeholder:"Last name..."}),(0,c.jsx)("h5",{children:"Phone Number"}),(0,c.jsx)("input",{type:"text"}),(0,c.jsx)("h5",{children:"E-mail"}),(0,c.jsx)("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)}}),(0,c.jsx)("h5",{children:"Password"}),(0,c.jsx)("input",{type:"password",value:o,onChange:function(e){return i(e.target.value)}})]}),(0,c.jsx)("button",{className:"signUp__registerButton",onClick:n,children:"Create Your Amazon Account"})]})]})})})};var xT=function(){var e=Ie(fe),n=s((0,t.useState)(""),2),r=n[0],i=n[1],a=s((0,t.useState)(""),2),o=a[0],u=a[1],l=s((0,t.useState)(!0),2),f=l[0],h=l[1];return(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"logIn",children:[(0,c.jsx)("a",{href:"/",children:(0,c.jsx)("img",{className:"logIn__logo",src:"https://cdn-cpapa.nitrocdn.com/ymOIiISvfwfhKKlcNHQkeJnhLXeukOqq/assets/static/optimized/rev-2dc9606/wp-content/uploads/2020/04/Interactive-Brokers-Banner-with-White-Background-1024x195.png",alt:"logo"})}),(0,c.jsxs)("div",{className:"logIn__container",children:[(0,c.jsx)("h1",{children:"Sign-in"}),(0,c.jsxs)("form",{children:[(0,c.jsx)("h5",{children:"E-mail"}),(0,c.jsx)("input",{type:"text",value:r,onChange:function(e){return i(e.target.value)}}),(0,c.jsx)("h5",{children:"Password"}),(0,c.jsx)("input",{type:"password",value:o,onChange:function(e){return u(e.target.value)}}),(0,c.jsx)("button",{type:"submit",className:"logIn__signInButton",onClick:function(t){t.preventDefault(),uT.signInWithEmailAndPassword(r,o).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},children:"Sign-in"})]}),(0,c.jsx)("p",{children:"By signing-in you agree to Amazon's Conditions of Use & Sale. Please see our provacy Notice, our Cookies Notice and our Interest-Based Ads Notice"}),(0,c.jsx)("button",{className:"logIn__registerButton",onClick:function(){h(!0),window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})},children:"Create Your Amazon Account"})]}),(0,c.jsx)("div",{className:"footer",children:(0,c.jsx)("p",{className:"footer__p",children:"All Rights Are Reserved to 'Saksham Srivastava'"})}),(0,c.jsx)(bT,{isOpen:f,register:function(t){t.preventDefault(),uT.createUserWithEmailAndPassword(r,o).then((function(t){console.log(t),t&&e.push("/")})).catch((function(e){return alert(e.message)}))},setEmail:i,setPassword:u,email:r,password:o})]})})};var _T=function(){return(0,c.jsxs)("div",{className:"ad",children:[(0,c.jsx)("h3",{children:"Choose the Best Account Type for You"}),(0,c.jsxs)("div",{className:"line",children:[(0,c.jsxs)("div",{className:"line_1",children:[(0,c.jsx)("img",{className:"needMore",src:"https://www.interactivebrokers.com/images/web/acct-type-individual.svg",alt:"logo"}),(0,c.jsx)("p",{children:"Individual Accounts"})]}),(0,c.jsxs)("div",{className:"line_2",children:[(0,c.jsx)("img",{className:"needLess",src:"https://www.interactivebrokers.com/images/web/acct-type-joint.svg",alt:"logo"}),(0,c.jsx)("p",{children:"Joint Accounts"})]}),(0,c.jsxs)("div",{className:"line_3",children:[(0,c.jsx)("img",{className:"needMore",src:"https://www.interactivebrokers.com/images/web/acct-type-retirement-ira.svg",alt:"logo"}),(0,c.jsx)("p",{children:"Retirement Accounts"})]}),(0,c.jsxs)("div",{className:"line_4",children:[(0,c.jsx)("img",{className:"needLess",src:"https://www.interactivebrokers.com/images/web/acct-type-trust.svg",alt:"logo"}),(0,c.jsx)("p",{children:"Trust Accounts"})]}),(0,c.jsxs)("div",{className:"line_5",children:[(0,c.jsx)("img",{className:"needMore",src:"https://www.interactivebrokers.com/images/web/acct-type-friends-family.svg",alt:"logo"}),(0,c.jsx)("p",{children:"Family Accounts"})]}),(0,c.jsxs)("div",{className:"line_6",children:[(0,c.jsx)("img",{className:"needLess",src:"https://www.interactivebrokers.com/images/web/acct-type-institution.svg",alt:"logo"}),(0,c.jsx)("p",{children:"Institutional Accounts"})]})]}),(0,c.jsxs)("div",{className:"banner",children:[(0,c.jsxs)("div",{className:"steps",children:[(0,c.jsxs)("div",{className:"step1",children:[(0,c.jsx)("h3",{children:"Step 1"}),(0,c.jsx)("h5",{children:"Complete the Application"}),(0,c.jsx)("p",{children:"It takes only a few minutes"})]}),(0,c.jsxs)("div",{className:"step1",children:[(0,c.jsx)("h3",{children:"Step 2"}),(0,c.jsx)("h5",{children:"Fund Your Account"}),(0,c.jsx)("p",{children:"Connect your bank or transfer an account"})]}),(0,c.jsxs)("div",{className:"step1",children:[(0,c.jsx)("h3",{children:"Step 3"}),(0,c.jsx)("h5",{children:"Get Started Trading"}),(0,c.jsx)("p",{children:"Take your investing to the next level"})]})]}),(0,c.jsx)("div",{className:"openAccountAd",children:(0,c.jsx)(De,{to:"/login",onClick:function(){window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})},children:(0,c.jsx)("button",{children:"Open an Account"})})})]}),(0,c.jsx)("div",{className:"link",children:(0,c.jsx)("a",{href:"https://www.interactivebrokers.co.in/en/index.php?f=53126",children:"Attention Investors"})})]})};var IT=function(){return(0,c.jsxs)("div",{className:"footer",children:[(0,c.jsxs)("div",{className:"footer_1",children:[(0,c.jsxs)("p",{children:["1.\xa0\xa0 Lowest Cost Broker according to StockBrokers.com Online Broker Survey 2022:"," ",(0,c.jsx)("a",{href:"https://www.stockbrokers.com/review/interactivebrokers",children:"Read the full article"})," ","Online Broker Reviews, January 11, 2022. \"Because Interactive Brokers' core clientele are professional traders and institutional investors",(0,c.jsx)("br",{}),'\xa0\xa0\xa0\xa0 (e.g., hedge funds), it is crucial to provide the lowest commissions schedule available. In our rigorous assessment, there is no question Interactive Brokers delivers."']}),(0,c.jsx)("br",{}),(0,c.jsx)("p",{children:"2. \xa0\xa0Lower investment costs will increase your overall return on investment, but lower costs do not guarantee that your investment will be profitable."}),(0,c.jsx)("br",{}),(0,c.jsxs)("p",{children:["3.\xa0\xa0 For complete information, see"," ",(0,c.jsx)("a",{href:"https://www.interactivebrokers.co.in/en/index.php?f=1340",children:"ibkr.com/compare"})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("p",{children:["4. \xa0 Restrictions apply. For additional information on interest rates,",(0,c.jsx)("a",{href:"https://www.interactivebrokers.co.in/en/index.php?f=46788",children:"click here"})," ","Credit interest rate as of 7/29/2022."]})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{className:"footer_2",children:[(0,c.jsxs)("p",{children:["Interactive Brokers \xae, IBSM, InteractiveBrokers.com \xae, Interactive Analytics \xae, IB Options AnalyticsSM, IB SmartRouting, PortfolioAnalyst \xae, IB Trader Workstation and One World, One Account are service marks and/or trademarks of",(0,c.jsx)("br",{})," Interactive Brokers LLC. Supporting documentation for any claims and statistical information will be provided upon request. Any trading symbols displayed are for illustrative purposes only and are not intended to portray recommendations."]}),(0,c.jsx)("br",{}),(0,c.jsx)("p",{children:"The risk of loss in online trading of stocks, options, futures, currencies, foreign equities, and fixed Income can be substantial."}),(0,c.jsx)("br",{}),(0,c.jsxs)("p",{children:["Options involve risk and are not suitable for all investors. For more information read the",(0,c.jsx)("a",{href:"",children:" Characteristics and Risks of Standardized Options"}),", also known as the options disclosure document (ODD). Alternatively, call 312-542-6901 to receive a copy ",(0,c.jsx)("br",{}),"of the ODD. Before trading, clients must read the relevant risk disclosure statements on our"," ",(0,c.jsx)("a",{href:"",children:"Warnings and Disclosures page"}),". Trading on margin is only for experienced investors with high risk tolerance. You may lose more than your initial",(0,c.jsx)("br",{})," investment. For additional information about rates on margin loans, please see ",(0,c.jsx)("a",{href:"",children:"Margin Loan Rates"}),". Security futures involve a high degree of risk and are not suitable for all investors. The amount you may lose may be greater than your initial ",(0,c.jsx)("br",{}),"investment. Before trading security futures, read the"," ",(0,c.jsx)("a",{href:"",children:"Security Futures Risk Disclosure Statement"}),". Structured products and fixed income products such as bonds are complex products that are more risky and are not suitable for all investors.",(0,c.jsx)("br",{})," Before trading, please read the"," ",(0,c.jsx)("a",{href:"",children:"Risk Warning and Disclosure Statement"}),"."]}),(0,c.jsx)("br",{}),(0,c.jsxs)("p",{children:["For information on the IBKR ATS, please"," ",(0,c.jsx)("a",{href:"",children:"visit the SEC site."})]})]}),(0,c.jsxs)("div",{className:"footer_3",children:[(0,c.jsxs)("div",{className:"column_1",children:[(0,c.jsxs)("div",{className:"row_1",children:[(0,c.jsx)("h6",{children:"Account"}),(0,c.jsx)("p",{children:"Log In"}),(0,c.jsx)("p",{children:"Finish an Application"}),(0,c.jsx)("p",{children:"Account Types"}),(0,c.jsx)("p",{children:"Free Trial"})]}),(0,c.jsxs)("div",{className:"row_2",children:[(0,c.jsx)("h6",{children:"Software & Downloads"}),(0,c.jsx)("p",{children:"Trader Workstation"}),(0,c.jsx)("p",{children:"IBKR Mobiles"}),(0,c.jsx)("p",{children:"APIs"})]})]}),(0,c.jsx)("div",{className:"column_2",children:(0,c.jsxs)("div",{className:"row_1",children:[(0,c.jsx)("h6",{children:"Support"}),(0,c.jsx)("p",{children:"Fund Your Account"}),(0,c.jsx)("p",{children:"For Individuals"}),(0,c.jsx)("p",{children:"For Institutions"}),(0,c.jsx)("p",{children:"Institutional Sales Contacts"}),(0,c.jsx)("p",{children:"Browse our FAQs"})]})}),(0,c.jsx)("div",{className:"column_3",children:(0,c.jsxs)("div",{className:"row_1",children:[(0,c.jsx)("h6",{children:"About Us"}),(0,c.jsx)("p",{children:"Awards"}),(0,c.jsx)("p",{children:"Careers"}),(0,c.jsx)("p",{children:"Information and History"}),(0,c.jsx)("p",{children:"Investor Relations"}),(0,c.jsx)("p",{children:"News @ IBKR"}),(0,c.jsx)("p",{children:"Press and Media"}),(0,c.jsx)("p",{children:"Regulatory Reports"})]})}),(0,c.jsx)("div",{className:"column_4",children:(0,c.jsxs)("div",{className:"row_1",children:[(0,c.jsx)("h6",{children:"Follow Us on Social Media"}),(0,c.jsxs)("p",{children:[(0,c.jsx)(g,{className:"i_icon"}),"\xa0\xa0Facebook"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(k,{className:"i_icon"}),"\xa0\xa0Instagram"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(w,{className:"i_icon"}),"\xa0\xa0LinkedIn"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(b,{className:"i_icon"}),"\xa0\xa0Twitter"]}),(0,c.jsxs)("p",{children:[(0,c.jsx)(x,{className:"i_icon"}),"\xa0\xa0Youtube"]})]})})]}),(0,c.jsx)("div",{className:"footer_4",children:(0,c.jsxs)("div",{className:"Row",children:[(0,c.jsx)("p",{className:"Row_1",children:"Anti-Fraud Notice"}),(0,c.jsx)("p",{className:"Row_2",children:" Forms and Disclosures"}),(0,c.jsx)("p",{className:"Row_3",children:" Investor Grievances"}),(0,c.jsx)("p",{className:"Row_4",children:"CSR Policy"}),(0,c.jsx)("p",{className:"Row_5",children:"Policies"}),(0,c.jsx)("p",{className:"Row_6",children:"Terms of Use"}),(0,c.jsx)("p",{className:"Row_7",children:"Site Map"})]})}),(0,c.jsxs)("div",{className:"footer_5",children:[(0,c.jsx)("h5",{children:"Interactive Brokers India Pvt. Ltd."}),(0,c.jsx)("p",{children:"Is a member of NSE, BSE, SEBI. Regn. No. SEBI Registration No. INZ000217730; NSDL: IN-DP-NSDL-301-2008. CIN-U67120MH2007FTC170004."}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Registered Office:"})," \xa0502/A, Times Square, Andheri Kurla Road, Andheri East, Mumbai 400059, India."]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Phone:"})," +91-22-61289888 | ",(0,c.jsx)("b",{children:"Fax:"})," +91-22-61289898."]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Website:"}),"  ",(0,c.jsx)("a",{href:"https://www.interactivebrokers.co.in/en/home.php",children:"www.interactivebrokers.co.in"})]}),(0,c.jsx)("div",{className:"lastLine",children:(0,c.jsxs)("h5",{children:[(0,c.jsx)("span",{className:"arrowRight",children:(0,c.jsx)(kT,{})})," Information on Other Interactive Brokers Affiliates"]})})]})]})};var ST=function(){return(0,c.jsx)(Se,{children:(0,c.jsx)("div",{className:"app",children:(0,c.jsxs)(_e,{children:[(0,c.jsx)(ye,{path:"/hamburger",children:(0,c.jsx)(cT,{})}),(0,c.jsx)(ye,{path:"/login",children:(0,c.jsx)(xT,{})}),(0,c.jsx)(ye,{path:"/signup",children:(0,c.jsx)(bT,{})}),(0,c.jsxs)(ye,{path:"/",children:[(0,c.jsx)(l,{}),(0,c.jsx)(fT,{}),(0,c.jsx)("div",{className:"carousel",children:(0,c.jsx)(vT,{})}),(0,c.jsx)(mT,{}),(0,c.jsx)(yT,{}),(0,c.jsx)(wT,{}),(0,c.jsx)(_T,{}),(0,c.jsx)(IT,{})]})]})})})},ET=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,c.jsx)(t.StrictMode,{children:(0,c.jsx)(ST,{})})),ET()}()}();
//# sourceMappingURL=main.7a5b51ba.js.map